/**
 * @fileoverview added by tsickle
 * Generated from: lib/dynamic-mat-table/extensions/filter/compare/text-filter.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { AbstractFilter } from './abstract-filter';
/** @type {?} */
const contains = 'a.toString().includes(b)';
/** @type {?} */
const equals = 'a.toString() === b.toString()';
/** @type {?} */
const startsWith = 'a.toString().startsWith(b)';
/** @type {?} */
const endsWith = 'a.toString().endsWith(b.toString())';
/** @type {?} */
const empty = '!a';
/** @type {?} */
const notEmpty = '!!a';
/** @type {?} */
const operations = [contains, equals, startsWith, endsWith, empty, notEmpty];
export class TextFilter extends AbstractFilter {
    /**
     * @param {?} languagePack
     */
    constructor(languagePack) {
        super();
        this.languagePack = languagePack;
        // tslint:disable-next-line:variable-name
        this._selectedIndex = null;
        this._selectedIndex = 0;
        if (TextFilter.operationList.length === 0) { // init for first time
            operations.forEach((/**
             * @param {?} fn
             * @return {?}
             */
            fn => {
                TextFilter.operationList.push({ predicate: fn, text: null });
            }));
        }
        TextFilter.operationList[0].text = languagePack.filterLabels.TextContains; // contains //
        TextFilter.operationList[1].text = languagePack.filterLabels.TextEquals; // equals //
        TextFilter.operationList[2].text = languagePack.filterLabels.TextStartsWith; // startsWith //
        TextFilter.operationList[3].text = languagePack.filterLabels.TextEndsWith; // endsWith //
        TextFilter.operationList[4].text = languagePack.filterLabels.TextEmpty; // empty //
        TextFilter.operationList[5].text = languagePack.filterLabels.TextNotEmpty; // notEmpty //
    }
    /**
     * @return {?}
     */
    get selectedIndex() {
        return this._selectedIndex;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selectedIndex(value) {
        this._selectedIndex = value;
        // init filter parameters
        if (value === 0 || value === 1 || value === 2 || value === 3) { // contains equals startsWith endsWith
            this.parameters = [{ value: '', text: this.languagePack.filterLabels.Text }];
        }
        else { // empty notEmpty
            this.parameters = null;
        }
    }
    /**
     * @return {?}
     */
    get selectedValue() {
        if (this._selectedIndex !== null) {
            return TextFilter.operationList[this._selectedIndex];
        }
        else {
            return null;
        }
    }
    /**
     * @return {?}
     */
    getOperations() {
        return TextFilter.operationList;
    }
    /**
     * @param {?} dynamicVariable
     * @return {?}
     */
    toString(dynamicVariable) {
        /** @type {?} */
        const a = '_a$';
        /** @type {?} */
        const b = '_b$';
        /** @type {?} */
        const predicate = this.selectedValue.predicate.replace('a', a).replace('b', b);
        /** @type {?} */
        const statement = predicate.replace(a, `${a}['${dynamicVariable}']?.toString()?.toLowerCase()`);
        // one static parameters equals  notEquals greaterThan lessThan //
        if (this._selectedIndex === 0 ||
            this._selectedIndex === 1 ||
            this._selectedIndex === 2 ||
            this._selectedIndex === 3) {
            /** @type {?} */
            const value = '\'' + (this.parameters[0].value !== null ? this.parameters[0].value.toLowerCase() : ' null ') + '\'';
            return statement.replace('_b$', value);
        }
        else { // without static parameters
            return statement;
        }
    }
    /**
     * @return {?}
     */
    toPrint() {
        return TextFilter.operationList[this._selectedIndex].text + ' ' + this.parameters[0].value + ' ' + (this.type || '') + ' ';
    }
    /**
     * @return {?}
     */
    toSql() {
        return TextFilter.sql[this._selectedIndex].replace('[*]', (this.parameters[0].value || '')) + (this.type || '') + ' ';
    }
}
TextFilter.sql = ['LIKE "%[*]%"', '= "[*]"', 'LIKE "%[*]"', 'LIKE "[*]%"', 'IS NULL', 'IS NOT NULL'];
TextFilter.operationList = [];
if (false) {
    /**
     * @type {?}
     * @private
     */
    TextFilter.sql;
    /**
     * @type {?}
     * @private
     */
    TextFilter.operationList;
    /**
     * @type {?}
     * @private
     */
    TextFilter.prototype._selectedIndex;
    /** @type {?} */
    TextFilter.prototype.languagePack;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC1maWx0ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9keW5hbWljLW1hdC10YWJsZS8iLCJzb3VyY2VzIjpbImxpYi9keW5hbWljLW1hdC10YWJsZS9leHRlbnNpb25zL2ZpbHRlci9jb21wYXJlL3RleHQtZmlsdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLGNBQWMsRUFBbUIsTUFBTSxtQkFBbUIsQ0FBQzs7TUFHOUQsUUFBUSxHQUFHLDBCQUEwQjs7TUFDckMsTUFBTSxHQUFHLCtCQUErQjs7TUFDeEMsVUFBVSxHQUFHLDRCQUE0Qjs7TUFDekMsUUFBUSxHQUFHLHFDQUFxQzs7TUFDaEQsS0FBSyxHQUFHLElBQUk7O01BQ1osUUFBUSxHQUFHLEtBQUs7O01BQ2hCLFVBQVUsR0FBRyxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDO0FBRTVFLE1BQU0sT0FBTyxVQUFXLFNBQVEsY0FBc0I7Ozs7SUFJcEQsWUFBbUIsWUFBdUI7UUFDeEMsS0FBSyxFQUFFLENBQUM7UUFEUyxpQkFBWSxHQUFaLFlBQVksQ0FBVzs7UUFpQmxDLG1CQUFjLEdBQVcsSUFBSSxDQUFDO1FBZnBDLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLElBQUssVUFBVSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFLEVBQUUsc0JBQXNCO1lBQ2xFLFVBQVUsQ0FBQyxPQUFPOzs7O1lBQUMsRUFBRSxDQUFDLEVBQUU7Z0JBQ3RCLFVBQVUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztZQUM5RCxDQUFDLEVBQUMsQ0FBQztTQUNKO1FBQ0QsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLFlBQVks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QUFFLDRCQUE0QjtZQUNuQyxPQUFPLFNBQVMsQ0FBQztTQUNsQjtJQUNILENBQUM7Ozs7SUFFTSxPQUFPO1FBQ1osT0FBTyxVQUFVLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQzdILENBQUM7Ozs7SUFFTSxLQUFLO1FBQ1YsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDO0lBQ3hILENBQUM7O0FBckVjLGNBQUcsR0FBRyxDQUFDLGNBQWMsRUFBRSxTQUFTLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDMUYsd0JBQWEsR0FBc0IsRUFBRSxDQUFDOzs7Ozs7SUFEckQsZUFBeUc7Ozs7O0lBQ3pHLHlCQUFxRDs7Ozs7SUFtQnJELG9DQUFzQzs7SUFqQjFCLGtDQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFic3RyYWN0RmlsdGVyLCBGaWx0ZXJPcGVyYXRpb24gfSBmcm9tICcuL2Fic3RyYWN0LWZpbHRlcic7XHJcbmltcG9ydCB7IFRhYmxlSW50bCB9IGZyb20gJy4uLy4uLy4uLy4uL2ludGVybmF0aW9uYWwvdGFibGUtSW50bCc7XHJcblxyXG5jb25zdCBjb250YWlucyA9ICdhLnRvU3RyaW5nKCkuaW5jbHVkZXMoYiknO1xyXG5jb25zdCBlcXVhbHMgPSAnYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCknO1xyXG5jb25zdCBzdGFydHNXaXRoID0gJ2EudG9TdHJpbmcoKS5zdGFydHNXaXRoKGIpJztcclxuY29uc3QgZW5kc1dpdGggPSAnYS50b1N0cmluZygpLmVuZHNXaXRoKGIudG9TdHJpbmcoKSknO1xyXG5jb25zdCBlbXB0eSA9ICchYSc7XHJcbmNvbnN0IG5vdEVtcHR5ID0gJyEhYSc7XHJcbmNvbnN0IG9wZXJhdGlvbnMgPSBbY29udGFpbnMsIGVxdWFscywgc3RhcnRzV2l0aCwgZW5kc1dpdGgsIGVtcHR5LCBub3RFbXB0eV07XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEZpbHRlciBleHRlbmRzIEFic3RyYWN0RmlsdGVyPHN0cmluZz4ge1xyXG4gIHByaXZhdGUgc3RhdGljIHNxbCA9IFsnTElLRSBcIiVbKl0lXCInLCAnPSBcIlsqXVwiJywgJ0xJS0UgXCIlWypdXCInLCAnTElLRSBcIlsqXSVcIicsICdJUyBOVUxMJywgJ0lTIE5PVCBOVUxMJ107XHJcbiAgcHJpdmF0ZSBzdGF0aWMgb3BlcmF0aW9uTGlzdDogRmlsdGVyT3BlcmF0aW9uW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIGxhbmd1YWdlUGFjazogVGFibGVJbnRsKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5fc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICBpZiAoIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdC5sZW5ndGggPT09IDApIHsgLy8gaW5pdCBmb3IgZmlyc3QgdGltZVxyXG4gICAgICBvcGVyYXRpb25zLmZvckVhY2goZm4gPT4ge1xyXG4gICAgICAgIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdC5wdXNoKHsgcHJlZGljYXRlOiBmbiwgdGV4dDogbnVsbH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdFswXS50ZXh0ID0gbGFuZ3VhZ2VQYWNrLmZpbHRlckxhYmVscy5UZXh0Q29udGFpbnM7ICAgIC8vIGNvbnRhaW5zIC8vXHJcbiAgICBUZXh0RmlsdGVyLm9wZXJhdGlvbkxpc3RbMV0udGV4dCA9IGxhbmd1YWdlUGFjay5maWx0ZXJMYWJlbHMuVGV4dEVxdWFsczsgICAgICAvLyBlcXVhbHMgLy9cclxuICAgIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdFsyXS50ZXh0ID0gbGFuZ3VhZ2VQYWNrLmZpbHRlckxhYmVscy5UZXh0U3RhcnRzV2l0aDsgIC8vIHN0YXJ0c1dpdGggLy9cclxuICAgIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdFszXS50ZXh0ID0gbGFuZ3VhZ2VQYWNrLmZpbHRlckxhYmVscy5UZXh0RW5kc1dpdGg7ICAgIC8vIGVuZHNXaXRoIC8vXHJcbiAgICBUZXh0RmlsdGVyLm9wZXJhdGlvbkxpc3RbNF0udGV4dCA9IGxhbmd1YWdlUGFjay5maWx0ZXJMYWJlbHMuVGV4dEVtcHR5OyAgICAgICAvLyBlbXB0eSAvL1xyXG4gICAgVGV4dEZpbHRlci5vcGVyYXRpb25MaXN0WzVdLnRleHQgPSBsYW5ndWFnZVBhY2suZmlsdGVyTGFiZWxzLlRleHROb3RFbXB0eTsgICAgLy8gbm90RW1wdHkgLy9cclxuICB9XHJcblxyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXHJcbiAgcHJpdmF0ZSBfc2VsZWN0ZWRJbmRleDogbnVtYmVyID0gbnVsbDtcclxuICBnZXQgc2VsZWN0ZWRJbmRleCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkSW5kZXg7XHJcbiAgfVxyXG4gIHNldCBzZWxlY3RlZEluZGV4KHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSB2YWx1ZTtcclxuICAgIC8vIGluaXQgZmlsdGVyIHBhcmFtZXRlcnNcclxuICAgIGlmICh2YWx1ZSA9PT0gMCB8fCB2YWx1ZSA9PT0gMSB8fCB2YWx1ZSA9PT0gMiB8fCB2YWx1ZSA9PT0gMyApIHsgLy8gY29udGFpbnMgZXF1YWxzIHN0YXJ0c1dpdGggZW5kc1dpdGhcclxuICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gW3sgdmFsdWU6ICcnLCB0ZXh0OiB0aGlzLmxhbmd1YWdlUGFjay5maWx0ZXJMYWJlbHMuVGV4dCB9XTtcclxuICAgIH0gZWxzZSB7IC8vIGVtcHR5IG5vdEVtcHR5XHJcbiAgICAgIHRoaXMucGFyYW1ldGVycyA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgc2VsZWN0ZWRWYWx1ZSgpOiBGaWx0ZXJPcGVyYXRpb24ge1xyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGVkSW5kZXggIT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdFt0aGlzLl9zZWxlY3RlZEluZGV4XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldE9wZXJhdGlvbnMoKTogRmlsdGVyT3BlcmF0aW9uW10ge1xyXG4gICAgcmV0dXJuIFRleHRGaWx0ZXIub3BlcmF0aW9uTGlzdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB0b1N0cmluZyhkeW5hbWljVmFyaWFibGU6IGFueSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBhID0gJ19hJCc7XHJcbiAgICBjb25zdCBiID0gJ19iJCc7XHJcbiAgICBjb25zdCBwcmVkaWNhdGUgPSB0aGlzLnNlbGVjdGVkVmFsdWUucHJlZGljYXRlLnJlcGxhY2UoJ2EnLCBhKS5yZXBsYWNlKCdiJywgYik7XHJcbiAgICBjb25zdCBzdGF0ZW1lbnQgPSBwcmVkaWNhdGUucmVwbGFjZShhLCBgJHthfVsnJHtkeW5hbWljVmFyaWFibGV9J10/LnRvU3RyaW5nKCk/LnRvTG93ZXJDYXNlKClgKTtcclxuICAgIC8vIG9uZSBzdGF0aWMgcGFyYW1ldGVycyBlcXVhbHMgIG5vdEVxdWFscyBncmVhdGVyVGhhbiBsZXNzVGhhbiAvL1xyXG4gICAgaWYgKHRoaXMuX3NlbGVjdGVkSW5kZXggPT09IDAgfHxcclxuICAgICAgdGhpcy5fc2VsZWN0ZWRJbmRleCA9PT0gMSB8fFxyXG4gICAgICB0aGlzLl9zZWxlY3RlZEluZGV4ID09PSAyIHx8XHJcbiAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPT09IDMgKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSAnXFwnJyArICh0aGlzLnBhcmFtZXRlcnNbMF0udmFsdWUgIT09IG51bGwgPyB0aGlzLnBhcmFtZXRlcnNbMF0udmFsdWUudG9Mb3dlckNhc2UoKSA6ICcgbnVsbCAnKSArICdcXCcnO1xyXG4gICAgICAgIHJldHVybiBzdGF0ZW1lbnQucmVwbGFjZSgnX2IkJywgdmFsdWUpO1xyXG4gICAgfSBlbHNlIHsgLy8gd2l0aG91dCBzdGF0aWMgcGFyYW1ldGVyc1xyXG4gICAgICByZXR1cm4gc3RhdGVtZW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvUHJpbnQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBUZXh0RmlsdGVyLm9wZXJhdGlvbkxpc3RbdGhpcy5fc2VsZWN0ZWRJbmRleF0udGV4dCArICcgJyArIHRoaXMucGFyYW1ldGVyc1swXS52YWx1ZSArICcgJyArICh0aGlzLnR5cGUgfHwgJycpICsgJyAnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvU3FsKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gVGV4dEZpbHRlci5zcWxbdGhpcy5fc2VsZWN0ZWRJbmRleF0ucmVwbGFjZSgnWypdJywgKHRoaXMucGFyYW1ldGVyc1swXS52YWx1ZSB8fCAnJykpICsgKHRoaXMudHlwZSB8fCAnJykgKyAnICc7XHJcbiAgfVxyXG59XHJcblxyXG4iXX0=