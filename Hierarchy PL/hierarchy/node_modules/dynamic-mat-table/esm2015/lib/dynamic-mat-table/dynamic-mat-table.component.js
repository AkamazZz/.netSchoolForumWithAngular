/**
 * @fileoverview added by tsickle
 * Generated from: lib/dynamic-mat-table/dynamic-mat-table.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, QueryList, ElementRef, ViewChild, TemplateRef, Renderer2, ChangeDetectorRef, Input, ContentChildren } from '@angular/core';
import { TableCoreDirective } from '../cores/table.core.directive';
import { TableService } from './dynamic-mat-table.service';
import { HeaderFilterComponent } from './extensions/filter/header-filter.component';
import { MatDialog } from '@angular/material/dialog';
import { PrintTableDialogComponent } from './extensions/print-dialog/print-dialog.component';
import { trigger, transition, style, animate, query, stagger, state } from '@angular/animations';
import { ResizeColumn } from '../models/resize-column.mode';
import { TableIntl } from '../international/table-Intl';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { isNullorUndefined } from '../cores/type';
import { delay } from 'rxjs/operators';
import { MatMenuTrigger } from '@angular/material/menu';
import { OverlayContainer } from '@angular/cdk/overlay';
import { MAT_TOOLTIP_DEFAULT_OPTIONS } from '@angular/material/tooltip';
import { requestFullscreen } from '../utilies/html.helper';
/** @type {?} */
export const tableAnimation = trigger('tableAnimation', [
    transition('void => *', [
        query(':enter', style({ transform: 'translateX(-50%)', opacity: 0 }), {
            //limit: 5,
            optional: true,
        }),
        query(':enter', stagger('0.01s', [
            animate('0.5s ease', style({ transform: 'translateX(0%)', opacity: 1 })),
        ]), {
            //limit: 5, 
            optional: true
        }),
    ]),
]);
/** @type {?} */
export const expandAnimation = trigger('detailExpand', [
    state('collapsed', style({ height: '0px', minHeight: '0' })),
    state('expanded', style({ height: '*' })),
    transition('expanded <=> collapsed', animate('100ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
]);
/** @type {?} */
export const cellTooltipDefaults = {
    showDelay: 500,
    hideDelay: 400,
    touchendHideDelay: 1000,
    position: 'above',
};
/**
 * @template T
 */
export class DynamicMatTableComponent extends TableCoreDirective {
    /**
     * @param {?} dialog
     * @param {?} renderer
     * @param {?} languagePack
     * @param {?} tableService
     * @param {?} cdr
     * @param {?} overlayContainer
     */
    constructor(dialog, renderer, languagePack, tableService, cdr, overlayContainer) {
        super(tableService, cdr);
        this.dialog = dialog;
        this.renderer = renderer;
        this.languagePack = languagePack;
        this.tableService = tableService;
        this.cdr = cdr;
        this.overlayContainer = overlayContainer;
        this.contextMenuPosition = { x: '0px', y: '0px' };
        this.dragDropData = { dragColumnIndex: -1, dropColumnIndex: -1 };
        this.printing = true;
        this.printTemplate = null;
        this.resizeColumn = new ResizeColumn();
        this.indexTrackFn = (/**
         * @param {?} index
         * @return {?}
         */
        (index) => {
            return index;
        });
        this.currentContextMenuSender = {};
        this.overlayContainer.getContainerElement().addEventListener('contextmenu', (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            e.preventDefault();
            return false;
        }));
        this.eventsSubscription = this.resizeColumn.widthUpdate.pipe(delay(100)).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        (data) => {
            this.columns[data.i].width = data.w;
            if (this.tableSetting.columnSetting[data.i]) {
                this.tableSetting.columnSetting[data.i].width = data.w;
            }
            this.refreshGrid();
        }));
    }
    /**
     * @return {?}
     */
    get setting() {
        return this.tableSetting;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set setting(value) {
        if (!isNullorUndefined(value)) {
            value.columnSetting = value.columnSetting || this.tableSetting.columnSetting;
            value.alternativeRowStyle = value.alternativeRowStyle || this.tableSetting.alternativeRowStyle;
            value.columnSetting = value.columnSetting || this.tableSetting.columnSetting;
            value.direction = value.direction || this.tableSetting.direction;
            value.normalRowStyle = value.normalRowStyle || this.tableSetting.normalRowStyle;
            value.visibaleActionMenu = value.visibaleActionMenu || this.tableSetting.visibaleActionMenu;
            value.visibleTableMenu = value.visibleTableMenu || this.tableSetting.visibleTableMenu;
            this.tableSetting = value;
            this.setDisplayedColumns();
        }
    }
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    trackColumn(index, item) {
        return `${item.index}`;
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.eventsSubscription) {
            this.eventsSubscription.unsubscribe();
        }
    }
    /**
     * @return {?}
     */
    refreshUI() {
        var _a, _b;
        /** @type {?} */
        const scrollStrategy = this.viewport['_scrollStrategy'];
        (_a = scrollStrategy === null || scrollStrategy === void 0 ? void 0 : scrollStrategy.viewport) === null || _a === void 0 ? void 0 : _a.checkViewportSize();
        (_b = scrollStrategy === null || scrollStrategy === void 0 ? void 0 : scrollStrategy.viewport) === null || _b === void 0 ? void 0 : _b.scrollToOffset(0);
        this.cdr.detectChanges();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const scrollStrategy = this.viewport['_scrollStrategy'];
        scrollStrategy.offsetChange.subscribe((/**
         * @param {?} offset
         * @return {?}
         */
        offset => {
            // console.log(offset);
        }));
        this.viewport.renderedRangeStream.subscribe((/**
         * @param {?} t
         * @return {?}
         */
        t => {
            // in expanding row scrolling make not good apperance therefor close it.
            if (this.expandedElement && this.expandedElement.option && this.expandedElement.option.expand) {
                // console.log('clear', t); 
                // this.expandedElement.option.expand = false;
                // this.expandedElement = null;
            }
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.tvsDataSource.paginator = this.paginator;
        this.tvsDataSource.sort = this.sort;
        this.dataSource.subscribe((/**
         * @param {?} x
         * @return {?}
         */
        x => {
            //console.log(x);      
            this.initSystemField(x);
            this.tvsDataSource.data = x;
            // this.cdr.detectChanges();
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.refreshUI();
            }), 0);
        }));
        this.tvsDataSource.sort.sortChange.subscribe((/**
         * @param {?} sort
         * @return {?}
         */
        sort => {
            this.pagination.pageIndex = 0;
            this.onTableEvent.emit({ event: 'SortChanged', sender: sort });
        }));
        // this.dataSource.dataOfRange$.subscribe((data) => {
        //   // console.log('dataOfRange');
        // });
    }
    /**
     * @return {?}
     */
    get inverseOfTranslation() {
        if (!this.viewport || !this.viewport["_renderedContentOffset"]) {
            return -0;
        }
        /** @type {?} */
        let offset = this.viewport["_renderedContentOffset"];
        return -offset;
    }
    // TO DO
    /**
     * @param {?} cellRef
     * @return {?}
     */
    ellipsis(cellRef) {
        // console.log(cellRef.clientHeight);
        // console.log(cellRef.scrollHeight);
        if (cellRef.clientHeight > this.rowHeight) {
            cellRef.style.maxHeight = '48px';
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    rowStyle(row) {
        var _a;
        /** @type {?} */
        let style = ((_a = row === null || row === void 0 ? void 0 : row.option) === null || _a === void 0 ? void 0 : _a.style) || {};
        if (this.setting.alternativeRowStyle && row.id % 2 === 0) {
            // style is high priority
            style = Object.assign(Object.assign({}, this.setting.alternativeRowStyle), style);
        }
        if (this.setting.rowStyle) {
            style = Object.assign(Object.assign({}, this.setting.rowStyle), style);
        }
        return style;
    }
    /**
     * @param {?} option
     * @param {?} column
     * @return {?}
     */
    cellClass(option, column) {
        /** @type {?} */
        let clas = null;
        if (option && column.name) {
            clas = option[column.name] ? option[column.name].style : null;
        }
        if (clas === null) {
            return column.cellClass;
        }
        else {
            return Object.assign(Object.assign({}, clas), column.cellClass);
        }
    }
    /**
     * @param {?} option
     * @param {?} column
     * @return {?}
     */
    cellStyle(option, column) {
        /** @type {?} */
        let style = null;
        if (option && column.name) {
            style = option[column.name] ? option[column.name].style : null;
        }
        if (style === null) {
            return column.cellStyle;
        }
        else {
            return Object.assign(Object.assign({}, style), column.cellStyle);
        }
    }
    /**
     * @param {?} option
     * @param {?} cellName
     * @return {?}
     */
    cellIcon(option, cellName) {
        if (option && cellName) {
            return option[cellName] ? option[cellName].icon : null;
        }
        else {
            return null;
        }
    }
    /**
     * @param {?} column
     * @param {?} filter
     * @return {?}
     */
    filter_onChanged(column, filter) {
        this.pending = true;
        this.tvsDataSource.setFilter(column.name, filter).subscribe((/**
         * @return {?}
         */
        () => {
            this.pending = false;
        }));
    }
    /**
     * @param {?} event
     * @param {?} column
     * @param {?} row
     * @return {?}
     */
    onContextMenu(event, column, row) {
        var _a, _b;
        if (((_a = this.currentContextMenuSender) === null || _a === void 0 ? void 0 : _a.time) && (new Date().getTime() - this.currentContextMenuSender.time) < 500) {
            return;
        }
        this.contextMenu.closeMenu();
        if (((_b = this.contextMenuItems) === null || _b === void 0 ? void 0 : _b.length) === 0) {
            return;
        }
        event.preventDefault();
        this.contextMenuPosition.x = event.clientX + 'px';
        this.contextMenuPosition.y = event.clientY + 'px';
        this.currentContextMenuSender = { column: column, row: row, time: new Date().getTime() };
        this.contextMenu.menuData = this.currentContextMenuSender;
        this.contextMenu.menu.focusFirstItem('mouse');
        this.onRowEvent.emit({ event: 'BeforContextMenuOpen', sender: { row: row, column: column, contextMenu: this.contextMenuItems } });
        this.contextMenu.openMenu();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    onContextMenuItemClick(data) {
        this.contextMenu.menuData.item = data;
        this.onRowEvent.emit({ event: 'ContextMenuClick', sender: this.contextMenu.menuData });
    }
    /**
     * @param {?} e
     * @return {?}
     */
    tableMenuActionChange(e) {
        if (e.type === 'TableSetting') {
            this.saveSetting(e.data, false);
        }
        else if (e.type === 'FullScreenMode') {
            requestFullscreen(this.tbl.elementRef);
        }
        else if (e.type === 'Download') {
            if (e.data === 'CSV') {
                this.tableService.exportToCsv(this.columns, this.tvsDataSource.filteredData, this.rowSelectionModel);
            }
            else if (e.data === 'JSON') {
                this.tableService.exportToJson(this.tvsDataSource.filteredData);
            }
        }
        else if (e.type === 'FilterClear') {
            this.tvsDataSource.clearFilter();
            this.headerFilterList.forEach((/**
             * @param {?} hf
             * @return {?}
             */
            (hf) => hf.clearColumn_OnClick()));
        }
        else if (e.type === 'Print') {
            this.printConfig.displayedFields = this.columns
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            (c) => isNullorUndefined(c.printable) || c.printable === true))
                .map((/**
             * @param {?} o
             * @return {?}
             */
            (o) => o.name));
            this.printConfig.title = this.printConfig.title || this.tableName;
            this.printConfig.direction = this.tableSetting.direction || 'ltr';
            this.printConfig.columns = this.tableColumns;
            this.printConfig.data = this.tvsDataSource.filteredData;
            /** @type {?} */
            const params = this.tvsDataSource.toTranslate();
            this.printConfig.tablePrintParameters = [];
            params.forEach((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                this.printConfig.tablePrintParameters.push(item);
            }));
            this.dialog.open(PrintTableDialogComponent, {
                width: '90vw',
                data: this.printConfig,
            });
        }
        else if (e.type === 'SaveSetting') {
            this.saveSetting(null, true);
        }
    }
    /**
     * @param {?} contextMenuItem
     * @param {?} row
     * @return {?}
     */
    rowMenuActionChange(contextMenuItem, row) {
        console.log('contextMenuItem');
        this.onRowEvent.emit({ event: 'RowActionMenu', sender: { row: row, action: contextMenuItem } });
        // this.rowActionMenuChange.emit({actionItem: contextMenuItem, rowItem: row });
    }
    /**
     * @param {?} e
     * @return {?}
     */
    doRendering(e) {
        this.pending = false;
        if (this.viewport.getViewportSize() === 0) {
            // console.log('zero');
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    pagination_onChange(e) {
        // console.log(e);
        this.pending = true;
        this.tvsDataSource.refreshFilterPredicate(); // pagination Bugfixed
        this.paginationChange.emit(e);
    }
    /**
     * @return {?}
     */
    reload_onClick() {
        this.onTableEvent.emit({ sender: null, event: 'ReloadData' });
    }
    /////////////////////////////////////////////////////////////////
    /**
     * @param {?} event
     * @param {?} index
     * @param {?} type
     * @return {?}
     */
    onResizeColumn(event, index, type) {
        // console.log(index,type);    
        this.resizeColumn.resizeHandler = type;
        this.resizeColumn.startX = event.pageX;
        // console.log(this.resizeColumn.resizeHandler, this.resizeColumn.startX);
        if (this.resizeColumn.resizeHandler === 'right') {
            this.resizeColumn.startWidth = event.target.parentElement.clientWidth;
            this.resizeColumn.currentResizeIndex = index;
        }
        else {
            if (event.target.parentElement.previousElementSibling === null) {
                // for first column not resize
                return;
            }
            else {
                this.resizeColumn.startWidth =
                    event.target.parentElement.previousElementSibling.clientWidth;
                this.resizeColumn.currentResizeIndex = index;
            }
        }
        event.preventDefault();
        this.mouseMove(index);
    }
    /**
     * @param {?} index
     * @return {?}
     */
    mouseMove(index) {
        this.resizableMousemove = this.renderer.listen('document', 'mousemove', (/**
         * @param {?} event
         * @return {?}
         */
        (event) => {
            if (this.resizeColumn.resizeHandler !== null && event.buttons) {
                /** @type {?} */
                const rtl = this.direction === 'rtl' ? -1 : 1;
                /** @type {?} */
                let width = 0;
                if (this.resizeColumn.resizeHandler === 'right') {
                    /** @type {?} */
                    const dx = event.pageX - this.resizeColumn.startX;
                    width = this.resizeColumn.startWidth + rtl * dx;
                }
                else {
                    /** @type {?} */
                    const dx = this.resizeColumn.startX - event.pageX;
                    width = this.resizeColumn.startWidth - rtl * dx;
                }
                if (this.resizeColumn.currentResizeIndex === index && width > this.minWidth) {
                    this.resizeColumn.widthUpdate.next({
                        i: index - (this.resizeColumn.resizeHandler === 'left' ? 1 : 0),
                        w: width,
                    });
                }
            }
        }));
        this.resizableMouseup = this.renderer.listen('document', 'mouseup', (/**
         * @param {?} event
         * @return {?}
         */
        (event) => {
            if (this.resizeColumn.resizeHandler !== null) {
                this.resizeColumn.resizeHandler = null;
                this.resizeColumn.currentResizeIndex = -1;
            }
        }));
    }
    /**
     * @param {?} rowIndex
     * @param {?=} mode
     * @return {?}
     */
    expandRow(rowIndex, mode = true) {
        if (rowIndex === null || rowIndex === undefined) {
            throw 'Row index is not defined.';
        }
        if (this.expandedElement === this.tvsDataSource.allData[rowIndex]) {
            this.expandedElement.option.expand = mode;
            this.expandedElement = this.expandedElement === this.tvsDataSource.allData[rowIndex] ? null : this.tvsDataSource.allData[rowIndex];
        }
        else {
            if (this.expandedElement && this.expandedElement !== this.tvsDataSource.allData[rowIndex]) {
                this.expandedElement.option.expand = false;
            }
            this.expandedElement = null;
            if (mode === true) {
                // this.viewport.scrollToIndex(rowIndex, 'smooth');      
                // setTimeout( () => {
                //   this.expandedElement = this.expandedElement === this.dataSource.allData[rowIndex] ? null : this.dataSource.allData[rowIndex];    
                //   if (this.expandedElement.option === undefined || this.expandedElement.option === null) {
                //     this.expandedElement.option = { expand: false};
                //   }
                //   this.expandedElement.option.expand = true;
                //   this.refreshGrid();
                // }, 300);
                this.expandedElement = this.expandedElement === this.tvsDataSource.allData[rowIndex] ? null : this.tvsDataSource.allData[rowIndex];
                if (this.expandedElement.option === undefined || this.expandedElement.option === null) {
                    this.expandedElement.option = { expand: false };
                }
                this.expandedElement.option.expand = true;
            }
        }
    }
    /**
     * @param {?} e
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    onRowSelection(e, row, column) {
        if (this.rowSelectionMode && this.rowSelectionMode !== 'none' && column.rowSelectionable !== false) {
            this.onRowSelectionChange(e, row);
        }
    }
    /**
     * @param {?} e
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    onCellClick(e, row, column) {
        this.onRowSelection(e, row, column);
        if (column.clickable !== false) {
            this.onRowEvent.emit({ event: 'CellClick', sender: { row: row, column: column } });
        }
    }
    /**
     * @param {?} e
     * @param {?} row
     * @return {?}
     */
    onRowDblClick(e, row) {
        this.onRowEvent.emit({ event: e, sender: { row: row } });
    }
    /**
     * @param {?} e
     * @param {?} row
     * @return {?}
     */
    onRowClick(e, row) {
        this.onRowEvent.emit({ event: 'RowClick', sender: { row: row } });
    }
    /**
     * ********************************* Drag & Drop Column ******************************************
     * @param {?} event
     * @return {?}
     */
    dragStarted(event) {
        // console.log(event);    
        // debugger  
        // this.dragDropData.dragColumnIndex = event.source.;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    dropListDropped(event) {
        if (event) {
            this.dragDropData.dropColumnIndex = event.currentIndex;
            this.moveColumn(event.previousIndex, event.currentIndex);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    drop(event) {
        moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);
        // updates moved data and table, but not dynamic if more dropzones
        // this.dataSource.data = clonedeep(this.dataSource.data);
    }
    /**
     * *********************************  ******************************************
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    copyProperty(from, to) {
        /** @type {?} */
        const keys = Object.keys(from);
        keys.forEach((/**
         * @param {?} key
         * @return {?}
         */
        key => {
            if (from[key] !== undefined && from[key] === null) {
                to[key] = Array.isArray(from[key]) ? Object.assign([], from[key]) : Object.assign({}, from[key]);
            }
        }));
    }
}
DynamicMatTableComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line: component-selector
                selector: 'dynamic-mat-table',
                template: "<cdk-virtual-scroll-viewport\r\n  #tbl  \r\n  [ngClass]=\"viewportClass\"\r\n  [tvsItemSize]=\"rowHeight || 48\"\r\n  [headerHeight]=\"headerHeight || 56\"\r\n  [footerHeight]=\"headerHeight || 56\"\r\n  [headerEnabled]=\"headerEnable || true\"\r\n  [footerEnabled]=\"footerEnable || false\"\r\n  [ngStyle]=\"{'background-color': backgroundColor || 'white'}\" \r\n  [class.printpreview]=\"printing\"\r\n  (requestRendering)=\"doRendering($event)\">\r\n\r\n  <mat-table\r\n    matSort \r\n    class=\"table\"    \r\n    multiTemplateDataRows\r\n    [cdkDropListDisabled]=\"false\"    \r\n    cdkDropList \r\n    cdkDropListOrientation=\"horizontal\"    \r\n    (cdkDragStarted)=\"dragStarted($event)\"\r\n    (cdkDropListDropped)=\"dropListDropped($event)\"        \r\n    [trackBy]=\"indexTrackFn\"\r\n    [dataSource]=\"tvsDataSource\">\r\n    <!-- Checkbox Column -->\r\n    <ng-container matColumnDef=\"row-checkbox\">      \r\n        <mat-header-cell *matHeaderCellDef class=\"row-checkbox\" style=\"z-index: 2;\">\r\n          <mat-checkbox style=\"z-index: 10;\"\r\n            (change)=\"$event ? masterToggle() : null\"\r\n            [checked]=\"rowSelectionModel.hasValue() && isAllSelected()\"\r\n            [indeterminate]=\"rowSelectionModel.hasValue() && !isAllSelected()\"         \r\n            *ngIf=\"rowSelectionMode === 'multi'\">\r\n          </mat-checkbox>\r\n          <mat-icon *ngIf=\"rowSelectionMode === 'single'\">indeterminate_check_box</mat-icon>\r\n        </mat-header-cell>\r\n        <ng-container>\r\n          <mat-cell *matCellDef=\"let row\" class=\"row-checkbox\">\r\n            <mat-checkbox\r\n              (click)=\"$event.stopPropagation()\"\r\n              (change)=\"onRowSelectionChange($event, row)\"\r\n              [checked]=\"rowSelectionModel?.isSelected(row)\">\r\n            </mat-checkbox>\r\n          </mat-cell>\r\n        </ng-container>\r\n    </ng-container> \r\n    <!-- Table Columns -->\r\n    <ng-container *ngFor=\"let column of columns; let i = index; trackBy: trackColumn\" [matColumnDef]=\"column.name\"\r\n      [sticky]=\"column.sticky === 'start' ? true : false\" [stickyEnd]=\"column.sticky === 'end' ? true : false\">      \r\n      <!-- ************************** Table Header ************************* -->      \r\n        <mat-header-cell *matHeaderCellDef                \r\n          cdkDrag \r\n          [cdkDragDisabled]=\"column?.draggable === false\"\r\n          cdkDragBoundary=\"mat-header-row\"\r\n          cdkDropListLockAxis=\"x\"        \r\n          [cdkDragData]=\"{name: column.name, columIndex: i}\"        \r\n          [style.maxWidth.px]=\"column.width\"\r\n          [style.minWidth.px]=\"column.width\"        \r\n          [class.active-resize]=\"resizeColumn.currentResizeIndex===i\" cdkDragBoundary=\"mat-header-row\">\r\n          <div class=\"left-resizer-handler\" (mousedown)=\"onResizeColumn($event, i, 'left')\"></div>\r\n          <header-filter [field]=\"column\" (filterChanged)=\"filter_onChanged(column, $event)\" [filters]=\"tvsDataSource.getFilter(column.name)\">\r\n            <mat-icon class=\"column-icon\" [ngStyle]=\"{ 'color': column?.iconColor }\">{{column?.icon}}</mat-icon>          \r\n            <mat-icon *ngIf=\"column?.draggable != false\" class=\"drag-indicator\" cdkDragHandle>drag_indicator</mat-icon>\r\n            <div mat-sort-header [matTooltip]=\"column.header\" matTooltipClass=\"cell-tooltip\" [disabled]=\"column.sortable === false\" class=\"header-caption\">{{ column.header }}</div>\r\n          </header-filter> \r\n          <div\r\n            class=\"right-resizer-handler\"\r\n            (mousedown)=\"onResizeColumn($event, i, 'right')\"\r\n          ></div>\r\n        </mat-header-cell>           \r\n      <!-- ************************** Table Cell ************************* -->\r\n      \r\n      <mat-cell *matCellDef=\"let row;\"                    \r\n                [style.maxWidth.px]=\"column.width\"\r\n                [style.minWidth.px]=\"column.width\"\r\n                [class]=\"row[column.cellClass]\"\r\n                (click)=\"onCellClick($event, row, column)\"                  \r\n                [ngClass]=\"cellClass(row?.option, column)\"\r\n                [ngStyle]=\"cellStyle(row?.option, column)\"\r\n                (contextmenu)=\"onContextMenu($event, column, row)\">          \r\n        <label *ngIf=\"!column.dynamicCellComponent\" [class.rtl-cell]=\"direction === 'rtl'\" [class.ltr-cell]=\"direction === 'ltr'\">{{row[column.name]}}</label>          \r\n        <ng-container *ngIf=\"column.dynamicCellComponent\" dynamicCell [component]=\"column.dynamicCellComponent\" [column]=\"column\" [row]=\"row\" [onRowEvent]=\"onRowEvent\">\r\n        </ng-container> \r\n      </mat-cell>\r\n    </ng-container> \r\n\r\n    <ng-container matColumnDef=\"progress\" > \r\n      <mat-header-cell\r\n        *matHeaderCellDef\r\n        [attr.colspan]=\"displayedColumns.length\">\r\n        <mat-progress-bar mode=\"indeterminate\" [class.show]=\"pending\">\r\n        </mat-progress-bar>\r\n      </mat-header-cell>\r\n    </ng-container>\r\n\r\n    <!-- Expanded Content Column - The detail row is made up of Dynamic Cell -->\r\n    <ng-container *ngIf=\"expandColumn.length > 0\" matColumnDef=\"expandedDetail\">\r\n      <td mat-cell *matCellDef=\"let row\" [attr.colspan]=\"displayedColumns.length\" class=\"expanded-detail-cell\">\r\n        <div class=\"expanded-detail\" [@detailExpand]=\"row == expandedElement ? 'expanded' : 'collapsed'\">\r\n          <ng-container dynamicCell [component]=\"expandComponent\" [row]=\"row\" [onRowEvent]=\"onRowEvent\">\r\n          </ng-container> \r\n        </div>\r\n      </td>\r\n    </ng-container>\r\n    <!-- Table Menu[ Sort, Visible, Export] -->\r\n    <ng-container matColumnDef=\"table-menu\" [stickyEnd]=\"true\" *ngIf=\"setting?.visibleTableMenu !== false\">\r\n      <mat-header-cell *matHeaderCellDef class=\"table-menu\">\r\n        <table-menu\r\n          [tableSetting]=\"tableSetting\"\r\n          (menuActionChange)=\"tableMenuActionChange($event)\"\r\n        ></table-menu> \r\n      </mat-header-cell>\r\n      <mat-cell *matCellDef=\"let row\" class=\"table-menu\">\r\n        <row-menu *ngIf=\"rowContextMenuItems && rowContextMenuItems.length > 0\" [rowActionMenu]=\"row?.actionMenu\" [actionMenus]=\"rowContextMenuItems\" [tableSetting]=\"tableSetting\" (rowActionChange)=\"rowMenuActionChange($event, row)\"></row-menu>\r\n      </mat-cell>\r\n    </ng-container>\r\n    <!-- Row Table[Header, Data, Footer] -->    \r\n    <mat-row \r\n      *matRowDef=\"let row; columns: displayedColumns;\"      \r\n      (dblclick)=\"onRowDblClick($event, row)\"\r\n      (click)=\"onRowClick($event, row)\"\r\n      [style.height.px]=\"rowHeight\"\r\n      class=\"table-row\" \r\n      [ngClass]=\"row?.option?.class\"\r\n      [ngStyle]=\"rowStyle(row)\"      \r\n      [class.expanded-row]=\"expandedElement === row\"\r\n      [class.row-selection]=\"rowSelectionModel ? rowSelectionModel.isSelected(row) : false\"\r\n      (contextmenu)=\"onContextMenu($event, null, row)\">\r\n    </mat-row>\r\n    <ng-container *ngIf=\"expandColumn.length > 0\">      \r\n      <tr mat-row *matRowDef=\"let expandRow; columns: expandColumn\" class=\"detail-row\"></tr>\r\n    </ng-container>    \r\n    <mat-header-row class=\"header\" [@tableAnimation] *matHeaderRowDef=\"displayedColumns; sticky: sticky\" [style.top.px]=\"inverseOfTranslation\"></mat-header-row >\r\n    <mat-header-row class=\"progress\" *matHeaderRowDef=\"progressColumn; sticky: sticky\" [style.top.px]=\"inverseOfTranslation + headerHeight - 5\" ></mat-header-row>\r\n  </mat-table> \r\n</cdk-virtual-scroll-viewport>\r\n<mat-paginator\r\n  *ngIf=\"pagingMode !== 'none'\"\r\n  class=\"table-paginator\"\r\n  [length]=\"pagination?.length\"\r\n  [pageSize]=\"pagination?.pageSize\"\r\n  [pageIndex]=\"pagination?.pageIndex\"\r\n  (page)=\"pagination_onChange($event)\"\r\n  [pageSizeOptions]=\"pagination?.pageSizeOptions\">\r\n</mat-paginator>\r\n<ng-content></ng-content>\r\n \r\n<div class=\"no-records\" *ngIf=\"showNoData === true && (!tvsDataSource || tvsDataSource.data.length === 0)\">\r\n  <!-- <mat-icon>web</mat-icon>  -->\r\n  {{ languagePack?.tableLabels.NoData }}  \r\n  <br>\r\n  <button *ngIf=\"showReload\" mat-icon-button color=\"primary\" (click)=\"reload_onClick()\"><mat-icon>autorenew</mat-icon></button>\r\n</div>\r\n\r\n<!-- Context Menu -->\r\n<div style=\"visibility: hidden; position: fixed\"  \r\n  [style.left]=\"contextMenuPosition.x\"\r\n  [style.top]=\"contextMenuPosition.y\"\r\n  [matMenuTriggerFor]=\"contextMenu\">\r\n</div>\r\n<mat-menu #contextMenu=\"matMenu\">\r\n\t<ng-template matMenuContent let-item=\"item\">\t\t\r\n    <ng-container *ngFor=\"let menu of contextMenuItems\">\r\n      <button mat-button [class.ltr-menu]=\"tableSetting.direction === 'rtl'\" [color]=\"menu.color\" class=\"button-menu\" \r\n        [disabled]=\"menu.disabled\" (click)=\"onContextMenuItemClick(menu)\">\r\n         <mat-icon>{{menu.icon}}</mat-icon>\r\n        <span [class.text-align-right]=\"tableSetting.direction === 'rtl'\" class=\"text-align-left\">{{menu.text}}</span>\r\n      </button>\r\n      <mat-divider *ngIf=\"menu.divider === true\"></mat-divider>\r\n    </ng-container>    \r\n\t</ng-template>\r\n</mat-menu>",
                animations: [tableAnimation, expandAnimation],
                // changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    { provide: MAT_TOOLTIP_DEFAULT_OPTIONS, useValue: cellTooltipDefaults }
                ],
                styles: ["@media print{.printpreview{background-color:#fff;position:fixed;width:100%;height:auto;z-index:99999999;margin:0;padding:0;top:0;left:0;overflow:visible;display:block}}.disable-backdrop-click .cdk-overlay-backdrop.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{pointer-events:none}:host{display:flex;flex-direction:column;table-layout:fixed;min-height:200px;position:relative;overflow:auto;transition:.3s cubic-bezier(.46,-.72,.46,1.54);background-color:#f3f3f3;border:2px #009688}mat-cell:first-of-type,mat-footer-cell:first-of-type,mat-header-cell:first-of-type:not(.row-checkbox){padding-left:0!important}.rtl-cell{padding-right:20px}.ltr-cell{padding-left:20px}.viewport{height:calc(100% - 0px)}.viewport-with-pagination{height:calc(100% - 48px)}.table-paginator{position:sticky;bottom:0;display:flex;max-height:48px;align-items:center;overflow:hidden;direction:ltr}mat-footer-row,mat-row{min-height:auto!important}mat-footer-row,mat-row,tr.mat-header-row{display:flex;border-width:0 0 1px;border-bottom-color:#d2d2d2;border-style:solid;align-items:center;box-sizing:border-box}mat-cell,mat-footer-cell,mat-header-cell{align-self:stretch;color:inherit;background-color:inherit}.mat-table .row-selection{background-color:#f7f5f5}.mat-table .mat-row:hover{background-color:#fafafa}.mat-header-row.progress{border:none;max-height:4px;min-height:4px;height:0;margin-top:-4px;background-color:transparent}.mat-header-row.progress .mat-header-cell{border:0;padding:0}.mat-header-row.progress mat-progress-bar{transition:height .3s,opacity .25s linear}.mat-header-row.progress mat-progress-bar:not(.show){height:0;opacity:0}.no-records{display:flex;align-items:center;top:50%;left:50%;margin:-42px 0 0 -25px;line-height:42px;position:absolute;z-index:1;pointer-events:none}.no-records button{pointer-events:initial}::ng-deep .dmf{min-width:100%}::ng-deep dynamic-mat-table cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper .mat-table mat-row .mat-cell mat-form-field{max-width:100%}::ng-deep dynamic-mat-table cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper .mat-table mat-row .mat-cell mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}::ng-deep dynamic-mat-table cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper .mat-table mat-row .mat-cell mat-form-field ::ng-deep .mat-form-field-underline{bottom:0!important}.ltr-menu span{float:left}.button-menu{width:100%;line-height:48px}.button-menu::ng-deep .mat-button-wrapper{display:flex}.button-menu::ng-deep .mat-button-wrapper span{display:inline-block;width:100%;text-align:left}.button-menu::ng-deep .mat-button-wrapper mat-icon{line-height:48px;height:48px;margin:0 5px}mat-button-wrapper .button-menu{display:inline-block!important}.text-align-left{text-align:left!important}.text-align-right{text-align:right!important}.mat-menu-panel{min-height:unset!important}cdk-virtual-scroll-viewport{min-height:100px;height:inherit;overflow:auto}.header-caption{font-weight:bolder;font-size:14px}.header{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff}.row-checkbox{display:contents}.row-checkbox mat-checkbox{padding:15px}.row-checkbox mat-icon{padding:15px!important}.table-menu{max-width:42px;min-width:initial;padding:0!important;background-color:inherit}:host .mat-header-row>.mat-header-cell:hover .column-icon{opacity:0;transform:translateY(5px);transition:.2s}mat-header-cell:hover .left-resizer-handler,mat-header-cell:hover .right-resizer-handler{height:calc(100% - 10px);transition:height .2s ease-out}.left-resizer-handler{display:inline-block;min-width:3px;height:0;border:solid #d2d2d2;position:sticky;cursor:col-resize;border-width:0 0 0 1px;left:0}.right-resizer-handler{display:inline-block;min-width:3px;height:0;border:solid #d2d2d2;position:sticky;cursor:col-resize;border-width:0 1px 0 0;right:0}.active-resize{background-color:#f5f5f566}.drag-indicator{position:absolute;color:rgba(0,0,0,.3);display:flex;opacity:0;transform:translateY(-5px);transition-duration:.4s;transition-property:opacity,transform;cursor:move}:host .mat-header-row>.mat-header-cell:hover .drag-indicator{opacity:1;pointer-events:fill;transform:translateY(0)}.drag-indicator:hover{color:#bfc0c0!important}.cdk-drag-preview{color:#000;min-height:55px;border:1px solid #d4d4d4;background-color:#f5f5f5;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{border:1px dotted #9c9c9c;background-color:#d3d3d3;content:none}.cdk-drag-animating,.cdk-drop-list-dragging{transition:transform 250ms cubic-bezier(0,0,.2,1)}.detail-row{height:0;display:inline!important;width:100%}.table-row:not(.expanded-row):hover{background:#f5f5f5}.table-row:not(.expanded-row):active{background:#efefef}.table-row mat-cell{border-bottom-width:0}.expanded-detail{overflow:hidden;display:flex;background-color:#fafafa}.expanded-detail-cell{display:block;border-width:0;padding:0!important;width:100%;z-index:2}::ng-deep .cell-tooltip{padding:8px;font-size:12px;min-width:100px;text-align:center;margin-right:-20px}"]
            }] }
];
/** @nocollapse */
DynamicMatTableComponent.ctorParameters = () => [
    { type: MatDialog },
    { type: Renderer2 },
    { type: TableIntl },
    { type: TableService },
    { type: ChangeDetectorRef },
    { type: OverlayContainer }
];
DynamicMatTableComponent.propDecorators = {
    tbl: [{ type: ViewChild, args: ['tbl', { static: true },] }],
    setting: [{ type: Input }],
    contextMenu: [{ type: ViewChild, args: [MatMenuTrigger,] }],
    printRef: [{ type: ViewChild, args: ['printRef', { static: true },] }],
    printContentRef: [{ type: ViewChild, args: ['printContentRef', { static: true },] }],
    headerFilterList: [{ type: ContentChildren, args: [HeaderFilterComponent,] }]
};
if (false) {
    /** @type {?} */
    DynamicMatTableComponent.prototype.tbl;
    /** @type {?} */
    DynamicMatTableComponent.prototype.contextMenu;
    /** @type {?} */
    DynamicMatTableComponent.prototype.contextMenuPosition;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printRef;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printContentRef;
    /** @type {?} */
    DynamicMatTableComponent.prototype.headerFilterList;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.dragDropData;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.eventsSubscription;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printing;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printTemplate;
    /** @type {?} */
    DynamicMatTableComponent.prototype.resizeColumn;
    /** @type {?} */
    DynamicMatTableComponent.prototype.resizableMousemove;
    /** @type {?} */
    DynamicMatTableComponent.prototype.resizableMouseup;
    /** @type {?} */
    DynamicMatTableComponent.prototype.indexTrackFn;
    /** @type {?} */
    DynamicMatTableComponent.prototype.currentContextMenuSender;
    /** @type {?} */
    DynamicMatTableComponent.prototype.dialog;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.renderer;
    /** @type {?} */
    DynamicMatTableComponent.prototype.languagePack;
    /** @type {?} */
    DynamicMatTableComponent.prototype.tableService;
    /** @type {?} */
    DynamicMatTableComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.overlayContainer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1tYXQtdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vZHluYW1pYy1tYXQtdGFibGUvIiwic291cmNlcyI6WyJsaWIvZHluYW1pYy1tYXQtdGFibGUvZHluYW1pYy1tYXQtdGFibGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFDVCxTQUFTLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUEyQixpQkFBaUIsRUFBRSxLQUFLLEVBQWEsZUFBZSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3ZLLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ25FLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUszRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUNwRixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDckQsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDN0YsT0FBTyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFeEQsT0FBTyxFQUE2QixlQUFlLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNwRixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFbEQsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBR3ZDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUV4RCxP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RUFBRSxJQUFJLEVBQUU7K0JBQzdDLGVBQWUsU0FBQyxxQkFBcUI7Ozs7SUF2QnRDLHVDQUFzQzs7SUFtQnRDLCtDQUF1RDs7SUFDdkQsdURBQW9EOztJQUNwRCw0Q0FBc0U7O0lBQ3RFLG1EQUE4RTs7SUFDOUUsb0RBQTZGOzs7OztJQUM3RixnREFBa0U7Ozs7O0lBQ2xFLHNEQUF5Qzs7SUFDekMsNENBQWdCOztJQUNoQixpREFBdUM7O0lBQ3ZDLGdEQUFnRDs7SUFFaEQsc0RBQStCOztJQUMvQixvREFBNkI7O0lBd0I3QixnREFFRTs7SUFnSUYsNERBQW1DOztJQXZKakMsMENBQXdCOzs7OztJQUN4Qiw0Q0FBMkI7O0lBQzNCLGdEQUE4Qjs7SUFDOUIsZ0RBQWlDOztJQUNqQyx1Q0FBNkI7Ozs7O0lBQzdCLG9EQUEwQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBBZnRlclZpZXdJbml0LFxyXG4gICAgICAgICBRdWVyeUxpc3QsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgVGVtcGxhdGVSZWYsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBJbnB1dCwgT25EZXN0cm95LCBDb250ZW50Q2hpbGRyZW59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBUYWJsZUNvcmVEaXJlY3RpdmUgfSBmcm9tICcuLi9jb3Jlcy90YWJsZS5jb3JlLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IFRhYmxlU2VydmljZSB9IGZyb20gJy4vZHluYW1pYy1tYXQtdGFibGUuc2VydmljZSc7XHJcbmltcG9ydCB7IFRhYmxlUm93IH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLXJvdy5tb2RlbCc7XHJcbmltcG9ydCB7IFRhYmxlRmllbGQgfSBmcm9tICcuLi9tb2RlbHMvdGFibGUtZmllbGQubW9kZWwnO1xyXG5pbXBvcnQgeyBBYnN0cmFjdEZpbHRlciB9IGZyb20gJy4vZXh0ZW5zaW9ucy9maWx0ZXIvY29tcGFyZS9hYnN0cmFjdC1maWx0ZXInO1xyXG5pbXBvcnQgeyBUYWJsZVBhZ2luYXRpb24gfSBmcm9tICcuLi9tb2RlbHMvdGFibGUtcGFnaW5hdGlvbi5tb2RlbCc7XHJcbmltcG9ydCB7IEhlYWRlckZpbHRlckNvbXBvbmVudCB9IGZyb20gJy4vZXh0ZW5zaW9ucy9maWx0ZXIvaGVhZGVyLWZpbHRlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xyXG5pbXBvcnQgeyBQcmludFRhYmxlRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi9leHRlbnNpb25zL3ByaW50LWRpYWxvZy9wcmludC1kaWFsb2cuY29tcG9uZW50JztcclxuaW1wb3J0IHsgdHJpZ2dlciwgdHJhbnNpdGlvbiwgc3R5bGUsIGFuaW1hdGUsIHF1ZXJ5LCBzdGFnZ2VyLCBzdGF0ZSB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xyXG5pbXBvcnQgeyBSZXNpemVDb2x1bW4gfSBmcm9tICcuLi9tb2RlbHMvcmVzaXplLWNvbHVtbi5tb2RlJztcclxuaW1wb3J0IHsgVGFibGVJbnRsIH0gZnJvbSAnLi4vaW50ZXJuYXRpb25hbC90YWJsZS1JbnRsJztcclxuaW1wb3J0IHsgVGFibGVNZW51QWN0aW9uQ2hhbmdlIH0gZnJvbSAnLi9leHRlbnNpb25zL3RhYmxlLW1lbnUvdGFibGUtbWVudS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDZGtEcmFnRHJvcCwgQ2RrRHJhZ1N0YXJ0LCBtb3ZlSXRlbUluQXJyYXkgfSBmcm9tICdAYW5ndWxhci9jZGsvZHJhZy1kcm9wJztcclxuaW1wb3J0IHsgaXNOdWxsb3JVbmRlZmluZWQgfSBmcm9tICcuLi9jb3Jlcy90eXBlJztcclxuaW1wb3J0IHsgVGFibGVTZXR0aW5nIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLXNldHRpbmcubW9kZWwnO1xyXG5pbXBvcnQgeyBkZWxheSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgRml4ZWRTaXplVGFibGVWaXJ0dWFsU2Nyb2xsU3RyYXRlZ3kgfSBmcm9tICcuLi9jb3Jlcy9maXhlZC1zaXplLXRhYmxlLXZpcnR1YWwtc2Nyb2xsLXN0cmF0ZWd5JztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IE1hdE1lbnVUcmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvbWVudSc7XHJcbmltcG9ydCB7IENvbnRleHRNZW51SXRlbSB9IGZyb20gJy4uL21vZGVscy9jb250ZXh0LW1lbnUubW9kZWwnO1xyXG5pbXBvcnQgeyBPdmVybGF5Q29udGFpbmVyIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL292ZXJsYXknO1xyXG5pbXBvcnQgeyBNYXRUb29sdGlwRGVmYXVsdE9wdGlvbnMsIE1BVF9UT09MVElQX0RFRkFVTFRfT1BUSU9OUyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3Rvb2x0aXAnO1xyXG5pbXBvcnQgeyByZXF1ZXN0RnVsbHNjcmVlbiB9IGZyb20gJy4uL3V0aWxpZXMvaHRtbC5oZWxwZXInO1xyXG5pbXBvcnQgeyBUYWJsZVZpcnR1YWxTY3JvbGxEYXRhU291cmNlIH0gZnJvbSAnLi4vY29yZXMvdGFibGUtZGF0YS1zb3VyY2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRhYmxlQW5pbWF0aW9uID0gdHJpZ2dlcigndGFibGVBbmltYXRpb24nLCBbXHJcbiAgdHJhbnNpdGlvbigndm9pZCA9PiAqJywgW1xyXG4gICAgcXVlcnkoJzplbnRlcicsIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtNTAlKScsIG9wYWNpdHk6IDAgfSksIHtcclxuICAgICAgLy9saW1pdDogNSxcclxuICAgICAgb3B0aW9uYWw6IHRydWUsXHJcbiAgICB9KSxcclxuICAgIHF1ZXJ5KCc6ZW50ZXInLFxyXG4gICAgICBzdGFnZ2VyKCcwLjAxcycsIFtcclxuICAgICAgICBhbmltYXRlKCcwLjVzIGVhc2UnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMCUpJywgb3BhY2l0eTogMSB9KVxyXG4gICAgICAgICksXHJcbiAgICAgIF0pLFxyXG4gICAgICB7ICBcclxuICAgICAgICAvL2xpbWl0OiA1LCBcclxuICAgICAgICBvcHRpb25hbDogdHJ1ZSB9XHJcbiAgICApLFxyXG4gIF0pLFxyXG5dKTtcclxuXHJcbmV4cG9ydCBjb25zdCBleHBhbmRBbmltYXRpb24gPSB0cmlnZ2VyKCdkZXRhaWxFeHBhbmQnLCBbXHJcbiAgc3RhdGUoJ2NvbGxhcHNlZCcsIHN0eWxlKHtoZWlnaHQ6ICcwcHgnLCBtaW5IZWlnaHQ6ICcwJ30pKSxcclxuICBzdGF0ZSgnZXhwYW5kZWQnLCBzdHlsZSh7aGVpZ2h0OiAnKid9KSksXHJcbiAgdHJhbnNpdGlvbignZXhwYW5kZWQgPD0+IGNvbGxhcHNlZCcsIGFuaW1hdGUoJzEwMG1zIGN1YmljLWJlemllcigwLjQsIDAuMCwgMC4yLCAxKScpKSxcclxuXSk7IFxyXG4gXHJcbmV4cG9ydCBjb25zdCBjZWxsVG9vbHRpcERlZmF1bHRzOiBNYXRUb29sdGlwRGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgc2hvd0RlbGF5OiA1MDAsXHJcbiAgaGlkZURlbGF5OiA0MDAsXHJcbiAgdG91Y2hlbmRIaWRlRGVsYXk6IDEwMDAsXHJcbiAgcG9zaXRpb246ICdhYm92ZScsXHJcbn07XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGNvbXBvbmVudC1zZWxlY3RvclxyXG4gIHNlbGVjdG9yOiAnZHluYW1pYy1tYXQtdGFibGUnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9keW5hbWljLW1hdC10YWJsZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vZHluYW1pYy1tYXQtdGFibGUuY29tcG9uZW50LnNjc3MnXSxcclxuICBhbmltYXRpb25zOiBbdGFibGVBbmltYXRpb24sIGV4cGFuZEFuaW1hdGlvbl0sIFxyXG4gIC8vIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAge3Byb3ZpZGU6IE1BVF9UT09MVElQX0RFRkFVTFRfT1BUSU9OUywgdXNlVmFsdWU6IGNlbGxUb29sdGlwRGVmYXVsdHN9XHJcbiAgXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIER5bmFtaWNNYXRUYWJsZUNvbXBvbmVudDxUIGV4dGVuZHMgVGFibGVSb3c+IGV4dGVuZHMgVGFibGVDb3JlRGlyZWN0aXZlPFQ+IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG4gIEBWaWV3Q2hpbGQoJ3RibCcsIHtzdGF0aWM6IHRydWV9KSB0Ymw7IFxyXG4gIEBJbnB1dCgpXHJcbiAgZ2V0IHNldHRpbmcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50YWJsZVNldHRpbmc7XHJcbiAgfSBcclxuICBzZXQgc2V0dGluZyh2YWx1ZTogVGFibGVTZXR0aW5nKSB7ICAgIFxyXG4gICAgaWYgKCAhaXNOdWxsb3JVbmRlZmluZWQodmFsdWUpICkge1xyXG4gICAgICB2YWx1ZS5jb2x1bW5TZXR0aW5nID0gdmFsdWUuY29sdW1uU2V0dGluZyB8fCB0aGlzLnRhYmxlU2V0dGluZy5jb2x1bW5TZXR0aW5nO1xyXG4gICAgICB2YWx1ZS5hbHRlcm5hdGl2ZVJvd1N0eWxlID0gdmFsdWUuYWx0ZXJuYXRpdmVSb3dTdHlsZSB8fCB0aGlzLnRhYmxlU2V0dGluZy5hbHRlcm5hdGl2ZVJvd1N0eWxlO1xyXG4gICAgICB2YWx1ZS5jb2x1bW5TZXR0aW5nID0gdmFsdWUuY29sdW1uU2V0dGluZyB8fCB0aGlzLnRhYmxlU2V0dGluZy5jb2x1bW5TZXR0aW5nO1xyXG4gICAgICB2YWx1ZS5kaXJlY3Rpb24gPSB2YWx1ZS5kaXJlY3Rpb24gfHwgdGhpcy50YWJsZVNldHRpbmcuZGlyZWN0aW9uO1xyXG4gICAgICB2YWx1ZS5ub3JtYWxSb3dTdHlsZSA9IHZhbHVlLm5vcm1hbFJvd1N0eWxlIHx8IHRoaXMudGFibGVTZXR0aW5nLm5vcm1hbFJvd1N0eWxlOyAgICAgIFxyXG4gICAgICB2YWx1ZS52aXNpYmFsZUFjdGlvbk1lbnUgPSB2YWx1ZS52aXNpYmFsZUFjdGlvbk1lbnUgfHwgdGhpcy50YWJsZVNldHRpbmcudmlzaWJhbGVBY3Rpb25NZW51O1xyXG4gICAgICB2YWx1ZS52aXNpYmxlVGFibGVNZW51ID0gdmFsdWUudmlzaWJsZVRhYmxlTWVudSB8fCB0aGlzLnRhYmxlU2V0dGluZy52aXNpYmxlVGFibGVNZW51O1xyXG4gICAgICB0aGlzLnRhYmxlU2V0dGluZyA9IHZhbHVlO1xyXG4gICAgICB0aGlzLnNldERpc3BsYXllZENvbHVtbnMoKTtcclxuICAgIH1cclxuICB9IFxyXG5cclxuICBAVmlld0NoaWxkKE1hdE1lbnVUcmlnZ2VyKSBjb250ZXh0TWVudTogTWF0TWVudVRyaWdnZXI7XHJcbiAgcHVibGljIGNvbnRleHRNZW51UG9zaXRpb24gPSB7IHg6ICcwcHgnLCB5OiAnMHB4JyB9OyAgXHJcbiAgQFZpZXdDaGlsZCgncHJpbnRSZWYnLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcmludFJlZiAhOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBWaWV3Q2hpbGQoJ3ByaW50Q29udGVudFJlZicsIHsgc3RhdGljOiB0cnVlIH0pIHByaW50Q29udGVudFJlZiAhOiBFbGVtZW50UmVmO1xyXG4gIEBDb250ZW50Q2hpbGRyZW4oSGVhZGVyRmlsdGVyQ29tcG9uZW50KSBoZWFkZXJGaWx0ZXJMaXN0ICE6IFF1ZXJ5TGlzdDxIZWFkZXJGaWx0ZXJDb21wb25lbnQ+OyAgXHJcbiAgcHJpdmF0ZSBkcmFnRHJvcERhdGEgPSB7ZHJhZ0NvbHVtbkluZGV4OiAtMSwgZHJvcENvbHVtbkluZGV4OiAtMX07XHJcbiAgcHJpdmF0ZSBldmVudHNTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICBwcmludGluZyA9IHRydWU7XHJcbiAgcHJpbnRUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PiA9IG51bGw7XHJcbiAgcmVzaXplQ29sdW1uOiBSZXNpemVDb2x1bW4gPSBuZXcgUmVzaXplQ29sdW1uKCk7XHJcbiAgLy8gbW91c2UgcmVzaXplXHJcbiAgcmVzaXphYmxlTW91c2Vtb3ZlOiAoKSA9PiB2b2lkO1xyXG4gIHJlc2l6YWJsZU1vdXNldXA6ICgpID0+IHZvaWQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIGRpYWxvZzogTWF0RGlhbG9nLFxyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgcHVibGljIGxhbmd1YWdlUGFjazogVGFibGVJbnRsLFxyXG4gICAgcHVibGljIHRhYmxlU2VydmljZTogVGFibGVTZXJ2aWNlLFxyXG4gICAgcHVibGljIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwcml2YXRlIG92ZXJsYXlDb250YWluZXI6IE92ZXJsYXlDb250YWluZXJcclxuICApIHtcclxuICAgIHN1cGVyKHRhYmxlU2VydmljZSwgY2RyKTsgXHJcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXIuZ2V0Q29udGFpbmVyRWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+e1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7IHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGlzLmV2ZW50c1N1YnNjcmlwdGlvbiA9IHRoaXMucmVzaXplQ29sdW1uLndpZHRoVXBkYXRlLnBpcGUoZGVsYXkoMTAwKSkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuY29sdW1uc1tkYXRhLmldLndpZHRoID0gZGF0YS53O1xyXG4gICAgICBpZiAodGhpcy50YWJsZVNldHRpbmcuY29sdW1uU2V0dGluZ1tkYXRhLmldKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZVNldHRpbmcuY29sdW1uU2V0dGluZ1tkYXRhLmldLndpZHRoID0gZGF0YS53O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVmcmVzaEdyaWQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaW5kZXhUcmFja0ZuID0gKGluZGV4OiBudW1iZXIpID0+IHsgICAgXHJcbiAgICByZXR1cm4gaW5kZXg7XHJcbiAgfTtcclxuXHJcbiAgdHJhY2tDb2x1bW4oaW5kZXg6IG51bWJlciwgaXRlbTogVGFibGVGaWVsZDxUPik6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7aXRlbS5pbmRleH1gO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7ICAgIFxyXG4gICAgaWYgKHRoaXMuZXZlbnRzU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVmcmVzaFVJKCkge1xyXG4gICAgY29uc3Qgc2Nyb2xsU3RyYXRlZ3k6IEZpeGVkU2l6ZVRhYmxlVmlydHVhbFNjcm9sbFN0cmF0ZWd5ID0gdGhpcy52aWV3cG9ydFsnX3Njcm9sbFN0cmF0ZWd5J107ICAgICAgICBcclxuICAgIHNjcm9sbFN0cmF0ZWd5Py52aWV3cG9ydD8uY2hlY2tWaWV3cG9ydFNpemUoKTtcclxuICAgIHNjcm9sbFN0cmF0ZWd5Py52aWV3cG9ydD8uc2Nyb2xsVG9PZmZzZXQoMCk7ICAgIFxyXG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7ICAgIFxyXG4gICAgY29uc3Qgc2Nyb2xsU3RyYXRlZ3k6IEZpeGVkU2l6ZVRhYmxlVmlydHVhbFNjcm9sbFN0cmF0ZWd5ID0gdGhpcy52aWV3cG9ydFsnX3Njcm9sbFN0cmF0ZWd5J107XHJcblxyXG4gICAgc2Nyb2xsU3RyYXRlZ3kub2Zmc2V0Q2hhbmdlLnN1YnNjcmliZShvZmZzZXQgPT4geyAgICAgIFxyXG4gICAgICAvLyBjb25zb2xlLmxvZyhvZmZzZXQpO1xyXG4gICAgfSlcclxuICAgIHRoaXMudmlld3BvcnQucmVuZGVyZWRSYW5nZVN0cmVhbS5zdWJzY3JpYmUoIHQgPT4ge1xyXG4gICAgICAvLyBpbiBleHBhbmRpbmcgcm93IHNjcm9sbGluZyBtYWtlIG5vdCBnb29kIGFwcGVyYW5jZSB0aGVyZWZvciBjbG9zZSBpdC5cclxuICAgICAgaWYgKHRoaXMuZXhwYW5kZWRFbGVtZW50ICYmIHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbiAmJiB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24uZXhwYW5kKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NsZWFyJywgdCk7IFxyXG4gICAgICAgIC8vIHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbi5leHBhbmQgPSBmYWxzZTtcclxuICAgICAgICAvLyB0aGlzLmV4cGFuZGVkRWxlbWVudCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnR2c0RhdGFTb3VyY2UucGFnaW5hdG9yID0gdGhpcy5wYWdpbmF0b3I7XHJcbiAgICB0aGlzLnR2c0RhdGFTb3VyY2Uuc29ydCA9IHRoaXMuc29ydDsgICAgXHJcbiAgICB0aGlzLmRhdGFTb3VyY2Uuc3Vic2NyaWJlKHggPT4ge1xyXG4gICAgICAvL2NvbnNvbGUubG9nKHgpOyAgICAgIFxyXG4gICAgICB0aGlzLmluaXRTeXN0ZW1GaWVsZCh4KTtcclxuICAgICAgdGhpcy50dnNEYXRhU291cmNlLmRhdGEgPSB4O1xyXG4gICAgICAvLyB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT57XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVUkoKTtcclxuICAgICAgfSwgMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnR2c0RhdGFTb3VyY2Uuc29ydC5zb3J0Q2hhbmdlLnN1YnNjcmliZShzb3J0ID0+IHtcclxuICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2VJbmRleCA9IDA7XHJcbiAgICAgIHRoaXMub25UYWJsZUV2ZW50LmVtaXQoeyBldmVudDogJ1NvcnRDaGFuZ2VkJywgc2VuZGVyOiBzb3J0IH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyB0aGlzLmRhdGFTb3VyY2UuZGF0YU9mUmFuZ2UkLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xyXG4gICAgLy8gICAvLyBjb25zb2xlLmxvZygnZGF0YU9mUmFuZ2UnKTtcclxuICAgIC8vIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBpbnZlcnNlT2ZUcmFuc2xhdGlvbigpOiBudW1iZXIge1xyXG4gICAgaWYgKCF0aGlzLnZpZXdwb3J0IHx8ICF0aGlzLnZpZXdwb3J0W1wiX3JlbmRlcmVkQ29udGVudE9mZnNldFwiXSkge1xyXG4gICAgICByZXR1cm4gLTA7XHJcbiAgICB9XHJcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy52aWV3cG9ydFtcIl9yZW5kZXJlZENvbnRlbnRPZmZzZXRcIl07XHJcbiAgICByZXR1cm4gLW9mZnNldDtcclxuICB9ICAgXHJcblxyXG4gIC8vIFRPIERPXHJcbiAgZWxsaXBzaXMoY2VsbFJlZikge1xyXG4gICAgLy8gY29uc29sZS5sb2coY2VsbFJlZi5jbGllbnRIZWlnaHQpO1xyXG4gICAgLy8gY29uc29sZS5sb2coY2VsbFJlZi5zY3JvbGxIZWlnaHQpO1xyXG4gICAgaWYgKGNlbGxSZWYuY2xpZW50SGVpZ2h0ID4gdGhpcy5yb3dIZWlnaHQpIHtcclxuICAgICAgY2VsbFJlZi5zdHlsZS5tYXhIZWlnaHQgPSAnNDhweCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByb3dTdHlsZShyb3cpIHtcclxuICAgIGxldCBzdHlsZTogYW55ID0gIHJvdz8ub3B0aW9uPy5zdHlsZSB8fCB7fTtcclxuICAgIGlmICh0aGlzLnNldHRpbmcuYWx0ZXJuYXRpdmVSb3dTdHlsZSAmJiByb3cuaWQgJSAyID09PSAwKSB7XHJcbiAgICAgIC8vIHN0eWxlIGlzIGhpZ2ggcHJpb3JpdHlcclxuICAgICAgc3R5bGUgPSB7IC4uLnRoaXMuc2V0dGluZy5hbHRlcm5hdGl2ZVJvd1N0eWxlICwuLi5zdHlsZX07XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zZXR0aW5nLnJvd1N0eWxlKSB7XHJcbiAgICAgIHN0eWxlID0geyAuLi50aGlzLnNldHRpbmcucm93U3R5bGUgLC4uLnN0eWxlfTtcclxuICAgIH0gICAgXHJcbiAgICByZXR1cm4gc3R5bGU7XHJcbiAgfVxyXG5cclxuICBjZWxsQ2xhc3Mob3B0aW9uLCBjb2x1bW4pIHtcclxuICAgIGxldCBjbGFzID0gbnVsbDtcclxuICAgIGlmIChvcHRpb24gJiYgY29sdW1uLm5hbWUpIHtcclxuICAgICAgY2xhcyA9IG9wdGlvbltjb2x1bW4ubmFtZV0gPyBvcHRpb25bY29sdW1uLm5hbWVdLnN0eWxlIDogbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCBjbGFzID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBjb2x1bW4uY2VsbENsYXNzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsuLi5jbGFzLCAuLi5jb2x1bW4uY2VsbENsYXNzfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNlbGxTdHlsZShvcHRpb24sIGNvbHVtbikge1xyXG4gICAgbGV0IHN0eWxlID0gbnVsbDtcclxuICAgIGlmIChvcHRpb24gJiYgY29sdW1uLm5hbWUpIHtcclxuICAgICAgc3R5bGUgPSBvcHRpb25bY29sdW1uLm5hbWVdID8gb3B0aW9uW2NvbHVtbi5uYW1lXS5zdHlsZSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICggc3R5bGUgPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIGNvbHVtbi5jZWxsU3R5bGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gey4uLnN0eWxlLCAuLi5jb2x1bW4uY2VsbFN0eWxlfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNlbGxJY29uKG9wdGlvbiwgY2VsbE5hbWUpIHtcclxuICAgIGlmIChvcHRpb24gJiYgY2VsbE5hbWUpIHtcclxuICAgICAgcmV0dXJuIG9wdGlvbltjZWxsTmFtZV0gPyBvcHRpb25bY2VsbE5hbWVdLmljb24gOiBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9ICAgIFxyXG4gIH1cclxuXHJcbiAgZmlsdGVyX29uQ2hhbmdlZChjb2x1bW46IFRhYmxlRmllbGQ8VD4sIGZpbHRlcjogQWJzdHJhY3RGaWx0ZXJbXSkge1xyXG4gICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudHZzRGF0YVNvdXJjZS5zZXRGaWx0ZXIoY29sdW1uLm5hbWUsIGZpbHRlcikuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGN1cnJlbnRDb250ZXh0TWVudVNlbmRlcjogYW55ID0ge307XHJcbiAgb25Db250ZXh0TWVudShldmVudDogTW91c2VFdmVudCwgY29sdW1uOiBUYWJsZUZpZWxkPFQ+LCByb3c6IGFueSkgeyAgICBcclxuICAgIGlmKHRoaXMuY3VycmVudENvbnRleHRNZW51U2VuZGVyPy50aW1lICYmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuY3VycmVudENvbnRleHRNZW51U2VuZGVyLnRpbWUpIDwgNTAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuY29udGV4dE1lbnUuY2xvc2VNZW51KCk7XHJcbiAgICBpZiAodGhpcy5jb250ZXh0TWVudUl0ZW1zPy5sZW5ndGggPT09IDAgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLmNvbnRleHRNZW51UG9zaXRpb24ueCA9IGV2ZW50LmNsaWVudFggKyAncHgnO1xyXG4gICAgdGhpcy5jb250ZXh0TWVudVBvc2l0aW9uLnkgPSBldmVudC5jbGllbnRZICsgJ3B4JztcclxuICAgIHRoaXMuY3VycmVudENvbnRleHRNZW51U2VuZGVyID0geyBjb2x1bW46IGNvbHVtbiwgcm93OiByb3csIHRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpfTtcclxuICAgIHRoaXMuY29udGV4dE1lbnUubWVudURhdGEgPSB0aGlzLmN1cnJlbnRDb250ZXh0TWVudVNlbmRlcjtcclxuICAgIHRoaXMuY29udGV4dE1lbnUubWVudS5mb2N1c0ZpcnN0SXRlbSgnbW91c2UnKTsgICAgXHJcbiAgICB0aGlzLm9uUm93RXZlbnQuZW1pdCh7IGV2ZW50OiAnQmVmb3JDb250ZXh0TWVudU9wZW4nLCBzZW5kZXI6IHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW4sIGNvbnRleHRNZW51OiB0aGlzLmNvbnRleHRNZW51SXRlbXN9fSk7XHJcbiAgICB0aGlzLmNvbnRleHRNZW51Lm9wZW5NZW51KCk7XHJcbiAgfVxyXG5cclxuICBvbkNvbnRleHRNZW51SXRlbUNsaWNrKGRhdGE6IENvbnRleHRNZW51SXRlbSkgeyAgICBcclxuICAgIHRoaXMuY29udGV4dE1lbnUubWVudURhdGEuaXRlbSA9IGRhdGE7XHJcbiAgICB0aGlzLm9uUm93RXZlbnQuZW1pdCh7IGV2ZW50OiAnQ29udGV4dE1lbnVDbGljaycsIHNlbmRlcjogdGhpcy5jb250ZXh0TWVudS5tZW51RGF0YSB9KTtcclxuICB9XHJcblxyXG4gIHRhYmxlTWVudUFjdGlvbkNoYW5nZShlOiBUYWJsZU1lbnVBY3Rpb25DaGFuZ2UpIHtcclxuICAgIGlmIChlLnR5cGUgPT09ICdUYWJsZVNldHRpbmcnKSB7ICAgICAgXHJcbiAgICAgICB0aGlzLnNhdmVTZXR0aW5nKGUuZGF0YSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIGlmKGUudHlwZSA9PT0gJ0Z1bGxTY3JlZW5Nb2RlJykge1xyXG4gICAgICByZXF1ZXN0RnVsbHNjcmVlbih0aGlzLnRibC5lbGVtZW50UmVmKTtcclxuICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnRG93bmxvYWQnKSB7XHJcbiAgICAgIGlmIChlLmRhdGEgPT09ICdDU1YnKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZVNlcnZpY2UuZXhwb3J0VG9Dc3Y8VD4oXHJcbiAgICAgICAgICB0aGlzLmNvbHVtbnMsXHJcbiAgICAgICAgICB0aGlzLnR2c0RhdGFTb3VyY2UuZmlsdGVyZWREYXRhLFxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25Nb2RlbFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZS5kYXRhID09PSAnSlNPTicpIHtcclxuICAgICAgICB0aGlzLnRhYmxlU2VydmljZS5leHBvcnRUb0pzb24odGhpcy50dnNEYXRhU291cmNlLmZpbHRlcmVkRGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnRmlsdGVyQ2xlYXInKSB7XHJcbiAgICAgIHRoaXMudHZzRGF0YVNvdXJjZS5jbGVhckZpbHRlcigpO1xyXG4gICAgICB0aGlzLmhlYWRlckZpbHRlckxpc3QuZm9yRWFjaCgoaGYpID0+IGhmLmNsZWFyQ29sdW1uX09uQ2xpY2soKSk7XHJcbiAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ1ByaW50Jykge1xyXG4gICAgICB0aGlzLnByaW50Q29uZmlnLmRpc3BsYXllZEZpZWxkcyA9IHRoaXMuY29sdW1uc1xyXG4gICAgICAgIC5maWx0ZXIoKGMpID0+IGlzTnVsbG9yVW5kZWZpbmVkKGMucHJpbnRhYmxlKSB8fCBjLnByaW50YWJsZSA9PT0gdHJ1ZSlcclxuICAgICAgICAubWFwKChvKSA9PiBvLm5hbWUpO1xyXG4gICAgICB0aGlzLnByaW50Q29uZmlnLnRpdGxlID0gdGhpcy5wcmludENvbmZpZy50aXRsZSB8fCB0aGlzLnRhYmxlTmFtZTtcclxuICAgICAgdGhpcy5wcmludENvbmZpZy5kaXJlY3Rpb24gPSB0aGlzLnRhYmxlU2V0dGluZy5kaXJlY3Rpb24gfHwgJ2x0cic7XHJcbiAgICAgIHRoaXMucHJpbnRDb25maWcuY29sdW1ucyA9IHRoaXMudGFibGVDb2x1bW5zO1xyXG4gICAgICB0aGlzLnByaW50Q29uZmlnLmRhdGEgPSB0aGlzLnR2c0RhdGFTb3VyY2UuZmlsdGVyZWREYXRhO1xyXG4gICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnR2c0RhdGFTb3VyY2UudG9UcmFuc2xhdGUoKTtcclxuICAgICAgdGhpcy5wcmludENvbmZpZy50YWJsZVByaW50UGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICBwYXJhbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJpbnRDb25maWcudGFibGVQcmludFBhcmFtZXRlcnMucHVzaChpdGVtKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmRpYWxvZy5vcGVuKFByaW50VGFibGVEaWFsb2dDb21wb25lbnQsIHtcclxuICAgICAgICB3aWR0aDogJzkwdncnLFxyXG4gICAgICAgIGRhdGE6IHRoaXMucHJpbnRDb25maWcsXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICdTYXZlU2V0dGluZycpIHtcclxuICAgICAgdGhpcy5zYXZlU2V0dGluZyhudWxsLCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJvd01lbnVBY3Rpb25DaGFuZ2UoY29udGV4dE1lbnVJdGVtOiBDb250ZXh0TWVudUl0ZW0sIHJvdzogYW55KSB7XHJcbiAgICBjb25zb2xlLmxvZygnY29udGV4dE1lbnVJdGVtJyk7ICAgIFxyXG4gICAgdGhpcy5vblJvd0V2ZW50LmVtaXQoeyBldmVudDogJ1Jvd0FjdGlvbk1lbnUnLCBzZW5kZXI6IHtyb3c6IHJvdywgYWN0aW9uOiBjb250ZXh0TWVudUl0ZW19fSk7XHJcbiAgICAvLyB0aGlzLnJvd0FjdGlvbk1lbnVDaGFuZ2UuZW1pdCh7YWN0aW9uSXRlbTogY29udGV4dE1lbnVJdGVtLCByb3dJdGVtOiByb3cgfSk7XHJcbiAgfVxyXG5cclxuICBkb1JlbmRlcmluZyhlKSB7XHJcbiAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLnZpZXdwb3J0LmdldFZpZXdwb3J0U2l6ZSgpID09PSAwKSB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd6ZXJvJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwYWdpbmF0aW9uX29uQ2hhbmdlKGU6IFRhYmxlUGFnaW5hdGlvbikge1xyXG4gICAgLy8gY29uc29sZS5sb2coZSk7XHJcbiAgICB0aGlzLnBlbmRpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy50dnNEYXRhU291cmNlLnJlZnJlc2hGaWx0ZXJQcmVkaWNhdGUoKTsgLy8gcGFnaW5hdGlvbiBCdWdmaXhlZFxyXG4gICAgdGhpcy5wYWdpbmF0aW9uQ2hhbmdlLmVtaXQoZSk7XHJcbiAgfSBcclxuXHJcbiAgcmVsb2FkX29uQ2xpY2soKXtcclxuICAgIHRoaXMub25UYWJsZUV2ZW50LmVtaXQoeyBzZW5kZXI6IG51bGwsIGV2ZW50OiAnUmVsb2FkRGF0YSd9KTtcclxuICB9XHJcblxyXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gIG9uUmVzaXplQ29sdW1uKGV2ZW50OiBhbnksIGluZGV4OiBudW1iZXIsIHR5cGU6ICdsZWZ0JyB8ICdyaWdodCcpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGluZGV4LHR5cGUpOyAgICBcclxuICAgIHRoaXMucmVzaXplQ29sdW1uLnJlc2l6ZUhhbmRsZXIgPSB0eXBlO1xyXG4gICAgdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRYID0gZXZlbnQucGFnZVg7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyLCB0aGlzLnJlc2l6ZUNvbHVtbi5zdGFydFgpO1xyXG4gICAgaWYgKHRoaXMucmVzaXplQ29sdW1uLnJlc2l6ZUhhbmRsZXIgPT09ICdyaWdodCcpIHtcclxuICAgICAgdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRXaWR0aCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICB0aGlzLnJlc2l6ZUNvbHVtbi5jdXJyZW50UmVzaXplSW5kZXggPSBpbmRleDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nID09PSBudWxsKSB7XHJcbiAgICAgICAgLy8gZm9yIGZpcnN0IGNvbHVtbiBub3QgcmVzaXplXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVzaXplQ29sdW1uLnN0YXJ0V2lkdGggPVxyXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy5jbGllbnRXaWR0aDtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbi5jdXJyZW50UmVzaXplSW5kZXggPSBpbmRleDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMubW91c2VNb3ZlKGluZGV4KTtcclxuICB9XHJcblxyXG4gIG1vdXNlTW92ZShpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnJlc2l6YWJsZU1vdXNlbW92ZSA9IHRoaXMucmVuZGVyZXIubGlzdGVuKFxyXG4gICAgICAnZG9jdW1lbnQnLFxyXG4gICAgICAnbW91c2Vtb3ZlJyxcclxuICAgICAgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzaXplQ29sdW1uLnJlc2l6ZUhhbmRsZXIgIT09IG51bGwgJiYgZXZlbnQuYnV0dG9ucykge1xyXG4gICAgICAgICAgY29uc3QgcnRsID0gdGhpcy5kaXJlY3Rpb24gPT09ICdydGwnID8gLTEgOiAxO1xyXG4gICAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyID09PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gZXZlbnQucGFnZVggLSB0aGlzLnJlc2l6ZUNvbHVtbi5zdGFydFg7XHJcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRXaWR0aCArIHJ0bCAqIGR4O1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZHggPSB0aGlzLnJlc2l6ZUNvbHVtbi5zdGFydFggLSBldmVudC5wYWdlWDtcclxuICAgICAgICAgICAgd2lkdGggPSB0aGlzLnJlc2l6ZUNvbHVtbi5zdGFydFdpZHRoIC0gcnRsICogZHg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIHRoaXMucmVzaXplQ29sdW1uLmN1cnJlbnRSZXNpemVJbmRleCA9PT0gaW5kZXggJiYgd2lkdGggPiB0aGlzLm1pbldpZHRoICkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbi53aWR0aFVwZGF0ZS5uZXh0KHtcclxuICAgICAgICAgICAgICBpOiBpbmRleCAtICh0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyID09PSAnbGVmdCcgPyAxIDogMCksXHJcbiAgICAgICAgICAgICAgdzogd2lkdGgsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVzaXphYmxlTW91c2V1cCA9IHRoaXMucmVuZGVyZXIubGlzdGVuKFxyXG4gICAgICAnZG9jdW1lbnQnLFxyXG4gICAgICAnbW91c2V1cCcsXHJcbiAgICAgIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMucmVzaXplQ29sdW1uLmN1cnJlbnRSZXNpemVJbmRleCA9IC0xOyAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGV4cGFuZFJvdyhyb3dJbmRleDogbnVtYmVyLCBtb2RlOiBib29sZWFuID0gdHJ1ZSkgeyAgICBcclxuICAgIGlmKCByb3dJbmRleCA9PT0gbnVsbCB8fCByb3dJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRocm93ICdSb3cgaW5kZXggaXMgbm90IGRlZmluZWQuJzsgICAgICBcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmV4cGFuZGVkRWxlbWVudCA9PT0gdGhpcy50dnNEYXRhU291cmNlLmFsbERhdGFbcm93SW5kZXhdKSB7XHJcbiAgICAgIHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbi5leHBhbmQgPSBtb2RlOyAgICBcclxuICAgICAgdGhpcy5leHBhbmRlZEVsZW1lbnQgPSB0aGlzLmV4cGFuZGVkRWxlbWVudCA9PT0gdGhpcy50dnNEYXRhU291cmNlLmFsbERhdGFbcm93SW5kZXhdID8gbnVsbCA6IHRoaXMudHZzRGF0YVNvdXJjZS5hbGxEYXRhW3Jvd0luZGV4XTsgICAgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5leHBhbmRlZEVsZW1lbnQgJiYgdGhpcy5leHBhbmRlZEVsZW1lbnQgIT09IHRoaXMudHZzRGF0YVNvdXJjZS5hbGxEYXRhW3Jvd0luZGV4XSkge1xyXG4gICAgICAgIHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbi5leHBhbmQgPSBmYWxzZTsgICAgICBcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudCA9IG51bGw7ICAgICAgXHJcbiAgICAgIGlmIChtb2RlID09PSB0cnVlKSB7ICAgIFxyXG4gICAgICAgIC8vIHRoaXMudmlld3BvcnQuc2Nyb2xsVG9JbmRleChyb3dJbmRleCwgJ3Ntb290aCcpOyAgICAgIFxyXG4gICAgICAgIC8vIHNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgICAvLyAgIHRoaXMuZXhwYW5kZWRFbGVtZW50ID0gdGhpcy5leHBhbmRlZEVsZW1lbnQgPT09IHRoaXMuZGF0YVNvdXJjZS5hbGxEYXRhW3Jvd0luZGV4XSA/IG51bGwgOiB0aGlzLmRhdGFTb3VyY2UuYWxsRGF0YVtyb3dJbmRleF07ICAgIFxyXG4gICAgICAgIC8vICAgaWYgKHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24gPSB7IGV4cGFuZDogZmFsc2V9O1xyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vICAgdGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uLmV4cGFuZCA9IHRydWU7XHJcbiAgICAgICAgLy8gICB0aGlzLnJlZnJlc2hHcmlkKCk7XHJcbiAgICAgICAgLy8gfSwgMzAwKTtcclxuICAgICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudCA9IHRoaXMuZXhwYW5kZWRFbGVtZW50ID09PSB0aGlzLnR2c0RhdGFTb3VyY2UuYWxsRGF0YVtyb3dJbmRleF0gPyBudWxsIDogdGhpcy50dnNEYXRhU291cmNlLmFsbERhdGFbcm93SW5kZXhdOyAgICBcclxuICAgICAgICBpZiAodGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uID09PSB1bmRlZmluZWQgfHwgdGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uID09PSBudWxsKSB7XHJcbiAgICAgICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24gPSB7IGV4cGFuZDogZmFsc2V9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24uZXhwYW5kID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9XHJcblxyXG4gIG9uUm93U2VsZWN0aW9uKGUsIHJvdywgY29sdW1uOiBUYWJsZUZpZWxkPFQ+KSB7XHJcbiAgICBpZiAodGhpcy5yb3dTZWxlY3Rpb25Nb2RlICYmIHRoaXMucm93U2VsZWN0aW9uTW9kZSAhPT0gJ25vbmUnICYmIGNvbHVtbi5yb3dTZWxlY3Rpb25hYmxlICE9PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLm9uUm93U2VsZWN0aW9uQ2hhbmdlKGUsIHJvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNlbGxDbGljayhlLCByb3csIGNvbHVtbjogVGFibGVGaWVsZDxUPikgeyAgICBcclxuICAgIHRoaXMub25Sb3dTZWxlY3Rpb24oZSwgcm93LCBjb2x1bW4pO1xyXG4gICAgaWYgKGNvbHVtbi5jbGlja2FibGUgIT09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMub25Sb3dFdmVudC5lbWl0KHsgZXZlbnQ6ICdDZWxsQ2xpY2snLCBzZW5kZXI6IHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW59IH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Sb3dEYmxDbGljayhlLCByb3cpIHsgICAgXHJcbiAgICB0aGlzLm9uUm93RXZlbnQuZW1pdCh7IGV2ZW50OiBlLCBzZW5kZXI6IHtyb3c6IHJvd30gfSk7XHJcbiAgfVxyXG5cclxuICBvblJvd0NsaWNrKGUsIHJvdykge1xyXG4gICAgdGhpcy5vblJvd0V2ZW50LmVtaXQoeyBldmVudDogJ1Jvd0NsaWNrJywgc2VuZGVyOiB7cm93OiByb3d9IH0pOyAgICBcclxuICB9XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRHJhZyAmIERyb3AgQ29sdW1uICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIGRyYWdTdGFydGVkKGV2ZW50OiBDZGtEcmFnU3RhcnQpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50KTsgICAgXHJcbiAgICAvLyBkZWJ1Z2dlciAgXHJcbiAgICAvLyB0aGlzLmRyYWdEcm9wRGF0YS5kcmFnQ29sdW1uSW5kZXggPSBldmVudC5zb3VyY2UuO1xyXG4gIH1cclxuIFxyXG4gIGRyb3BMaXN0RHJvcHBlZChldmVudDogQ2RrRHJhZ0Ryb3A8c3RyaW5nW10+KSB7ICAgIFxyXG4gICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgIHRoaXMuZHJhZ0Ryb3BEYXRhLmRyb3BDb2x1bW5JbmRleCA9IGV2ZW50LmN1cnJlbnRJbmRleDtcclxuICAgICAgdGhpcy5tb3ZlQ29sdW1uKGV2ZW50LnByZXZpb3VzSW5kZXgsIGV2ZW50LmN1cnJlbnRJbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkcm9wKGV2ZW50OiBDZGtEcmFnRHJvcDxzdHJpbmdbXT4pIHtcclxuICAgIG1vdmVJdGVtSW5BcnJheShldmVudC5jb250YWluZXIuZGF0YSwgZXZlbnQucHJldmlvdXNJbmRleCwgZXZlbnQuY3VycmVudEluZGV4KTtcclxuXHJcbiAgICAvLyB1cGRhdGVzIG1vdmVkIGRhdGEgYW5kIHRhYmxlLCBidXQgbm90IGR5bmFtaWMgaWYgbW9yZSBkcm9wem9uZXNcclxuICAgIC8vIHRoaXMuZGF0YVNvdXJjZS5kYXRhID0gY2xvbmVkZWVwKHRoaXMuZGF0YVNvdXJjZS5kYXRhKTtcclxuICB9XHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuIFxyXG4gIGNvcHlQcm9wZXJ0eShmcm9tOiBhbnksIHRvOiBhbnkpIHtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcclxuICAgIGtleXMuZm9yRWFjaCgga2V5ID0+IHtcclxuICAgICAgaWYgKGZyb21ba2V5XSAhPT0gdW5kZWZpbmVkICYmIGZyb21ba2V5XSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRvW2tleV0gPSBBcnJheS5pc0FycmF5KGZyb21ba2V5XSkgPyBPYmplY3QuYXNzaWduKFtdLCBmcm9tW2tleV0pIDogT2JqZWN0LmFzc2lnbih7fSwgZnJvbVtrZXldKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBcclxufVxyXG5cclxuXHJcbiJdfQ==