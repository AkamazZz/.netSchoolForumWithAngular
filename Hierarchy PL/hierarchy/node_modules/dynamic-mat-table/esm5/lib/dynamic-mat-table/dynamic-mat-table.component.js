/**
 * @fileoverview added by tsickle
 * Generated from: lib/dynamic-mat-table/dynamic-mat-table.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { __assign, __extends } from "tslib";
import { Component, QueryList, ElementRef, ViewChild, TemplateRef, Renderer2, ChangeDetectorRef, Input, ContentChildren } from '@angular/core';
import { TableCoreDirective } from '../cores/table.core.directive';
import { TableService } from './dynamic-mat-table.service';
import { HeaderFilterComponent } from './extensions/filter/header-filter.component';
import { MatDialog } from '@angular/material/dialog';
import { PrintTableDialogComponent } from './extensions/print-dialog/print-dialog.component';
import { trigger, transition, style, animate, query, stagger, state } from '@angular/animations';
import { ResizeColumn } from '../models/resize-column.mode';
import { TableIntl } from '../international/table-Intl';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { isNullorUndefined } from '../cores/type';
import { delay } from 'rxjs/operators';
import { MatMenuTrigger } from '@angular/material/menu';
import { OverlayContainer } from '@angular/cdk/overlay';
import { MAT_TOOLTIP_DEFAULT_OPTIONS } from '@angular/material/tooltip';
import { requestFullscreen } from '../utilies/html.helper';
/** @type {?} */
export var tableAnimation = trigger('tableAnimation', [
    transition('void => *', [
        query(':enter', style({ transform: 'translateX(-50%)', opacity: 0 }), {
            //limit: 5,
            optional: true,
        }),
        query(':enter', stagger('0.01s', [
            animate('0.5s ease', style({ transform: 'translateX(0%)', opacity: 1 })),
        ]), {
            //limit: 5, 
            optional: true
        }),
    ]),
]);
/** @type {?} */
export var expandAnimation = trigger('detailExpand', [
    state('collapsed', style({ height: '0px', minHeight: '0' })),
    state('expanded', style({ height: '*' })),
    transition('expanded <=> collapsed', animate('100ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
]);
/** @type {?} */
export var cellTooltipDefaults = {
    showDelay: 500,
    hideDelay: 400,
    touchendHideDelay: 1000,
    position: 'above',
};
/**
 * @template T
 */
var DynamicMatTableComponent = /** @class */ (function (_super) {
    __extends(DynamicMatTableComponent, _super);
    function DynamicMatTableComponent(dialog, renderer, languagePack, tableService, cdr, overlayContainer) {
        var _this = _super.call(this, tableService, cdr) || this;
        _this.dialog = dialog;
        _this.renderer = renderer;
        _this.languagePack = languagePack;
        _this.tableService = tableService;
        _this.cdr = cdr;
        _this.overlayContainer = overlayContainer;
        _this.contextMenuPosition = { x: '0px', y: '0px' };
        _this.dragDropData = { dragColumnIndex: -1, dropColumnIndex: -1 };
        _this.printing = true;
        _this.printTemplate = null;
        _this.resizeColumn = new ResizeColumn();
        _this.indexTrackFn = (/**
         * @param {?} index
         * @return {?}
         */
        function (index) {
            return index;
        });
        _this.currentContextMenuSender = {};
        _this.overlayContainer.getContainerElement().addEventListener('contextmenu', (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            e.preventDefault();
            return false;
        }));
        _this.eventsSubscription = _this.resizeColumn.widthUpdate.pipe(delay(100)).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.columns[data.i].width = data.w;
            if (_this.tableSetting.columnSetting[data.i]) {
                _this.tableSetting.columnSetting[data.i].width = data.w;
            }
            _this.refreshGrid();
        }));
        return _this;
    }
    Object.defineProperty(DynamicMatTableComponent.prototype, "setting", {
        get: /**
         * @return {?}
         */
        function () {
            return this.tableSetting;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (!isNullorUndefined(value)) {
                value.columnSetting = value.columnSetting || this.tableSetting.columnSetting;
                value.alternativeRowStyle = value.alternativeRowStyle || this.tableSetting.alternativeRowStyle;
                value.columnSetting = value.columnSetting || this.tableSetting.columnSetting;
                value.direction = value.direction || this.tableSetting.direction;
                value.normalRowStyle = value.normalRowStyle || this.tableSetting.normalRowStyle;
                value.visibaleActionMenu = value.visibaleActionMenu || this.tableSetting.visibaleActionMenu;
                value.visibleTableMenu = value.visibleTableMenu || this.tableSetting.visibleTableMenu;
                this.tableSetting = value;
                this.setDisplayedColumns();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    DynamicMatTableComponent.prototype.trackColumn = /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    function (index, item) {
        return "" + item.index;
    };
    /**
     * @return {?}
     */
    DynamicMatTableComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.eventsSubscription) {
            this.eventsSubscription.unsubscribe();
        }
    };
    /**
     * @return {?}
     */
    DynamicMatTableComponent.prototype.refreshUI = /**
     * @return {?}
     */
    function () {
        var _a, _b;
        /** @type {?} */
        var scrollStrategy = this.viewport['_scrollStrategy'];
        (_a = scrollStrategy === null || scrollStrategy === void 0 ? void 0 : scrollStrategy.viewport) === null || _a === void 0 ? void 0 : _a.checkViewportSize();
        (_b = scrollStrategy === null || scrollStrategy === void 0 ? void 0 : scrollStrategy.viewport) === null || _b === void 0 ? void 0 : _b.scrollToOffset(0);
        this.cdr.detectChanges();
    };
    /**
     * @return {?}
     */
    DynamicMatTableComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var scrollStrategy = this.viewport['_scrollStrategy'];
        scrollStrategy.offsetChange.subscribe((/**
         * @param {?} offset
         * @return {?}
         */
        function (offset) {
            // console.log(offset);
        }));
        this.viewport.renderedRangeStream.subscribe((/**
         * @param {?} t
         * @return {?}
         */
        function (t) {
            // in expanding row scrolling make not good apperance therefor close it.
            if (_this.expandedElement && _this.expandedElement.option && _this.expandedElement.option.expand) {
                // console.log('clear', t); 
                // this.expandedElement.option.expand = false;
                // this.expandedElement = null;
            }
        }));
    };
    /**
     * @return {?}
     */
    DynamicMatTableComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.tvsDataSource.paginator = this.paginator;
        this.tvsDataSource.sort = this.sort;
        this.dataSource.subscribe((/**
         * @param {?} x
         * @return {?}
         */
        function (x) {
            //console.log(x);      
            _this.initSystemField(x);
            _this.tvsDataSource.data = x;
            // this.cdr.detectChanges();
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.refreshUI();
            }), 0);
        }));
        this.tvsDataSource.sort.sortChange.subscribe((/**
         * @param {?} sort
         * @return {?}
         */
        function (sort) {
            _this.pagination.pageIndex = 0;
            _this.onTableEvent.emit({ event: 'SortChanged', sender: sort });
        }));
        // this.dataSource.dataOfRange$.subscribe((data) => {
        //   // console.log('dataOfRange');
        // });
    };
    Object.defineProperty(DynamicMatTableComponent.prototype, "inverseOfTranslation", {
        get: /**
         * @return {?}
         */
        function () {
            if (!this.viewport || !this.viewport["_renderedContentOffset"]) {
                return -0;
            }
            /** @type {?} */
            var offset = this.viewport["_renderedContentOffset"];
            return -offset;
        },
        enumerable: true,
        configurable: true
    });
    // TO DO
    // TO DO
    /**
     * @param {?} cellRef
     * @return {?}
     */
    DynamicMatTableComponent.prototype.ellipsis = 
    // TO DO
    /**
     * @param {?} cellRef
     * @return {?}
     */
    function (cellRef) {
        // console.log(cellRef.clientHeight);
        // console.log(cellRef.scrollHeight);
        if (cellRef.clientHeight > this.rowHeight) {
            cellRef.style.maxHeight = '48px';
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    DynamicMatTableComponent.prototype.rowStyle = /**
     * @param {?} row
     * @return {?}
     */
    function (row) {
        var _a;
        /** @type {?} */
        var style = ((_a = row === null || row === void 0 ? void 0 : row.option) === null || _a === void 0 ? void 0 : _a.style) || {};
        if (this.setting.alternativeRowStyle && row.id % 2 === 0) {
            // style is high priority
            style = __assign(__assign({}, this.setting.alternativeRowStyle), style);
        }
        if (this.setting.rowStyle) {
            style = __assign(__assign({}, this.setting.rowStyle), style);
        }
        return style;
    };
    /**
     * @param {?} option
     * @param {?} column
     * @return {?}
     */
    DynamicMatTableComponent.prototype.cellClass = /**
     * @param {?} option
     * @param {?} column
     * @return {?}
     */
    function (option, column) {
        /** @type {?} */
        var clas = null;
        if (option && column.name) {
            clas = option[column.name] ? option[column.name].style : null;
        }
        if (clas === null) {
            return column.cellClass;
        }
        else {
            return __assign(__assign({}, clas), column.cellClass);
        }
    };
    /**
     * @param {?} option
     * @param {?} column
     * @return {?}
     */
    DynamicMatTableComponent.prototype.cellStyle = /**
     * @param {?} option
     * @param {?} column
     * @return {?}
     */
    function (option, column) {
        /** @type {?} */
        var style = null;
        if (option && column.name) {
            style = option[column.name] ? option[column.name].style : null;
        }
        if (style === null) {
            return column.cellStyle;
        }
        else {
            return __assign(__assign({}, style), column.cellStyle);
        }
    };
    /**
     * @param {?} option
     * @param {?} cellName
     * @return {?}
     */
    DynamicMatTableComponent.prototype.cellIcon = /**
     * @param {?} option
     * @param {?} cellName
     * @return {?}
     */
    function (option, cellName) {
        if (option && cellName) {
            return option[cellName] ? option[cellName].icon : null;
        }
        else {
            return null;
        }
    };
    /**
     * @param {?} column
     * @param {?} filter
     * @return {?}
     */
    DynamicMatTableComponent.prototype.filter_onChanged = /**
     * @param {?} column
     * @param {?} filter
     * @return {?}
     */
    function (column, filter) {
        var _this = this;
        this.pending = true;
        this.tvsDataSource.setFilter(column.name, filter).subscribe((/**
         * @return {?}
         */
        function () {
            _this.pending = false;
        }));
    };
    /**
     * @param {?} event
     * @param {?} column
     * @param {?} row
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onContextMenu = /**
     * @param {?} event
     * @param {?} column
     * @param {?} row
     * @return {?}
     */
    function (event, column, row) {
        var _a, _b;
        if (((_a = this.currentContextMenuSender) === null || _a === void 0 ? void 0 : _a.time) && (new Date().getTime() - this.currentContextMenuSender.time) < 500) {
            return;
        }
        this.contextMenu.closeMenu();
        if (((_b = this.contextMenuItems) === null || _b === void 0 ? void 0 : _b.length) === 0) {
            return;
        }
        event.preventDefault();
        this.contextMenuPosition.x = event.clientX + 'px';
        this.contextMenuPosition.y = event.clientY + 'px';
        this.currentContextMenuSender = { column: column, row: row, time: new Date().getTime() };
        this.contextMenu.menuData = this.currentContextMenuSender;
        this.contextMenu.menu.focusFirstItem('mouse');
        this.onRowEvent.emit({ event: 'BeforContextMenuOpen', sender: { row: row, column: column, contextMenu: this.contextMenuItems } });
        this.contextMenu.openMenu();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onContextMenuItemClick = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this.contextMenu.menuData.item = data;
        this.onRowEvent.emit({ event: 'ContextMenuClick', sender: this.contextMenu.menuData });
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DynamicMatTableComponent.prototype.tableMenuActionChange = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        if (e.type === 'TableSetting') {
            this.saveSetting(e.data, false);
        }
        else if (e.type === 'FullScreenMode') {
            requestFullscreen(this.tbl.elementRef);
        }
        else if (e.type === 'Download') {
            if (e.data === 'CSV') {
                this.tableService.exportToCsv(this.columns, this.tvsDataSource.filteredData, this.rowSelectionModel);
            }
            else if (e.data === 'JSON') {
                this.tableService.exportToJson(this.tvsDataSource.filteredData);
            }
        }
        else if (e.type === 'FilterClear') {
            this.tvsDataSource.clearFilter();
            this.headerFilterList.forEach((/**
             * @param {?} hf
             * @return {?}
             */
            function (hf) { return hf.clearColumn_OnClick(); }));
        }
        else if (e.type === 'Print') {
            this.printConfig.displayedFields = this.columns
                .filter((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return isNullorUndefined(c.printable) || c.printable === true; }))
                .map((/**
             * @param {?} o
             * @return {?}
             */
            function (o) { return o.name; }));
            this.printConfig.title = this.printConfig.title || this.tableName;
            this.printConfig.direction = this.tableSetting.direction || 'ltr';
            this.printConfig.columns = this.tableColumns;
            this.printConfig.data = this.tvsDataSource.filteredData;
            /** @type {?} */
            var params = this.tvsDataSource.toTranslate();
            this.printConfig.tablePrintParameters = [];
            params.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                _this.printConfig.tablePrintParameters.push(item);
            }));
            this.dialog.open(PrintTableDialogComponent, {
                width: '90vw',
                data: this.printConfig,
            });
        }
        else if (e.type === 'SaveSetting') {
            this.saveSetting(null, true);
        }
    };
    /**
     * @param {?} contextMenuItem
     * @param {?} row
     * @return {?}
     */
    DynamicMatTableComponent.prototype.rowMenuActionChange = /**
     * @param {?} contextMenuItem
     * @param {?} row
     * @return {?}
     */
    function (contextMenuItem, row) {
        console.log('contextMenuItem');
        this.onRowEvent.emit({ event: 'RowActionMenu', sender: { row: row, action: contextMenuItem } });
        // this.rowActionMenuChange.emit({actionItem: contextMenuItem, rowItem: row });
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DynamicMatTableComponent.prototype.doRendering = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.pending = false;
        if (this.viewport.getViewportSize() === 0) {
            // console.log('zero');
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    DynamicMatTableComponent.prototype.pagination_onChange = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // console.log(e);
        this.pending = true;
        this.tvsDataSource.refreshFilterPredicate(); // pagination Bugfixed
        this.paginationChange.emit(e);
    };
    /**
     * @return {?}
     */
    DynamicMatTableComponent.prototype.reload_onClick = /**
     * @return {?}
     */
    function () {
        this.onTableEvent.emit({ sender: null, event: 'ReloadData' });
    };
    /////////////////////////////////////////////////////////////////
    /////////////////////////////////////////////////////////////////
    /**
     * @param {?} event
     * @param {?} index
     * @param {?} type
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onResizeColumn = 
    /////////////////////////////////////////////////////////////////
    /**
     * @param {?} event
     * @param {?} index
     * @param {?} type
     * @return {?}
     */
    function (event, index, type) {
        // console.log(index,type);    
        this.resizeColumn.resizeHandler = type;
        this.resizeColumn.startX = event.pageX;
        // console.log(this.resizeColumn.resizeHandler, this.resizeColumn.startX);
        if (this.resizeColumn.resizeHandler === 'right') {
            this.resizeColumn.startWidth = event.target.parentElement.clientWidth;
            this.resizeColumn.currentResizeIndex = index;
        }
        else {
            if (event.target.parentElement.previousElementSibling === null) {
                // for first column not resize
                return;
            }
            else {
                this.resizeColumn.startWidth =
                    event.target.parentElement.previousElementSibling.clientWidth;
                this.resizeColumn.currentResizeIndex = index;
            }
        }
        event.preventDefault();
        this.mouseMove(index);
    };
    /**
     * @param {?} index
     * @return {?}
     */
    DynamicMatTableComponent.prototype.mouseMove = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        var _this = this;
        this.resizableMousemove = this.renderer.listen('document', 'mousemove', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (_this.resizeColumn.resizeHandler !== null && event.buttons) {
                /** @type {?} */
                var rtl = _this.direction === 'rtl' ? -1 : 1;
                /** @type {?} */
                var width = 0;
                if (_this.resizeColumn.resizeHandler === 'right') {
                    /** @type {?} */
                    var dx = event.pageX - _this.resizeColumn.startX;
                    width = _this.resizeColumn.startWidth + rtl * dx;
                }
                else {
                    /** @type {?} */
                    var dx = _this.resizeColumn.startX - event.pageX;
                    width = _this.resizeColumn.startWidth - rtl * dx;
                }
                if (_this.resizeColumn.currentResizeIndex === index && width > _this.minWidth) {
                    _this.resizeColumn.widthUpdate.next({
                        i: index - (_this.resizeColumn.resizeHandler === 'left' ? 1 : 0),
                        w: width,
                    });
                }
            }
        }));
        this.resizableMouseup = this.renderer.listen('document', 'mouseup', (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (_this.resizeColumn.resizeHandler !== null) {
                _this.resizeColumn.resizeHandler = null;
                _this.resizeColumn.currentResizeIndex = -1;
            }
        }));
    };
    /**
     * @param {?} rowIndex
     * @param {?=} mode
     * @return {?}
     */
    DynamicMatTableComponent.prototype.expandRow = /**
     * @param {?} rowIndex
     * @param {?=} mode
     * @return {?}
     */
    function (rowIndex, mode) {
        if (mode === void 0) { mode = true; }
        if (rowIndex === null || rowIndex === undefined) {
            throw 'Row index is not defined.';
        }
        if (this.expandedElement === this.tvsDataSource.allData[rowIndex]) {
            this.expandedElement.option.expand = mode;
            this.expandedElement = this.expandedElement === this.tvsDataSource.allData[rowIndex] ? null : this.tvsDataSource.allData[rowIndex];
        }
        else {
            if (this.expandedElement && this.expandedElement !== this.tvsDataSource.allData[rowIndex]) {
                this.expandedElement.option.expand = false;
            }
            this.expandedElement = null;
            if (mode === true) {
                // this.viewport.scrollToIndex(rowIndex, 'smooth');      
                // setTimeout( () => {
                //   this.expandedElement = this.expandedElement === this.dataSource.allData[rowIndex] ? null : this.dataSource.allData[rowIndex];    
                //   if (this.expandedElement.option === undefined || this.expandedElement.option === null) {
                //     this.expandedElement.option = { expand: false};
                //   }
                //   this.expandedElement.option.expand = true;
                //   this.refreshGrid();
                // }, 300);
                this.expandedElement = this.expandedElement === this.tvsDataSource.allData[rowIndex] ? null : this.tvsDataSource.allData[rowIndex];
                if (this.expandedElement.option === undefined || this.expandedElement.option === null) {
                    this.expandedElement.option = { expand: false };
                }
                this.expandedElement.option.expand = true;
            }
        }
    };
    /**
     * @param {?} e
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onRowSelection = /**
     * @param {?} e
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    function (e, row, column) {
        if (this.rowSelectionMode && this.rowSelectionMode !== 'none' && column.rowSelectionable !== false) {
            this.onRowSelectionChange(e, row);
        }
    };
    /**
     * @param {?} e
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onCellClick = /**
     * @param {?} e
     * @param {?} row
     * @param {?} column
     * @return {?}
     */
    function (e, row, column) {
        this.onRowSelection(e, row, column);
        if (column.clickable !== false) {
            this.onRowEvent.emit({ event: 'CellClick', sender: { row: row, column: column } });
        }
    };
    /**
     * @param {?} e
     * @param {?} row
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onRowDblClick = /**
     * @param {?} e
     * @param {?} row
     * @return {?}
     */
    function (e, row) {
        this.onRowEvent.emit({ event: e, sender: { row: row } });
    };
    /**
     * @param {?} e
     * @param {?} row
     * @return {?}
     */
    DynamicMatTableComponent.prototype.onRowClick = /**
     * @param {?} e
     * @param {?} row
     * @return {?}
     */
    function (e, row) {
        this.onRowEvent.emit({ event: 'RowClick', sender: { row: row } });
    };
    /************************************ Drag & Drop Column *******************************************/
    /**
     * ********************************* Drag & Drop Column ******************************************
     * @param {?} event
     * @return {?}
     */
    DynamicMatTableComponent.prototype.dragStarted = /**
     * ********************************* Drag & Drop Column ******************************************
     * @param {?} event
     * @return {?}
     */
    function (event) {
        // console.log(event);    
        // debugger  
        // this.dragDropData.dragColumnIndex = event.source.;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DynamicMatTableComponent.prototype.dropListDropped = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (event) {
            this.dragDropData.dropColumnIndex = event.currentIndex;
            this.moveColumn(event.previousIndex, event.currentIndex);
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    DynamicMatTableComponent.prototype.drop = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);
        // updates moved data and table, but not dynamic if more dropzones
        // this.dataSource.data = clonedeep(this.dataSource.data);
    };
    /************************************  *******************************************/
    /**
     * *********************************  ******************************************
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    DynamicMatTableComponent.prototype.copyProperty = /**
     * *********************************  ******************************************
     * @param {?} from
     * @param {?} to
     * @return {?}
     */
    function (from, to) {
        /** @type {?} */
        var keys = Object.keys(from);
        keys.forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            if (from[key] !== undefined && from[key] === null) {
                to[key] = Array.isArray(from[key]) ? Object.assign([], from[key]) : Object.assign({}, from[key]);
            }
        }));
    };
    DynamicMatTableComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line: component-selector
                    selector: 'dynamic-mat-table',
                    template: "<cdk-virtual-scroll-viewport\r\n  #tbl  \r\n  [ngClass]=\"viewportClass\"\r\n  [tvsItemSize]=\"rowHeight || 48\"\r\n  [headerHeight]=\"headerHeight || 56\"\r\n  [footerHeight]=\"headerHeight || 56\"\r\n  [headerEnabled]=\"headerEnable || true\"\r\n  [footerEnabled]=\"footerEnable || false\"\r\n  [ngStyle]=\"{'background-color': backgroundColor || 'white'}\" \r\n  [class.printpreview]=\"printing\"\r\n  (requestRendering)=\"doRendering($event)\">\r\n\r\n  <mat-table\r\n    matSort \r\n    class=\"table\"    \r\n    multiTemplateDataRows\r\n    [cdkDropListDisabled]=\"false\"    \r\n    cdkDropList \r\n    cdkDropListOrientation=\"horizontal\"    \r\n    (cdkDragStarted)=\"dragStarted($event)\"\r\n    (cdkDropListDropped)=\"dropListDropped($event)\"        \r\n    [trackBy]=\"indexTrackFn\"\r\n    [dataSource]=\"tvsDataSource\">\r\n    <!-- Checkbox Column -->\r\n    <ng-container matColumnDef=\"row-checkbox\">      \r\n        <mat-header-cell *matHeaderCellDef class=\"row-checkbox\" style=\"z-index: 2;\">\r\n          <mat-checkbox style=\"z-index: 10;\"\r\n            (change)=\"$event ? masterToggle() : null\"\r\n            [checked]=\"rowSelectionModel.hasValue() && isAllSelected()\"\r\n            [indeterminate]=\"rowSelectionModel.hasValue() && !isAllSelected()\"         \r\n            *ngIf=\"rowSelectionMode === 'multi'\">\r\n          </mat-checkbox>\r\n          <mat-icon *ngIf=\"rowSelectionMode === 'single'\">indeterminate_check_box</mat-icon>\r\n        </mat-header-cell>\r\n        <ng-container>\r\n          <mat-cell *matCellDef=\"let row\" class=\"row-checkbox\">\r\n            <mat-checkbox\r\n              (click)=\"$event.stopPropagation()\"\r\n              (change)=\"onRowSelectionChange($event, row)\"\r\n              [checked]=\"rowSelectionModel?.isSelected(row)\">\r\n            </mat-checkbox>\r\n          </mat-cell>\r\n        </ng-container>\r\n    </ng-container> \r\n    <!-- Table Columns -->\r\n    <ng-container *ngFor=\"let column of columns; let i = index; trackBy: trackColumn\" [matColumnDef]=\"column.name\"\r\n      [sticky]=\"column.sticky === 'start' ? true : false\" [stickyEnd]=\"column.sticky === 'end' ? true : false\">      \r\n      <!-- ************************** Table Header ************************* -->      \r\n        <mat-header-cell *matHeaderCellDef                \r\n          cdkDrag \r\n          [cdkDragDisabled]=\"column?.draggable === false\"\r\n          cdkDragBoundary=\"mat-header-row\"\r\n          cdkDropListLockAxis=\"x\"        \r\n          [cdkDragData]=\"{name: column.name, columIndex: i}\"        \r\n          [style.maxWidth.px]=\"column.width\"\r\n          [style.minWidth.px]=\"column.width\"        \r\n          [class.active-resize]=\"resizeColumn.currentResizeIndex===i\" cdkDragBoundary=\"mat-header-row\">\r\n          <div class=\"left-resizer-handler\" (mousedown)=\"onResizeColumn($event, i, 'left')\"></div>\r\n          <header-filter [field]=\"column\" (filterChanged)=\"filter_onChanged(column, $event)\" [filters]=\"tvsDataSource.getFilter(column.name)\">\r\n            <mat-icon class=\"column-icon\" [ngStyle]=\"{ 'color': column?.iconColor }\">{{column?.icon}}</mat-icon>          \r\n            <mat-icon *ngIf=\"column?.draggable != false\" class=\"drag-indicator\" cdkDragHandle>drag_indicator</mat-icon>\r\n            <div mat-sort-header [matTooltip]=\"column.header\" matTooltipClass=\"cell-tooltip\" [disabled]=\"column.sortable === false\" class=\"header-caption\">{{ column.header }}</div>\r\n          </header-filter> \r\n          <div\r\n            class=\"right-resizer-handler\"\r\n            (mousedown)=\"onResizeColumn($event, i, 'right')\"\r\n          ></div>\r\n        </mat-header-cell>           \r\n      <!-- ************************** Table Cell ************************* -->\r\n      \r\n      <mat-cell *matCellDef=\"let row;\"                    \r\n                [style.maxWidth.px]=\"column.width\"\r\n                [style.minWidth.px]=\"column.width\"\r\n                [class]=\"row[column.cellClass]\"\r\n                (click)=\"onCellClick($event, row, column)\"                  \r\n                [ngClass]=\"cellClass(row?.option, column)\"\r\n                [ngStyle]=\"cellStyle(row?.option, column)\"\r\n                (contextmenu)=\"onContextMenu($event, column, row)\">          \r\n        <label *ngIf=\"!column.dynamicCellComponent\" [class.rtl-cell]=\"direction === 'rtl'\" [class.ltr-cell]=\"direction === 'ltr'\">{{row[column.name]}}</label>          \r\n        <ng-container *ngIf=\"column.dynamicCellComponent\" dynamicCell [component]=\"column.dynamicCellComponent\" [column]=\"column\" [row]=\"row\" [onRowEvent]=\"onRowEvent\">\r\n        </ng-container> \r\n      </mat-cell>\r\n    </ng-container> \r\n\r\n    <ng-container matColumnDef=\"progress\" > \r\n      <mat-header-cell\r\n        *matHeaderCellDef\r\n        [attr.colspan]=\"displayedColumns.length\">\r\n        <mat-progress-bar mode=\"indeterminate\" [class.show]=\"pending\">\r\n        </mat-progress-bar>\r\n      </mat-header-cell>\r\n    </ng-container>\r\n\r\n    <!-- Expanded Content Column - The detail row is made up of Dynamic Cell -->\r\n    <ng-container *ngIf=\"expandColumn.length > 0\" matColumnDef=\"expandedDetail\">\r\n      <td mat-cell *matCellDef=\"let row\" [attr.colspan]=\"displayedColumns.length\" class=\"expanded-detail-cell\">\r\n        <div class=\"expanded-detail\" [@detailExpand]=\"row == expandedElement ? 'expanded' : 'collapsed'\">\r\n          <ng-container dynamicCell [component]=\"expandComponent\" [row]=\"row\" [onRowEvent]=\"onRowEvent\">\r\n          </ng-container> \r\n        </div>\r\n      </td>\r\n    </ng-container>\r\n    <!-- Table Menu[ Sort, Visible, Export] -->\r\n    <ng-container matColumnDef=\"table-menu\" [stickyEnd]=\"true\" *ngIf=\"setting?.visibleTableMenu !== false\">\r\n      <mat-header-cell *matHeaderCellDef class=\"table-menu\">\r\n        <table-menu\r\n          [tableSetting]=\"tableSetting\"\r\n          (menuActionChange)=\"tableMenuActionChange($event)\"\r\n        ></table-menu> \r\n      </mat-header-cell>\r\n      <mat-cell *matCellDef=\"let row\" class=\"table-menu\">\r\n        <row-menu *ngIf=\"rowContextMenuItems && rowContextMenuItems.length > 0\" [rowActionMenu]=\"row?.actionMenu\" [actionMenus]=\"rowContextMenuItems\" [tableSetting]=\"tableSetting\" (rowActionChange)=\"rowMenuActionChange($event, row)\"></row-menu>\r\n      </mat-cell>\r\n    </ng-container>\r\n    <!-- Row Table[Header, Data, Footer] -->    \r\n    <mat-row \r\n      *matRowDef=\"let row; columns: displayedColumns;\"      \r\n      (dblclick)=\"onRowDblClick($event, row)\"\r\n      (click)=\"onRowClick($event, row)\"\r\n      [style.height.px]=\"rowHeight\"\r\n      class=\"table-row\" \r\n      [ngClass]=\"row?.option?.class\"\r\n      [ngStyle]=\"rowStyle(row)\"      \r\n      [class.expanded-row]=\"expandedElement === row\"\r\n      [class.row-selection]=\"rowSelectionModel ? rowSelectionModel.isSelected(row) : false\"\r\n      (contextmenu)=\"onContextMenu($event, null, row)\">\r\n    </mat-row>\r\n    <ng-container *ngIf=\"expandColumn.length > 0\">      \r\n      <tr mat-row *matRowDef=\"let expandRow; columns: expandColumn\" class=\"detail-row\"></tr>\r\n    </ng-container>    \r\n    <mat-header-row class=\"header\" [@tableAnimation] *matHeaderRowDef=\"displayedColumns; sticky: sticky\" [style.top.px]=\"inverseOfTranslation\"></mat-header-row >\r\n    <mat-header-row class=\"progress\" *matHeaderRowDef=\"progressColumn; sticky: sticky\" [style.top.px]=\"inverseOfTranslation + headerHeight - 5\" ></mat-header-row>\r\n  </mat-table> \r\n</cdk-virtual-scroll-viewport>\r\n<mat-paginator\r\n  *ngIf=\"pagingMode !== 'none'\"\r\n  class=\"table-paginator\"\r\n  [length]=\"pagination?.length\"\r\n  [pageSize]=\"pagination?.pageSize\"\r\n  [pageIndex]=\"pagination?.pageIndex\"\r\n  (page)=\"pagination_onChange($event)\"\r\n  [pageSizeOptions]=\"pagination?.pageSizeOptions\">\r\n</mat-paginator>\r\n<ng-content></ng-content>\r\n \r\n<div class=\"no-records\" *ngIf=\"showNoData === true && (!tvsDataSource || tvsDataSource.data.length === 0)\">\r\n  <!-- <mat-icon>web</mat-icon>  -->\r\n  {{ languagePack?.tableLabels.NoData }}  \r\n  <br>\r\n  <button *ngIf=\"showReload\" mat-icon-button color=\"primary\" (click)=\"reload_onClick()\"><mat-icon>autorenew</mat-icon></button>\r\n</div>\r\n\r\n<!-- Context Menu -->\r\n<div style=\"visibility: hidden; position: fixed\"  \r\n  [style.left]=\"contextMenuPosition.x\"\r\n  [style.top]=\"contextMenuPosition.y\"\r\n  [matMenuTriggerFor]=\"contextMenu\">\r\n</div>\r\n<mat-menu #contextMenu=\"matMenu\">\r\n\t<ng-template matMenuContent let-item=\"item\">\t\t\r\n    <ng-container *ngFor=\"let menu of contextMenuItems\">\r\n      <button mat-button [class.ltr-menu]=\"tableSetting.direction === 'rtl'\" [color]=\"menu.color\" class=\"button-menu\" \r\n        [disabled]=\"menu.disabled\" (click)=\"onContextMenuItemClick(menu)\">\r\n         <mat-icon>{{menu.icon}}</mat-icon>\r\n        <span [class.text-align-right]=\"tableSetting.direction === 'rtl'\" class=\"text-align-left\">{{menu.text}}</span>\r\n      </button>\r\n      <mat-divider *ngIf=\"menu.divider === true\"></mat-divider>\r\n    </ng-container>    \r\n\t</ng-template>\r\n</mat-menu>",
                    animations: [tableAnimation, expandAnimation],
                    // changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [
                        { provide: MAT_TOOLTIP_DEFAULT_OPTIONS, useValue: cellTooltipDefaults }
                    ],
                    styles: ["@media print{.printpreview{background-color:#fff;position:fixed;width:100%;height:auto;z-index:99999999;margin:0;padding:0;top:0;left:0;overflow:visible;display:block}}.disable-backdrop-click .cdk-overlay-backdrop.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{pointer-events:none}:host{display:flex;flex-direction:column;table-layout:fixed;min-height:200px;position:relative;overflow:auto;transition:.3s cubic-bezier(.46,-.72,.46,1.54);background-color:#f3f3f3;border:2px #009688}mat-cell:first-of-type,mat-footer-cell:first-of-type,mat-header-cell:first-of-type:not(.row-checkbox){padding-left:0!important}.rtl-cell{padding-right:20px}.ltr-cell{padding-left:20px}.viewport{height:calc(100% - 0px)}.viewport-with-pagination{height:calc(100% - 48px)}.table-paginator{position:sticky;bottom:0;display:flex;max-height:48px;align-items:center;overflow:hidden;direction:ltr}mat-footer-row,mat-row{min-height:auto!important}mat-footer-row,mat-row,tr.mat-header-row{display:flex;border-width:0 0 1px;border-bottom-color:#d2d2d2;border-style:solid;align-items:center;box-sizing:border-box}mat-cell,mat-footer-cell,mat-header-cell{align-self:stretch;color:inherit;background-color:inherit}.mat-table .row-selection{background-color:#f7f5f5}.mat-table .mat-row:hover{background-color:#fafafa}.mat-header-row.progress{border:none;max-height:4px;min-height:4px;height:0;margin-top:-4px;background-color:transparent}.mat-header-row.progress .mat-header-cell{border:0;padding:0}.mat-header-row.progress mat-progress-bar{transition:height .3s,opacity .25s linear}.mat-header-row.progress mat-progress-bar:not(.show){height:0;opacity:0}.no-records{display:flex;align-items:center;top:50%;left:50%;margin:-42px 0 0 -25px;line-height:42px;position:absolute;z-index:1;pointer-events:none}.no-records button{pointer-events:initial}::ng-deep .dmf{min-width:100%}::ng-deep dynamic-mat-table cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper .mat-table mat-row .mat-cell mat-form-field{max-width:100%}::ng-deep dynamic-mat-table cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper .mat-table mat-row .mat-cell mat-form-field .mat-form-field-wrapper{padding-bottom:0!important}::ng-deep dynamic-mat-table cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper .mat-table mat-row .mat-cell mat-form-field ::ng-deep .mat-form-field-underline{bottom:0!important}.ltr-menu span{float:left}.button-menu{width:100%;line-height:48px}.button-menu::ng-deep .mat-button-wrapper{display:flex}.button-menu::ng-deep .mat-button-wrapper span{display:inline-block;width:100%;text-align:left}.button-menu::ng-deep .mat-button-wrapper mat-icon{line-height:48px;height:48px;margin:0 5px}mat-button-wrapper .button-menu{display:inline-block!important}.text-align-left{text-align:left!important}.text-align-right{text-align:right!important}.mat-menu-panel{min-height:unset!important}cdk-virtual-scroll-viewport{min-height:100px;height:inherit;overflow:auto}.header-caption{font-weight:bolder;font-size:14px}.header{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff}.row-checkbox{display:contents}.row-checkbox mat-checkbox{padding:15px}.row-checkbox mat-icon{padding:15px!important}.table-menu{max-width:42px;min-width:initial;padding:0!important;background-color:inherit}:host .mat-header-row>.mat-header-cell:hover .column-icon{opacity:0;transform:translateY(5px);transition:.2s}mat-header-cell:hover .left-resizer-handler,mat-header-cell:hover .right-resizer-handler{height:calc(100% - 10px);transition:height .2s ease-out}.left-resizer-handler{display:inline-block;min-width:3px;height:0;border:solid #d2d2d2;position:sticky;cursor:col-resize;border-width:0 0 0 1px;left:0}.right-resizer-handler{display:inline-block;min-width:3px;height:0;border:solid #d2d2d2;position:sticky;cursor:col-resize;border-width:0 1px 0 0;right:0}.active-resize{background-color:#f5f5f566}.drag-indicator{position:absolute;color:rgba(0,0,0,.3);display:flex;opacity:0;transform:translateY(-5px);transition-duration:.4s;transition-property:opacity,transform;cursor:move}:host .mat-header-row>.mat-header-cell:hover .drag-indicator{opacity:1;pointer-events:fill;transform:translateY(0)}.drag-indicator:hover{color:#bfc0c0!important}.cdk-drag-preview{color:#000;min-height:55px;border:1px solid #d4d4d4;background-color:#f5f5f5;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{border:1px dotted #9c9c9c;background-color:#d3d3d3;content:none}.cdk-drag-animating,.cdk-drop-list-dragging{transition:transform 250ms cubic-bezier(0,0,.2,1)}.detail-row{height:0;display:inline!important;width:100%}.table-row:not(.expanded-row):hover{background:#f5f5f5}.table-row:not(.expanded-row):active{background:#efefef}.table-row mat-cell{border-bottom-width:0}.expanded-detail{overflow:hidden;display:flex;background-color:#fafafa}.expanded-detail-cell{display:block;border-width:0;padding:0!important;width:100%;z-index:2}::ng-deep .cell-tooltip{padding:8px;font-size:12px;min-width:100px;text-align:center;margin-right:-20px}"]
                }] }
    ];
    /** @nocollapse */
    DynamicMatTableComponent.ctorParameters = function () { return [
        { type: MatDialog },
        { type: Renderer2 },
        { type: TableIntl },
        { type: TableService },
        { type: ChangeDetectorRef },
        { type: OverlayContainer }
    ]; };
    DynamicMatTableComponent.propDecorators = {
        tbl: [{ type: ViewChild, args: ['tbl', { static: true },] }],
        setting: [{ type: Input }],
        contextMenu: [{ type: ViewChild, args: [MatMenuTrigger,] }],
        printRef: [{ type: ViewChild, args: ['printRef', { static: true },] }],
        printContentRef: [{ type: ViewChild, args: ['printContentRef', { static: true },] }],
        headerFilterList: [{ type: ContentChildren, args: [HeaderFilterComponent,] }]
    };
    return DynamicMatTableComponent;
}(TableCoreDirective));
export { DynamicMatTableComponent };
if (false) {
    /** @type {?} */
    DynamicMatTableComponent.prototype.tbl;
    /** @type {?} */
    DynamicMatTableComponent.prototype.contextMenu;
    /** @type {?} */
    DynamicMatTableComponent.prototype.contextMenuPosition;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printRef;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printContentRef;
    /** @type {?} */
    DynamicMatTableComponent.prototype.headerFilterList;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.dragDropData;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.eventsSubscription;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printing;
    /** @type {?} */
    DynamicMatTableComponent.prototype.printTemplate;
    /** @type {?} */
    DynamicMatTableComponent.prototype.resizeColumn;
    /** @type {?} */
    DynamicMatTableComponent.prototype.resizableMousemove;
    /** @type {?} */
    DynamicMatTableComponent.prototype.resizableMouseup;
    /** @type {?} */
    DynamicMatTableComponent.prototype.indexTrackFn;
    /** @type {?} */
    DynamicMatTableComponent.prototype.currentContextMenuSender;
    /** @type {?} */
    DynamicMatTableComponent.prototype.dialog;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.renderer;
    /** @type {?} */
    DynamicMatTableComponent.prototype.languagePack;
    /** @type {?} */
    DynamicMatTableComponent.prototype.tableService;
    /** @type {?} */
    DynamicMatTableComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    DynamicMatTableComponent.prototype.overlayContainer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pYy1tYXQtdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vZHluYW1pYy1tYXQtdGFibGUvIiwic291cmNlcyI6WyJsaWIvZHluYW1pYy1tYXQtdGFibGUvZHluYW1pYy1tYXQtdGFibGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQ1QsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBMkIsaUJBQWlCLEVBQUUsS0FBSyxFQUFhLGVBQWUsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN2SyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNuRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFLM0QsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFDcEYsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3JELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGtEQUFrRCxDQUFDO0FBQzdGLE9BQU8sRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNqRyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBRXhELE9BQU8sRUFBNkIsZUFBZSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRWxELE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUd2QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFeEQs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N0MsU0FBUyxFQUFFO3dCQUNULEVBQUMsT0FBTyxFQUFFLDJCQUEyQixFQUFFLFFBQVEsRUFBRSxtQkFBbUIsRUFBQztxQkFDdEU7O2lCQUNGOzs7O2dCQTVEUSxTQUFTO2dCQVJzQyxTQUFTO2dCQVl4RCxTQUFTO2dCQVZULFlBQVk7Z0JBRnVFLGlCQUFpQjtnQkFzQnBHLGdCQUFnQjs7O3NCQWdEdEIsU0FBUyxTQUFDLEtBQUssRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUM7MEJBQy9CLEtBQUs7OEJBa0JMLFNBQVMsU0FBQyxjQUFjOzJCQUV4QixTQUFTLFNBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtrQ0FDdEMsU0FBUyxTQUFDLGlCQUFpQixFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTttQ0FDN0MsZUFBZSxTQUFDLHFCQUFxQjs7SUEyWXhDLCtCQUFDO0NBQUEsQUE5YUQsQ0FXa0Usa0JBQWtCLEdBbWFuRjtTQW5hWSx3QkFBd0I7OztJQUNuQyx1Q0FBc0M7O0lBbUJ0QywrQ0FBdUQ7O0lBQ3ZELHVEQUFvRDs7SUFDcEQsNENBQXNFOztJQUN0RSxtREFBOEU7O0lBQzlFLG9EQUE2Rjs7Ozs7SUFDN0YsZ0RBQWtFOzs7OztJQUNsRSxzREFBeUM7O0lBQ3pDLDRDQUFnQjs7SUFDaEIsaURBQXVDOztJQUN2QyxnREFBZ0Q7O0lBRWhELHNEQUErQjs7SUFDL0Isb0RBQTZCOztJQXdCN0IsZ0RBRUU7O0lBZ0lGLDREQUFtQzs7SUF2SmpDLDBDQUF3Qjs7Ozs7SUFDeEIsNENBQTJCOztJQUMzQixnREFBOEI7O0lBQzlCLGdEQUFpQzs7SUFDakMsdUNBQTZCOzs7OztJQUM3QixvREFBMEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCxcclxuICAgICAgICAgUXVlcnlMaXN0LCBFbGVtZW50UmVmLCBWaWV3Q2hpbGQsIFRlbXBsYXRlUmVmLCBSZW5kZXJlcjIsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5wdXQsIE9uRGVzdHJveSwgQ29udGVudENoaWxkcmVufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVGFibGVDb3JlRGlyZWN0aXZlIH0gZnJvbSAnLi4vY29yZXMvdGFibGUuY29yZS5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBUYWJsZVNlcnZpY2UgfSBmcm9tICcuL2R5bmFtaWMtbWF0LXRhYmxlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBUYWJsZVJvdyB9IGZyb20gJy4uL21vZGVscy90YWJsZS1yb3cubW9kZWwnO1xyXG5pbXBvcnQgeyBUYWJsZUZpZWxkIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLWZpZWxkLm1vZGVsJztcclxuaW1wb3J0IHsgQWJzdHJhY3RGaWx0ZXIgfSBmcm9tICcuL2V4dGVuc2lvbnMvZmlsdGVyL2NvbXBhcmUvYWJzdHJhY3QtZmlsdGVyJztcclxuaW1wb3J0IHsgVGFibGVQYWdpbmF0aW9uIH0gZnJvbSAnLi4vbW9kZWxzL3RhYmxlLXBhZ2luYXRpb24ubW9kZWwnO1xyXG5pbXBvcnQgeyBIZWFkZXJGaWx0ZXJDb21wb25lbnQgfSBmcm9tICcuL2V4dGVuc2lvbnMvZmlsdGVyL2hlYWRlci1maWx0ZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcclxuaW1wb3J0IHsgUHJpbnRUYWJsZURpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4vZXh0ZW5zaW9ucy9wcmludC1kaWFsb2cvcHJpbnQtZGlhbG9nLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IHRyaWdnZXIsIHRyYW5zaXRpb24sIHN0eWxlLCBhbmltYXRlLCBxdWVyeSwgc3RhZ2dlciwgc3RhdGUgfSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcclxuaW1wb3J0IHsgUmVzaXplQ29sdW1uIH0gZnJvbSAnLi4vbW9kZWxzL3Jlc2l6ZS1jb2x1bW4ubW9kZSc7XHJcbmltcG9ydCB7IFRhYmxlSW50bCB9IGZyb20gJy4uL2ludGVybmF0aW9uYWwvdGFibGUtSW50bCc7XHJcbmltcG9ydCB7IFRhYmxlTWVudUFjdGlvbkNoYW5nZSB9IGZyb20gJy4vZXh0ZW5zaW9ucy90YWJsZS1tZW51L3RhYmxlLW1lbnUuY29tcG9uZW50JztcclxuaW1wb3J0IHsgQ2RrRHJhZ0Ryb3AsIENka0RyYWdTdGFydCwgbW92ZUl0ZW1JbkFycmF5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2RyYWctZHJvcCc7XHJcbmltcG9ydCB7IGlzTnVsbG9yVW5kZWZpbmVkIH0gZnJvbSAnLi4vY29yZXMvdHlwZSc7XHJcbmltcG9ydCB7IFRhYmxlU2V0dGluZyB9IGZyb20gJy4uL21vZGVscy90YWJsZS1zZXR0aW5nLm1vZGVsJztcclxuaW1wb3J0IHsgZGVsYXkgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IEZpeGVkU2l6ZVRhYmxlVmlydHVhbFNjcm9sbFN0cmF0ZWd5IH0gZnJvbSAnLi4vY29yZXMvZml4ZWQtc2l6ZS10YWJsZS12aXJ0dWFsLXNjcm9sbC1zdHJhdGVneSc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBNYXRNZW51VHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL21lbnUnO1xyXG5pbXBvcnQgeyBDb250ZXh0TWVudUl0ZW0gfSBmcm9tICcuLi9tb2RlbHMvY29udGV4dC1tZW51Lm1vZGVsJztcclxuaW1wb3J0IHsgT3ZlcmxheUNvbnRhaW5lciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcclxuaW1wb3J0IHsgTWF0VG9vbHRpcERlZmF1bHRPcHRpb25zLCBNQVRfVE9PTFRJUF9ERUZBVUxUX09QVElPTlMgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC90b29sdGlwJztcclxuaW1wb3J0IHsgcmVxdWVzdEZ1bGxzY3JlZW4gfSBmcm9tICcuLi91dGlsaWVzL2h0bWwuaGVscGVyJztcclxuaW1wb3J0IHsgVGFibGVWaXJ0dWFsU2Nyb2xsRGF0YVNvdXJjZSB9IGZyb20gJy4uL2NvcmVzL3RhYmxlLWRhdGEtc291cmNlJztcclxuXHJcbmV4cG9ydCBjb25zdCB0YWJsZUFuaW1hdGlvbiA9IHRyaWdnZXIoJ3RhYmxlQW5pbWF0aW9uJywgW1xyXG4gIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcclxuICAgIHF1ZXJ5KCc6ZW50ZXInLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknLCBvcGFjaXR5OiAwIH0pLCB7XHJcbiAgICAgIC8vbGltaXQ6IDUsXHJcbiAgICAgIG9wdGlvbmFsOiB0cnVlLFxyXG4gICAgfSksXHJcbiAgICBxdWVyeSgnOmVudGVyJyxcclxuICAgICAgc3RhZ2dlcignMC4wMXMnLCBbXHJcbiAgICAgICAgYW5pbWF0ZSgnMC41cyBlYXNlJywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDAlKScsIG9wYWNpdHk6IDEgfSlcclxuICAgICAgICApLFxyXG4gICAgICBdKSxcclxuICAgICAgeyAgXHJcbiAgICAgICAgLy9saW1pdDogNSwgXHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWUgfVxyXG4gICAgKSxcclxuICBdKSxcclxuXSk7XHJcblxyXG5leHBvcnQgY29uc3QgZXhwYW5kQW5pbWF0aW9uID0gdHJpZ2dlcignZGV0YWlsRXhwYW5kJywgW1xyXG4gIHN0YXRlKCdjb2xsYXBzZWQnLCBzdHlsZSh7aGVpZ2h0OiAnMHB4JywgbWluSGVpZ2h0OiAnMCd9KSksXHJcbiAgc3RhdGUoJ2V4cGFuZGVkJywgc3R5bGUoe2hlaWdodDogJyonfSkpLFxyXG4gIHRyYW5zaXRpb24oJ2V4cGFuZGVkIDw9PiBjb2xsYXBzZWQnLCBhbmltYXRlKCcxMDBtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSknKSksXHJcbl0pOyBcclxuIFxyXG5leHBvcnQgY29uc3QgY2VsbFRvb2x0aXBEZWZhdWx0czogTWF0VG9vbHRpcERlZmF1bHRPcHRpb25zID0ge1xyXG4gIHNob3dEZWxheTogNTAwLFxyXG4gIGhpZGVEZWxheTogNDAwLFxyXG4gIHRvdWNoZW5kSGlkZURlbGF5OiAxMDAwLFxyXG4gIHBvc2l0aW9uOiAnYWJvdmUnLFxyXG59O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjb21wb25lbnQtc2VsZWN0b3JcclxuICBzZWxlY3RvcjogJ2R5bmFtaWMtbWF0LXRhYmxlJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vZHluYW1pYy1tYXQtdGFibGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2R5bmFtaWMtbWF0LXRhYmxlLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgYW5pbWF0aW9uczogW3RhYmxlQW5pbWF0aW9uLCBleHBhbmRBbmltYXRpb25dLCBcclxuICAvLyBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHtwcm92aWRlOiBNQVRfVE9PTFRJUF9ERUZBVUxUX09QVElPTlMsIHVzZVZhbHVlOiBjZWxsVG9vbHRpcERlZmF1bHRzfVxyXG4gIF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEeW5hbWljTWF0VGFibGVDb21wb25lbnQ8VCBleHRlbmRzIFRhYmxlUm93PiBleHRlbmRzIFRhYmxlQ29yZURpcmVjdGl2ZTxUPiBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICBAVmlld0NoaWxkKCd0YmwnLCB7c3RhdGljOiB0cnVlfSkgdGJsOyBcclxuICBASW5wdXQoKVxyXG4gIGdldCBzZXR0aW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudGFibGVTZXR0aW5nO1xyXG4gIH0gXHJcbiAgc2V0IHNldHRpbmcodmFsdWU6IFRhYmxlU2V0dGluZykgeyAgICBcclxuICAgIGlmICggIWlzTnVsbG9yVW5kZWZpbmVkKHZhbHVlKSApIHtcclxuICAgICAgdmFsdWUuY29sdW1uU2V0dGluZyA9IHZhbHVlLmNvbHVtblNldHRpbmcgfHwgdGhpcy50YWJsZVNldHRpbmcuY29sdW1uU2V0dGluZztcclxuICAgICAgdmFsdWUuYWx0ZXJuYXRpdmVSb3dTdHlsZSA9IHZhbHVlLmFsdGVybmF0aXZlUm93U3R5bGUgfHwgdGhpcy50YWJsZVNldHRpbmcuYWx0ZXJuYXRpdmVSb3dTdHlsZTtcclxuICAgICAgdmFsdWUuY29sdW1uU2V0dGluZyA9IHZhbHVlLmNvbHVtblNldHRpbmcgfHwgdGhpcy50YWJsZVNldHRpbmcuY29sdW1uU2V0dGluZztcclxuICAgICAgdmFsdWUuZGlyZWN0aW9uID0gdmFsdWUuZGlyZWN0aW9uIHx8IHRoaXMudGFibGVTZXR0aW5nLmRpcmVjdGlvbjtcclxuICAgICAgdmFsdWUubm9ybWFsUm93U3R5bGUgPSB2YWx1ZS5ub3JtYWxSb3dTdHlsZSB8fCB0aGlzLnRhYmxlU2V0dGluZy5ub3JtYWxSb3dTdHlsZTsgICAgICBcclxuICAgICAgdmFsdWUudmlzaWJhbGVBY3Rpb25NZW51ID0gdmFsdWUudmlzaWJhbGVBY3Rpb25NZW51IHx8IHRoaXMudGFibGVTZXR0aW5nLnZpc2liYWxlQWN0aW9uTWVudTtcclxuICAgICAgdmFsdWUudmlzaWJsZVRhYmxlTWVudSA9IHZhbHVlLnZpc2libGVUYWJsZU1lbnUgfHwgdGhpcy50YWJsZVNldHRpbmcudmlzaWJsZVRhYmxlTWVudTtcclxuICAgICAgdGhpcy50YWJsZVNldHRpbmcgPSB2YWx1ZTtcclxuICAgICAgdGhpcy5zZXREaXNwbGF5ZWRDb2x1bW5zKCk7XHJcbiAgICB9XHJcbiAgfSBcclxuXHJcbiAgQFZpZXdDaGlsZChNYXRNZW51VHJpZ2dlcikgY29udGV4dE1lbnU6IE1hdE1lbnVUcmlnZ2VyO1xyXG4gIHB1YmxpYyBjb250ZXh0TWVudVBvc2l0aW9uID0geyB4OiAnMHB4JywgeTogJzBweCcgfTsgIFxyXG4gIEBWaWV3Q2hpbGQoJ3ByaW50UmVmJywgeyBzdGF0aWM6IHRydWUgfSkgcHJpbnRSZWYgITogVGVtcGxhdGVSZWY8YW55PjtcclxuICBAVmlld0NoaWxkKCdwcmludENvbnRlbnRSZWYnLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcmludENvbnRlbnRSZWYgITogRWxlbWVudFJlZjtcclxuICBAQ29udGVudENoaWxkcmVuKEhlYWRlckZpbHRlckNvbXBvbmVudCkgaGVhZGVyRmlsdGVyTGlzdCAhOiBRdWVyeUxpc3Q8SGVhZGVyRmlsdGVyQ29tcG9uZW50PjsgIFxyXG4gIHByaXZhdGUgZHJhZ0Ryb3BEYXRhID0ge2RyYWdDb2x1bW5JbmRleDogLTEsIGRyb3BDb2x1bW5JbmRleDogLTF9O1xyXG4gIHByaXZhdGUgZXZlbnRzU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpbnRpbmcgPSB0cnVlO1xyXG4gIHByaW50VGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4gPSBudWxsO1xyXG4gIHJlc2l6ZUNvbHVtbjogUmVzaXplQ29sdW1uID0gbmV3IFJlc2l6ZUNvbHVtbigpO1xyXG4gIC8vIG1vdXNlIHJlc2l6ZVxyXG4gIHJlc2l6YWJsZU1vdXNlbW92ZTogKCkgPT4gdm9pZDtcclxuICByZXNpemFibGVNb3VzZXVwOiAoKSA9PiB2b2lkO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBkaWFsb2c6IE1hdERpYWxvZyxcclxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgIHB1YmxpYyBsYW5ndWFnZVBhY2s6IFRhYmxlSW50bCxcclxuICAgIHB1YmxpYyB0YWJsZVNlcnZpY2U6IFRhYmxlU2VydmljZSxcclxuICAgIHB1YmxpYyBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSBvdmVybGF5Q29udGFpbmVyOiBPdmVybGF5Q29udGFpbmVyXHJcbiAgKSB7XHJcbiAgICBzdXBlcih0YWJsZVNlcnZpY2UsIGNkcik7IFxyXG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyLmdldENvbnRhaW5lckVsZW1lbnQoKS5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PntcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy5ldmVudHNTdWJzY3JpcHRpb24gPSB0aGlzLnJlc2l6ZUNvbHVtbi53aWR0aFVwZGF0ZS5waXBlKGRlbGF5KDEwMCkpLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xyXG4gICAgICB0aGlzLmNvbHVtbnNbZGF0YS5pXS53aWR0aCA9IGRhdGEudztcclxuICAgICAgaWYgKHRoaXMudGFibGVTZXR0aW5nLmNvbHVtblNldHRpbmdbZGF0YS5pXSkge1xyXG4gICAgICAgIHRoaXMudGFibGVTZXR0aW5nLmNvbHVtblNldHRpbmdbZGF0YS5pXS53aWR0aCA9IGRhdGEudztcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnJlZnJlc2hHcmlkKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGluZGV4VHJhY2tGbiA9IChpbmRleDogbnVtYmVyKSA9PiB7ICAgIFxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH07XHJcblxyXG4gIHRyYWNrQ29sdW1uKGluZGV4OiBudW1iZXIsIGl0ZW06IFRhYmxlRmllbGQ8VD4pOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGAke2l0ZW0uaW5kZXh9YDtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQgeyAgICBcclxuICAgIGlmICh0aGlzLmV2ZW50c1N1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLmV2ZW50c1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlZnJlc2hVSSgpIHtcclxuICAgIGNvbnN0IHNjcm9sbFN0cmF0ZWd5OiBGaXhlZFNpemVUYWJsZVZpcnR1YWxTY3JvbGxTdHJhdGVneSA9IHRoaXMudmlld3BvcnRbJ19zY3JvbGxTdHJhdGVneSddOyAgICAgICAgXHJcbiAgICBzY3JvbGxTdHJhdGVneT8udmlld3BvcnQ/LmNoZWNrVmlld3BvcnRTaXplKCk7XHJcbiAgICBzY3JvbGxTdHJhdGVneT8udmlld3BvcnQ/LnNjcm9sbFRvT2Zmc2V0KDApOyAgICBcclxuICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkgeyAgICBcclxuICAgIGNvbnN0IHNjcm9sbFN0cmF0ZWd5OiBGaXhlZFNpemVUYWJsZVZpcnR1YWxTY3JvbGxTdHJhdGVneSA9IHRoaXMudmlld3BvcnRbJ19zY3JvbGxTdHJhdGVneSddO1xyXG5cclxuICAgIHNjcm9sbFN0cmF0ZWd5Lm9mZnNldENoYW5nZS5zdWJzY3JpYmUob2Zmc2V0ID0+IHsgICAgICBcclxuICAgICAgLy8gY29uc29sZS5sb2cob2Zmc2V0KTtcclxuICAgIH0pXHJcbiAgICB0aGlzLnZpZXdwb3J0LnJlbmRlcmVkUmFuZ2VTdHJlYW0uc3Vic2NyaWJlKCB0ID0+IHtcclxuICAgICAgLy8gaW4gZXhwYW5kaW5nIHJvdyBzY3JvbGxpbmcgbWFrZSBub3QgZ29vZCBhcHBlcmFuY2UgdGhlcmVmb3IgY2xvc2UgaXQuXHJcbiAgICAgIGlmICh0aGlzLmV4cGFuZGVkRWxlbWVudCAmJiB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24gJiYgdGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uLmV4cGFuZCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjbGVhcicsIHQpOyBcclxuICAgICAgICAvLyB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24uZXhwYW5kID0gZmFsc2U7XHJcbiAgICAgICAgLy8gdGhpcy5leHBhbmRlZEVsZW1lbnQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy50dnNEYXRhU291cmNlLnBhZ2luYXRvciA9IHRoaXMucGFnaW5hdG9yO1xyXG4gICAgdGhpcy50dnNEYXRhU291cmNlLnNvcnQgPSB0aGlzLnNvcnQ7ICAgIFxyXG4gICAgdGhpcy5kYXRhU291cmNlLnN1YnNjcmliZSh4ID0+IHtcclxuICAgICAgLy9jb25zb2xlLmxvZyh4KTsgICAgICBcclxuICAgICAgdGhpcy5pbml0U3lzdGVtRmllbGQoeCk7XHJcbiAgICAgIHRoaXMudHZzRGF0YVNvdXJjZS5kYXRhID0geDtcclxuICAgICAgLy8gdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFVJKCk7XHJcbiAgICAgIH0sIDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy50dnNEYXRhU291cmNlLnNvcnQuc29ydENoYW5nZS5zdWJzY3JpYmUoc29ydCA9PiB7XHJcbiAgICAgIHRoaXMucGFnaW5hdGlvbi5wYWdlSW5kZXggPSAwO1xyXG4gICAgICB0aGlzLm9uVGFibGVFdmVudC5lbWl0KHsgZXZlbnQ6ICdTb3J0Q2hhbmdlZCcsIHNlbmRlcjogc29ydCB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gdGhpcy5kYXRhU291cmNlLmRhdGFPZlJhbmdlJC5zdWJzY3JpYmUoKGRhdGEpID0+IHtcclxuICAgIC8vICAgLy8gY29uc29sZS5sb2coJ2RhdGFPZlJhbmdlJyk7XHJcbiAgICAvLyB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaW52ZXJzZU9mVHJhbnNsYXRpb24oKTogbnVtYmVyIHtcclxuICAgIGlmICghdGhpcy52aWV3cG9ydCB8fCAhdGhpcy52aWV3cG9ydFtcIl9yZW5kZXJlZENvbnRlbnRPZmZzZXRcIl0pIHtcclxuICAgICAgcmV0dXJuIC0wO1xyXG4gICAgfVxyXG4gICAgbGV0IG9mZnNldCA9IHRoaXMudmlld3BvcnRbXCJfcmVuZGVyZWRDb250ZW50T2Zmc2V0XCJdO1xyXG4gICAgcmV0dXJuIC1vZmZzZXQ7XHJcbiAgfSAgIFxyXG5cclxuICAvLyBUTyBET1xyXG4gIGVsbGlwc2lzKGNlbGxSZWYpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGNlbGxSZWYuY2xpZW50SGVpZ2h0KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGNlbGxSZWYuc2Nyb2xsSGVpZ2h0KTtcclxuICAgIGlmIChjZWxsUmVmLmNsaWVudEhlaWdodCA+IHRoaXMucm93SGVpZ2h0KSB7XHJcbiAgICAgIGNlbGxSZWYuc3R5bGUubWF4SGVpZ2h0ID0gJzQ4cHgnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcm93U3R5bGUocm93KSB7XHJcbiAgICBsZXQgc3R5bGU6IGFueSA9ICByb3c/Lm9wdGlvbj8uc3R5bGUgfHwge307XHJcbiAgICBpZiAodGhpcy5zZXR0aW5nLmFsdGVybmF0aXZlUm93U3R5bGUgJiYgcm93LmlkICUgMiA9PT0gMCkge1xyXG4gICAgICAvLyBzdHlsZSBpcyBoaWdoIHByaW9yaXR5XHJcbiAgICAgIHN0eWxlID0geyAuLi50aGlzLnNldHRpbmcuYWx0ZXJuYXRpdmVSb3dTdHlsZSAsLi4uc3R5bGV9O1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2V0dGluZy5yb3dTdHlsZSkge1xyXG4gICAgICBzdHlsZSA9IHsgLi4udGhpcy5zZXR0aW5nLnJvd1N0eWxlICwuLi5zdHlsZX07XHJcbiAgICB9ICAgIFxyXG4gICAgcmV0dXJuIHN0eWxlO1xyXG4gIH1cclxuXHJcbiAgY2VsbENsYXNzKG9wdGlvbiwgY29sdW1uKSB7XHJcbiAgICBsZXQgY2xhcyA9IG51bGw7XHJcbiAgICBpZiAob3B0aW9uICYmIGNvbHVtbi5uYW1lKSB7XHJcbiAgICAgIGNsYXMgPSBvcHRpb25bY29sdW1uLm5hbWVdID8gb3B0aW9uW2NvbHVtbi5uYW1lXS5zdHlsZSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmICggY2xhcyA9PT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gY29sdW1uLmNlbGxDbGFzcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7Li4uY2xhcywgLi4uY29sdW1uLmNlbGxDbGFzc307XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjZWxsU3R5bGUob3B0aW9uLCBjb2x1bW4pIHtcclxuICAgIGxldCBzdHlsZSA9IG51bGw7XHJcbiAgICBpZiAob3B0aW9uICYmIGNvbHVtbi5uYW1lKSB7XHJcbiAgICAgIHN0eWxlID0gb3B0aW9uW2NvbHVtbi5uYW1lXSA/IG9wdGlvbltjb2x1bW4ubmFtZV0uc3R5bGUgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIHN0eWxlID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBjb2x1bW4uY2VsbFN0eWxlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsuLi5zdHlsZSwgLi4uY29sdW1uLmNlbGxTdHlsZX07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjZWxsSWNvbihvcHRpb24sIGNlbGxOYW1lKSB7XHJcbiAgICBpZiAob3B0aW9uICYmIGNlbGxOYW1lKSB7XHJcbiAgICAgIHJldHVybiBvcHRpb25bY2VsbE5hbWVdID8gb3B0aW9uW2NlbGxOYW1lXS5pY29uIDogbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSAgICBcclxuICB9XHJcblxyXG4gIGZpbHRlcl9vbkNoYW5nZWQoY29sdW1uOiBUYWJsZUZpZWxkPFQ+LCBmaWx0ZXI6IEFic3RyYWN0RmlsdGVyW10pIHtcclxuICAgIHRoaXMucGVuZGluZyA9IHRydWU7XHJcbiAgICB0aGlzLnR2c0RhdGFTb3VyY2Uuc2V0RmlsdGVyKGNvbHVtbi5uYW1lLCBmaWx0ZXIpLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgIHRoaXMucGVuZGluZyA9IGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjdXJyZW50Q29udGV4dE1lbnVTZW5kZXI6IGFueSA9IHt9O1xyXG4gIG9uQ29udGV4dE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIGNvbHVtbjogVGFibGVGaWVsZDxUPiwgcm93OiBhbnkpIHsgICAgXHJcbiAgICBpZih0aGlzLmN1cnJlbnRDb250ZXh0TWVudVNlbmRlcj8udGltZSAmJiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLmN1cnJlbnRDb250ZXh0TWVudVNlbmRlci50aW1lKSA8IDUwMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnRleHRNZW51LmNsb3NlTWVudSgpO1xyXG4gICAgaWYgKHRoaXMuY29udGV4dE1lbnVJdGVtcz8ubGVuZ3RoID09PSAwICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5jb250ZXh0TWVudVBvc2l0aW9uLnggPSBldmVudC5jbGllbnRYICsgJ3B4JztcclxuICAgIHRoaXMuY29udGV4dE1lbnVQb3NpdGlvbi55ID0gZXZlbnQuY2xpZW50WSArICdweCc7XHJcbiAgICB0aGlzLmN1cnJlbnRDb250ZXh0TWVudVNlbmRlciA9IHsgY29sdW1uOiBjb2x1bW4sIHJvdzogcm93LCB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKX07XHJcbiAgICB0aGlzLmNvbnRleHRNZW51Lm1lbnVEYXRhID0gdGhpcy5jdXJyZW50Q29udGV4dE1lbnVTZW5kZXI7XHJcbiAgICB0aGlzLmNvbnRleHRNZW51Lm1lbnUuZm9jdXNGaXJzdEl0ZW0oJ21vdXNlJyk7ICAgIFxyXG4gICAgdGhpcy5vblJvd0V2ZW50LmVtaXQoeyBldmVudDogJ0JlZm9yQ29udGV4dE1lbnVPcGVuJywgc2VuZGVyOiB7cm93OiByb3csIGNvbHVtbjogY29sdW1uLCBjb250ZXh0TWVudTogdGhpcy5jb250ZXh0TWVudUl0ZW1zfX0pO1xyXG4gICAgdGhpcy5jb250ZXh0TWVudS5vcGVuTWVudSgpO1xyXG4gIH1cclxuXHJcbiAgb25Db250ZXh0TWVudUl0ZW1DbGljayhkYXRhOiBDb250ZXh0TWVudUl0ZW0pIHsgICAgXHJcbiAgICB0aGlzLmNvbnRleHRNZW51Lm1lbnVEYXRhLml0ZW0gPSBkYXRhO1xyXG4gICAgdGhpcy5vblJvd0V2ZW50LmVtaXQoeyBldmVudDogJ0NvbnRleHRNZW51Q2xpY2snLCBzZW5kZXI6IHRoaXMuY29udGV4dE1lbnUubWVudURhdGEgfSk7XHJcbiAgfVxyXG5cclxuICB0YWJsZU1lbnVBY3Rpb25DaGFuZ2UoZTogVGFibGVNZW51QWN0aW9uQ2hhbmdlKSB7XHJcbiAgICBpZiAoZS50eXBlID09PSAnVGFibGVTZXR0aW5nJykgeyAgICAgIFxyXG4gICAgICAgdGhpcy5zYXZlU2V0dGluZyhlLmRhdGEsIGZhbHNlKTtcclxuICAgIH0gZWxzZSBpZihlLnR5cGUgPT09ICdGdWxsU2NyZWVuTW9kZScpIHtcclxuICAgICAgcmVxdWVzdEZ1bGxzY3JlZW4odGhpcy50YmwuZWxlbWVudFJlZik7XHJcbiAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ0Rvd25sb2FkJykge1xyXG4gICAgICBpZiAoZS5kYXRhID09PSAnQ1NWJykge1xyXG4gICAgICAgIHRoaXMudGFibGVTZXJ2aWNlLmV4cG9ydFRvQ3N2PFQ+KFxyXG4gICAgICAgICAgdGhpcy5jb2x1bW5zLFxyXG4gICAgICAgICAgdGhpcy50dnNEYXRhU291cmNlLmZpbHRlcmVkRGF0YSxcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9uTW9kZWxcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2UgaWYgKGUuZGF0YSA9PT0gJ0pTT04nKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZVNlcnZpY2UuZXhwb3J0VG9Kc29uKHRoaXMudHZzRGF0YVNvdXJjZS5maWx0ZXJlZERhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ0ZpbHRlckNsZWFyJykge1xyXG4gICAgICB0aGlzLnR2c0RhdGFTb3VyY2UuY2xlYXJGaWx0ZXIoKTtcclxuICAgICAgdGhpcy5oZWFkZXJGaWx0ZXJMaXN0LmZvckVhY2goKGhmKSA9PiBoZi5jbGVhckNvbHVtbl9PbkNsaWNrKCkpO1xyXG4gICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICdQcmludCcpIHtcclxuICAgICAgdGhpcy5wcmludENvbmZpZy5kaXNwbGF5ZWRGaWVsZHMgPSB0aGlzLmNvbHVtbnNcclxuICAgICAgICAuZmlsdGVyKChjKSA9PiBpc051bGxvclVuZGVmaW5lZChjLnByaW50YWJsZSkgfHwgYy5wcmludGFibGUgPT09IHRydWUpXHJcbiAgICAgICAgLm1hcCgobykgPT4gby5uYW1lKTtcclxuICAgICAgdGhpcy5wcmludENvbmZpZy50aXRsZSA9IHRoaXMucHJpbnRDb25maWcudGl0bGUgfHwgdGhpcy50YWJsZU5hbWU7XHJcbiAgICAgIHRoaXMucHJpbnRDb25maWcuZGlyZWN0aW9uID0gdGhpcy50YWJsZVNldHRpbmcuZGlyZWN0aW9uIHx8ICdsdHInO1xyXG4gICAgICB0aGlzLnByaW50Q29uZmlnLmNvbHVtbnMgPSB0aGlzLnRhYmxlQ29sdW1ucztcclxuICAgICAgdGhpcy5wcmludENvbmZpZy5kYXRhID0gdGhpcy50dnNEYXRhU291cmNlLmZpbHRlcmVkRGF0YTtcclxuICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy50dnNEYXRhU291cmNlLnRvVHJhbnNsYXRlKCk7XHJcbiAgICAgIHRoaXMucHJpbnRDb25maWcudGFibGVQcmludFBhcmFtZXRlcnMgPSBbXTtcclxuICAgICAgcGFyYW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICB0aGlzLnByaW50Q29uZmlnLnRhYmxlUHJpbnRQYXJhbWV0ZXJzLnB1c2goaXRlbSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5kaWFsb2cub3BlbihQcmludFRhYmxlRGlhbG9nQ29tcG9uZW50LCB7XHJcbiAgICAgICAgd2lkdGg6ICc5MHZ3JyxcclxuICAgICAgICBkYXRhOiB0aGlzLnByaW50Q29uZmlnLFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnU2F2ZVNldHRpbmcnKSB7XHJcbiAgICAgIHRoaXMuc2F2ZVNldHRpbmcobnVsbCwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByb3dNZW51QWN0aW9uQ2hhbmdlKGNvbnRleHRNZW51SXRlbTogQ29udGV4dE1lbnVJdGVtLCByb3c6IGFueSkge1xyXG4gICAgY29uc29sZS5sb2coJ2NvbnRleHRNZW51SXRlbScpOyAgICBcclxuICAgIHRoaXMub25Sb3dFdmVudC5lbWl0KHsgZXZlbnQ6ICdSb3dBY3Rpb25NZW51Jywgc2VuZGVyOiB7cm93OiByb3csIGFjdGlvbjogY29udGV4dE1lbnVJdGVtfX0pO1xyXG4gICAgLy8gdGhpcy5yb3dBY3Rpb25NZW51Q2hhbmdlLmVtaXQoe2FjdGlvbkl0ZW06IGNvbnRleHRNZW51SXRlbSwgcm93SXRlbTogcm93IH0pO1xyXG4gIH1cclxuXHJcbiAgZG9SZW5kZXJpbmcoZSkge1xyXG4gICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICBpZiAodGhpcy52aWV3cG9ydC5nZXRWaWV3cG9ydFNpemUoKSA9PT0gMCkge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZygnemVybycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGFnaW5hdGlvbl9vbkNoYW5nZShlOiBUYWJsZVBhZ2luYXRpb24pIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcclxuICAgIHRoaXMudHZzRGF0YVNvdXJjZS5yZWZyZXNoRmlsdGVyUHJlZGljYXRlKCk7IC8vIHBhZ2luYXRpb24gQnVnZml4ZWRcclxuICAgIHRoaXMucGFnaW5hdGlvbkNoYW5nZS5lbWl0KGUpO1xyXG4gIH0gXHJcblxyXG4gIHJlbG9hZF9vbkNsaWNrKCl7XHJcbiAgICB0aGlzLm9uVGFibGVFdmVudC5lbWl0KHsgc2VuZGVyOiBudWxsLCBldmVudDogJ1JlbG9hZERhdGEnfSk7XHJcbiAgfVxyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICBvblJlc2l6ZUNvbHVtbihldmVudDogYW55LCBpbmRleDogbnVtYmVyLCB0eXBlOiAnbGVmdCcgfCAncmlnaHQnKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhpbmRleCx0eXBlKTsgICAgXHJcbiAgICB0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyID0gdHlwZTtcclxuICAgIHRoaXMucmVzaXplQ29sdW1uLnN0YXJ0WCA9IGV2ZW50LnBhZ2VYO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5yZXNpemVDb2x1bW4ucmVzaXplSGFuZGxlciwgdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRYKTtcclxuICAgIGlmICh0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyID09PSAncmlnaHQnKSB7XHJcbiAgICAgIHRoaXMucmVzaXplQ29sdW1uLnN0YXJ0V2lkdGggPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgdGhpcy5yZXNpemVDb2x1bW4uY3VycmVudFJlc2l6ZUluZGV4ID0gaW5kZXg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyA9PT0gbnVsbCkge1xyXG4gICAgICAgIC8vIGZvciBmaXJzdCBjb2x1bW4gbm90IHJlc2l6ZVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbi5zdGFydFdpZHRoID1cclxuICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5yZXNpemVDb2x1bW4uY3VycmVudFJlc2l6ZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLm1vdXNlTW92ZShpbmRleCk7XHJcbiAgfVxyXG5cclxuICBtb3VzZU1vdmUoaW5kZXg6IG51bWJlcikge1xyXG4gICAgdGhpcy5yZXNpemFibGVNb3VzZW1vdmUgPSB0aGlzLnJlbmRlcmVyLmxpc3RlbihcclxuICAgICAgJ2RvY3VtZW50JyxcclxuICAgICAgJ21vdXNlbW92ZScsXHJcbiAgICAgIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZUNvbHVtbi5yZXNpemVIYW5kbGVyICE9PSBudWxsICYmIGV2ZW50LmJ1dHRvbnMpIHtcclxuICAgICAgICAgIGNvbnN0IHJ0bCA9IHRoaXMuZGlyZWN0aW9uID09PSAncnRsJyA/IC0xIDogMTtcclxuICAgICAgICAgIGxldCB3aWR0aCA9IDA7XHJcbiAgICAgICAgICBpZiAodGhpcy5yZXNpemVDb2x1bW4ucmVzaXplSGFuZGxlciA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBjb25zdCBkeCA9IGV2ZW50LnBhZ2VYIC0gdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRYO1xyXG4gICAgICAgICAgICB3aWR0aCA9IHRoaXMucmVzaXplQ29sdW1uLnN0YXJ0V2lkdGggKyBydGwgKiBkeDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRYIC0gZXZlbnQucGFnZVg7XHJcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5yZXNpemVDb2x1bW4uc3RhcnRXaWR0aCAtIHJ0bCAqIGR4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCB0aGlzLnJlc2l6ZUNvbHVtbi5jdXJyZW50UmVzaXplSW5kZXggPT09IGluZGV4ICYmIHdpZHRoID4gdGhpcy5taW5XaWR0aCApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemVDb2x1bW4ud2lkdGhVcGRhdGUubmV4dCh7XHJcbiAgICAgICAgICAgICAgaTogaW5kZXggLSAodGhpcy5yZXNpemVDb2x1bW4ucmVzaXplSGFuZGxlciA9PT0gJ2xlZnQnID8gMSA6IDApLFxyXG4gICAgICAgICAgICAgIHc6IHdpZHRoLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLnJlc2l6YWJsZU1vdXNldXAgPSB0aGlzLnJlbmRlcmVyLmxpc3RlbihcclxuICAgICAgJ2RvY3VtZW50JyxcclxuICAgICAgJ21vdXNldXAnLFxyXG4gICAgICAoZXZlbnQpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5yZXNpemVDb2x1bW4ucmVzaXplSGFuZGxlciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgdGhpcy5yZXNpemVDb2x1bW4ucmVzaXplSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICB0aGlzLnJlc2l6ZUNvbHVtbi5jdXJyZW50UmVzaXplSW5kZXggPSAtMTsgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBleHBhbmRSb3cocm93SW5kZXg6IG51bWJlciwgbW9kZTogYm9vbGVhbiA9IHRydWUpIHsgICAgXHJcbiAgICBpZiggcm93SW5kZXggPT09IG51bGwgfHwgcm93SW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aHJvdyAnUm93IGluZGV4IGlzIG5vdCBkZWZpbmVkLic7ICAgICAgXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5leHBhbmRlZEVsZW1lbnQgPT09IHRoaXMudHZzRGF0YVNvdXJjZS5hbGxEYXRhW3Jvd0luZGV4XSkge1xyXG4gICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24uZXhwYW5kID0gbW9kZTsgICAgXHJcbiAgICAgIHRoaXMuZXhwYW5kZWRFbGVtZW50ID0gdGhpcy5leHBhbmRlZEVsZW1lbnQgPT09IHRoaXMudHZzRGF0YVNvdXJjZS5hbGxEYXRhW3Jvd0luZGV4XSA/IG51bGwgOiB0aGlzLnR2c0RhdGFTb3VyY2UuYWxsRGF0YVtyb3dJbmRleF07ICAgIFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuZXhwYW5kZWRFbGVtZW50ICYmIHRoaXMuZXhwYW5kZWRFbGVtZW50ICE9PSB0aGlzLnR2c0RhdGFTb3VyY2UuYWxsRGF0YVtyb3dJbmRleF0pIHtcclxuICAgICAgICB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24uZXhwYW5kID0gZmFsc2U7ICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5leHBhbmRlZEVsZW1lbnQgPSBudWxsOyAgICAgIFxyXG4gICAgICBpZiAobW9kZSA9PT0gdHJ1ZSkgeyAgICBcclxuICAgICAgICAvLyB0aGlzLnZpZXdwb3J0LnNjcm9sbFRvSW5kZXgocm93SW5kZXgsICdzbW9vdGgnKTsgICAgICBcclxuICAgICAgICAvLyBzZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICAgICAgLy8gICB0aGlzLmV4cGFuZGVkRWxlbWVudCA9IHRoaXMuZXhwYW5kZWRFbGVtZW50ID09PSB0aGlzLmRhdGFTb3VyY2UuYWxsRGF0YVtyb3dJbmRleF0gPyBudWxsIDogdGhpcy5kYXRhU291cmNlLmFsbERhdGFbcm93SW5kZXhdOyAgICBcclxuICAgICAgICAvLyAgIGlmICh0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24gPT09IHVuZGVmaW5lZCB8fCB0aGlzLmV4cGFuZGVkRWxlbWVudC5vcHRpb24gPT09IG51bGwpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uID0geyBleHBhbmQ6IGZhbHNlfTtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyAgIHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbi5leHBhbmQgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgdGhpcy5yZWZyZXNoR3JpZCgpO1xyXG4gICAgICAgIC8vIH0sIDMwMCk7XHJcbiAgICAgICAgdGhpcy5leHBhbmRlZEVsZW1lbnQgPSB0aGlzLmV4cGFuZGVkRWxlbWVudCA9PT0gdGhpcy50dnNEYXRhU291cmNlLmFsbERhdGFbcm93SW5kZXhdID8gbnVsbCA6IHRoaXMudHZzRGF0YVNvdXJjZS5hbGxEYXRhW3Jvd0luZGV4XTsgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuZXhwYW5kZWRFbGVtZW50Lm9wdGlvbiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgdGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uID0geyBleHBhbmQ6IGZhbHNlfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5leHBhbmRlZEVsZW1lbnQub3B0aW9uLmV4cGFuZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgfVxyXG5cclxuICBvblJvd1NlbGVjdGlvbihlLCByb3csIGNvbHVtbjogVGFibGVGaWVsZDxUPikge1xyXG4gICAgaWYgKHRoaXMucm93U2VsZWN0aW9uTW9kZSAmJiB0aGlzLnJvd1NlbGVjdGlvbk1vZGUgIT09ICdub25lJyAmJiBjb2x1bW4ucm93U2VsZWN0aW9uYWJsZSAhPT0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5vblJvd1NlbGVjdGlvbkNoYW5nZShlLCByb3cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DZWxsQ2xpY2soZSwgcm93LCBjb2x1bW46IFRhYmxlRmllbGQ8VD4pIHsgICAgXHJcbiAgICB0aGlzLm9uUm93U2VsZWN0aW9uKGUsIHJvdywgY29sdW1uKTtcclxuICAgIGlmIChjb2x1bW4uY2xpY2thYmxlICE9PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLm9uUm93RXZlbnQuZW1pdCh7IGV2ZW50OiAnQ2VsbENsaWNrJywgc2VuZGVyOiB7cm93OiByb3csIGNvbHVtbjogY29sdW1ufSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUm93RGJsQ2xpY2soZSwgcm93KSB7ICAgIFxyXG4gICAgdGhpcy5vblJvd0V2ZW50LmVtaXQoeyBldmVudDogZSwgc2VuZGVyOiB7cm93OiByb3d9IH0pO1xyXG4gIH1cclxuXHJcbiAgb25Sb3dDbGljayhlLCByb3cpIHtcclxuICAgIHRoaXMub25Sb3dFdmVudC5lbWl0KHsgZXZlbnQ6ICdSb3dDbGljaycsIHNlbmRlcjoge3Jvdzogcm93fSB9KTsgICAgXHJcbiAgfVxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIERyYWcgJiBEcm9wIENvbHVtbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICBkcmFnU3RhcnRlZChldmVudDogQ2RrRHJhZ1N0YXJ0KSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhldmVudCk7ICAgIFxyXG4gICAgLy8gZGVidWdnZXIgIFxyXG4gICAgLy8gdGhpcy5kcmFnRHJvcERhdGEuZHJhZ0NvbHVtbkluZGV4ID0gZXZlbnQuc291cmNlLjtcclxuICB9XHJcbiBcclxuICBkcm9wTGlzdERyb3BwZWQoZXZlbnQ6IENka0RyYWdEcm9wPHN0cmluZ1tdPikgeyAgICBcclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICB0aGlzLmRyYWdEcm9wRGF0YS5kcm9wQ29sdW1uSW5kZXggPSBldmVudC5jdXJyZW50SW5kZXg7XHJcbiAgICAgIHRoaXMubW92ZUNvbHVtbihldmVudC5wcmV2aW91c0luZGV4LCBldmVudC5jdXJyZW50SW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZHJvcChldmVudDogQ2RrRHJhZ0Ryb3A8c3RyaW5nW10+KSB7XHJcbiAgICBtb3ZlSXRlbUluQXJyYXkoZXZlbnQuY29udGFpbmVyLmRhdGEsIGV2ZW50LnByZXZpb3VzSW5kZXgsIGV2ZW50LmN1cnJlbnRJbmRleCk7XHJcblxyXG4gICAgLy8gdXBkYXRlcyBtb3ZlZCBkYXRhIGFuZCB0YWJsZSwgYnV0IG5vdCBkeW5hbWljIGlmIG1vcmUgZHJvcHpvbmVzXHJcbiAgICAvLyB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IGNsb25lZGVlcCh0aGlzLmRhdGFTb3VyY2UuZGF0YSk7XHJcbiAgfVxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiBcclxuICBjb3B5UHJvcGVydHkoZnJvbTogYW55LCB0bzogYW55KSB7XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XHJcbiAgICBrZXlzLmZvckVhY2goIGtleSA9PiB7XHJcbiAgICAgIGlmIChmcm9tW2tleV0gIT09IHVuZGVmaW5lZCAmJiBmcm9tW2tleV0gPT09IG51bGwpIHtcclxuICAgICAgICB0b1trZXldID0gQXJyYXkuaXNBcnJheShmcm9tW2tleV0pID8gT2JqZWN0LmFzc2lnbihbXSwgZnJvbVtrZXldKSA6IE9iamVjdC5hc3NpZ24oe30sIGZyb21ba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gXHJcbn1cclxuXHJcblxyXG4iXX0=