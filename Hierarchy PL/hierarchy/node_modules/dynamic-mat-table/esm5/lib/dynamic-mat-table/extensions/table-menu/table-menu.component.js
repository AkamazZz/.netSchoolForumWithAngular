/**
 * @fileoverview added by tsickle
 * Generated from: lib/dynamic-mat-table/extensions/table-menu/table-menu.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectionStrategy, Component, Output, Input, EventEmitter } from '@angular/core';
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { TableService } from '../../dynamic-mat-table.service';
import { TableIntl } from '../../../international/table-Intl';
import { clone, deepClone, isNullorUndefined } from '../../../cores/type';
var TableMenuComponent = /** @class */ (function () {
    function TableMenuComponent(languagePack, tableService) {
        this.languagePack = languagePack;
        this.tableService = tableService;
        this.menuActionChange = new EventEmitter();
        this.currentColumn = null;
        this.reverseDirection = null;
    }
    Object.defineProperty(TableMenuComponent.prototype, "tableSetting", {
        get: /**
         * @return {?}
         */
        function () {
            return this.currentTableSetting;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.originalTableSetting = value;
            this.reverseDirection = value.direction === 'rtl' ? 'ltr' : 'rtl';
            this.currentTableSetting = clone(value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TableMenuComponent.prototype.screenMode_OnClick = /**
     * @return {?}
     */
    function () {
        this.menuActionChange.emit({
            type: 'FullScreenMode',
            data: this.currentTableSetting,
        });
    };
    /***** Column Setting ******/
    /**
     * ** Column Setting *****
     * @param {?} event
     * @return {?}
     */
    TableMenuComponent.prototype.columnMenuDropped = /**
     * ** Column Setting *****
     * @param {?} event
     * @return {?}
     */
    function (event) {
        moveItemInArray(this.currentTableSetting.columnSetting, event.item.data.columnIndex, event.currentIndex);
    };
    /**
     * @param {?} columnIndex
     * @return {?}
     */
    TableMenuComponent.prototype.toggleSelectedColumn = /**
     * @param {?} columnIndex
     * @return {?}
     */
    function (columnIndex) {
        /** @type {?} */
        var colFound = this.currentTableSetting.columnSetting.find((/**
         * @param {?} col
         * @return {?}
         */
        function (col) { return col.index === columnIndex; }));
        colFound.display = colFound.display === 'visible' ? 'hiden' : 'visible';
    };
    /**
     * @param {?} e
     * @return {?}
     */
    TableMenuComponent.prototype.apply_OnClick = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.menuActionChange.emit({
                type: 'TableSetting',
                data: _this.currentTableSetting,
            });
            _this.tableService.saveColumnInfo(_this.currentTableSetting.columnSetting);
        }));
    };
    /**
     * @param {?} i
     * @return {?}
     */
    TableMenuComponent.prototype.setting_onClick = /**
     * @param {?} i
     * @return {?}
     */
    function (i) {
        this.currentColumn = i;
    };
    /**
     * @return {?}
     */
    TableMenuComponent.prototype.cancel_OnClick = /**
     * @return {?}
     */
    function () {
        this.currentTableSetting = deepClone(this.originalTableSetting);
    };
    /**
     * @param {?} visible
     * @return {?}
     */
    TableMenuComponent.prototype.isVisible = /**
     * @param {?} visible
     * @return {?}
     */
    function (visible) {
        return isNullorUndefined(visible) ? true : visible;
    };
    /*****  Save ********/
    /**
     * **  Save *******
     * @return {?}
     */
    TableMenuComponent.prototype.saveSetting_OnClick = /**
     * **  Save *******
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.menuActionChange.emit({ type: 'SaveSetting' });
        }));
    };
    /*****  Filter ********/
    /**
     * **  Filter *******
     * @return {?}
     */
    TableMenuComponent.prototype.clearFilter_OnClick = /**
     * **  Filter *******
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.menuActionChange.emit({ type: 'FilterClear' });
        }));
    };
    /******* Save File ***********/
    /**
     * **** Save File **********
     * @param {?} type
     * @return {?}
     */
    TableMenuComponent.prototype.download_OnClick = /**
     * **** Save File **********
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.menuActionChange.emit({ type: 'Download', data: type });
        }));
    };
    /**
     * @param {?} menu
     * @return {?}
     */
    TableMenuComponent.prototype.print_OnClick = /**
     * @param {?} menu
     * @return {?}
     */
    function (menu) {
        var _this = this;
        menu._overlayRef._host.parentElement.click();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.menuActionChange.emit({ type: 'Print', data: null });
        }));
    };
    TableMenuComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line: component-selector
                    selector: 'table-menu',
                    template: "<button\r\n  class=\"clear\"\r\n  mat-icon-button\r\n  #menuTrigger=\"matMenuTrigger\"\r\n  [matMenuTriggerFor]=\"menu\"\r\n  [dir]=\"reverseDirection\">\r\n  <mat-icon class=\"main-menu\">more_vert</mat-icon>\r\n</button>\r\n\r\n<mat-menu #menu=\"matMenu\" [overlapTrigger]=\"false\" [dir]=\"reverseDirection\">\r\n  <button   \r\n    mat-menu-item\r\n    (click)=\"screenMode_OnClick()\"\r\n    [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <mat-icon>fullscreen</mat-icon>\r\n    <span>{{ languagePack.menuLabels.fullScreen }}</span>\r\n  </button>\r\n  <button\r\n    mat-menu-item\r\n    color=\"primary\"\r\n    [matMenuTriggerFor]=\"convertMenu\"\r\n    [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <mat-icon>save</mat-icon>\r\n    <span>{{ languagePack.menuLabels.saveData }}</span>\r\n  </button>\r\n  <button\r\n    mat-menu-item\r\n    color=\"primary\"\r\n    [matMenuTriggerFor]=\"columnMenu\"\r\n    [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <mat-icon>view_column</mat-icon>\r\n    <span>{{ languagePack.menuLabels.columnSetting }}</span>\r\n  </button>\r\n  <button\r\n    mat-menu-item\r\n    (click)=\"saveSetting_OnClick()\"\r\n    [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <mat-icon>grading</mat-icon>\r\n    <span>{{ languagePack.menuLabels.saveTableSetting }}</span>\r\n  </button>\r\n  <button\r\n    mat-menu-item\r\n    (click)=\"clearFilter_OnClick()\"\r\n    [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <mat-icon>clear</mat-icon>\r\n    <span>{{ languagePack.menuLabels.clearFilter }}</span>\r\n  </button>\r\n</mat-menu>\r\n\r\n<!-- Convert Sub Menu -->\r\n\r\n<mat-menu #convertMenu=\"matMenu\">\r\n  <button mat-menu-item (click)=\"download_OnClick('JSON')\" [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <span>{{ languagePack.menuLabels.jsonFile }}</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"download_OnClick('CSV')\" [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <span>{{ languagePack.menuLabels.csvFile }}</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"print_OnClick(menuTrigger)\" [class.ltr-menu]=\"currentTableSetting.direction !== 'rtl'\">\r\n    <span>{{ languagePack.menuLabels.printTable }}</span>\r\n  </button>\r\n</mat-menu>\r\n\r\n<!-- Column Setting Sub Menu -->\r\n\r\n<mat-menu #columnMenu=\"matMenu\">\r\n  <ng-container\r\n    *ngIf=\"currentTableSetting?.columnSetting?.length > 0; else noColumns\">\r\n    <div\r\n      class=\"va-mat-table-dragable-container\"\r\n      cdkDropList\r\n      dkDropListLockAxis=\"y\"\r\n      cdkDropListOrientation=\"vertical\"\r\n      dir=\"ltr\">\r\n      <div\r\n        *ngFor=\"let column of currentTableSetting.columnSetting; let i = index\"\r\n        (click)=\"$event.stopPropagation(); $event.preventDefault()\"\r\n        class=\"dragable-row\"\r\n        cdkDrag\r\n        [cdkDragData]=\"{ columnIndex: i, columnTitle: column.header }\"\r\n        (cdkDragDropped)=\"columnMenuDropped($event)\">        \r\n        <mat-icon cdkDragHandle>drag_indicator</mat-icon>\r\n        <mat-checkbox\r\n          [disabled]=\"column?.display === 'prevent-hidden'\"\r\n          [checked]=\"column?.display === 'visible'\"\r\n          (click)=\"$event.stopPropagation()\"\r\n          (change)=\"toggleSelectedColumn(column.index)\">\r\n          {{ column.header }}\r\n        </mat-checkbox> \r\n        <mat-icon class=\"column-setting-button\" (click)=\"setting_onClick(i)\" #menuTrigger=\"matMenuTrigger\"  [matMenuTriggerFor]=\"columnSettingMenu\">settings</mat-icon>\r\n        <!-- <button\r\n          mat-icon-button\r\n          class=\"column-setting-button\"\r\n          (click)=\"setting_onClick(i)\">\r\n          <mat-icon (click)=\"setting_onClick(i)\" #menuTrigger=\"matMenuTrigger\"  [matMenuTriggerFor]=\"columnSettingMenu\">settings</mat-icon>\r\n        </button> -->\r\n\r\n        <div class=\"va-mat-table-drag-preview\" *cdkDragPreview>\r\n          <mat-icon>drag_indicator</mat-icon>\r\n          <mat-checkbox [checked]=\"column?.display === 'visible'\">\r\n            {{ column.header }}\r\n          </mat-checkbox>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"border-top: solid 1px #e7e7e7\">\r\n      <button\r\n        mat-menu-item\r\n        color=\"primary\"\r\n        class=\"done-setting\"\r\n        (click)=\"apply_OnClick($event)\">\r\n        <mat-icon color=\"primary\">done</mat-icon>\r\n      </button>\r\n      <button\r\n        mat-menu-item\r\n        color=\"primary\"\r\n        class=\"done-setting\"\r\n        (click)=\"cancel_OnClick()\">\r\n        <mat-icon color=\"primary\">clear</mat-icon>\r\n      </button>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #noColumns>\r\n    <div mat-menu-item>\r\n      {{ languagePack.menuLabels.thereIsNoColumn }}\r\n    </div>\r\n  </ng-template>\r\n</mat-menu>\r\n\r\n<mat-menu\r\n  #columnSettingMenu=\"matMenu\"\r\n  [overlapTrigger]=\"false\"\r\n  style=\"padding: 10px !important\">\r\n  <div\r\n    *ngIf=\"currentColumn !== null\"\r\n    (click)=\"$event.stopPropagation(); $event.preventDefault()\"\r\n    class=\"column-setting\">\r\n    <ng-container\r\n      *ngIf=\"isVisible(currentTableSetting?.visibaleActionMenu?.columnSettingFilter)\">\r\n      <div class=\"column-setting-header column-setting-header-first\">\r\n        <mat-icon color=\"primary\">filter_alt</mat-icon>{{ languagePack.menuLabels.filterMode }}\r\n      </div>\r\n      <mat-radio-group class=\"radio\" [(ngModel)]=\"currentTableSetting.columnSetting[currentColumn].filter\">\r\n        <mat-radio-button value='client-side' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.filterLocalMode }}</mat-radio-button>\r\n        <mat-radio-button value='server-side' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.filterServerMode }}</mat-radio-button>\r\n      </mat-radio-group>\r\n    </ng-container>\r\n\r\n    <ng-container\r\n      *ngIf=\"isVisible(currentTableSetting?.visibaleActionMenu?.columnSettingSort)\">\r\n      <div class=\"column-setting-header\">\r\n        <mat-icon color=\"primary\">sort</mat-icon>{{ languagePack.menuLabels.sortMode }}\r\n      </div>\r\n      <mat-radio-group class=\"radio\" [(ngModel)]=\"currentTableSetting.columnSetting[currentColumn].sort\">\r\n        <mat-radio-button value='client-side' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.sortLocalMode }}</mat-radio-button>\r\n        <mat-radio-button value='server-side' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.sortServerMode }}</mat-radio-button>\r\n      </mat-radio-group>\r\n    </ng-container>\r\n\r\n    <ng-container \r\n      *ngIf=\"isVisible(currentTableSetting?.visibaleActionMenu?.columnSettingFilter)\">\r\n      <div class=\"column-setting-header\">\r\n        <mat-icon color=\"primary\">print</mat-icon>{{ languagePack.menuLabels.printMode }}\r\n      </div>\r\n      <mat-radio-group class=\"radio\" [(ngModel)]=\"currentTableSetting.columnSetting[currentColumn].printable\">\r\n        <mat-radio-button [value]=\"true\" (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.printYesMode }}</mat-radio-button>\r\n        <mat-radio-button [value]=\"false\" (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.printNoMode }}</mat-radio-button>\r\n      </mat-radio-group>\r\n    </ng-container>\r\n\r\n    <ng-container\r\n      *ngIf=\"isVisible(currentTableSetting?.visibaleActionMenu?.columnSettingPin)\">\r\n      <div class=\"column-setting-header\">\r\n        <mat-icon color=\"primary\">push_pin</mat-icon>{{ languagePack.menuLabels.pinMode }}\r\n      </div>\r\n      <mat-radio-group class=\"radio\" [(ngModel)]=\"currentTableSetting.columnSetting[currentColumn].sticky\">\r\n        <mat-radio-button value='none' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.pinNoneMode }}</mat-radio-button>\r\n        <mat-radio-button value='start' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.pinStartMode }}</mat-radio-button>\r\n        <mat-radio-button value='end' (click)=\"$event.stopPropagation()\">{{ languagePack.menuLabels.pinEndMode }}</mat-radio-button>\r\n      </mat-radio-group>\r\n    </ng-container>\r\n  </div>\r\n</mat-menu>\r\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [":host{display:flex;align-items:center;justify-content:space-between}.ltr-menu span{float:left}.main-menu{width:38px!important;line-height:24px!important}.va-mat-button-no-input{border:none;background-color:transparent;outline:0}.va-mat-table-dragable-container{min-width:200px;padding:8px 0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.va-mat-table-dragable-container:dir(rtl){background-color:green!important}.dragable-row mat-checkbox{width:100%;line-height:28px;display:inline-flex}.va-mat-table-dragable-container .dragable-row{background-color:#fff;display:flex;width:100%;height:30px;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.column-setting-button{cursor:pointer!important;font-size:24px;margin-right:5px}.va-mat-table-dragable-container .dragable-row mat-icon{line-height:30px;opacity:.15;transition:opacity .5s;color:#616161;cursor:-webkit-grab;cursor:grab;background-color:#fff}.va-mat-table-dragable-container .dragable-row:hover mat-icon{opacity:1}.va-mat-table-drag-preview{direction:ltr;background-color:#ececec;padding:4px 8px 4px 4px!important;cursor:-webkit-grabbing!important;cursor:grabbing!important;margin-top:-4px;margin-left:-4px;font-size:14px;border-radius:5px}.va-mat-table-drag-preview mat-checkbox,.va-mat-table-drag-preview mat-icon{vertical-align:top}.va-mat-table-drag-preview mat-icon{padding-left:4px;color:#616161}.cdk-drop-list-dragging .cdk-drag{transition:transform 250ms cubic-bezier(0,0,.2,1)}.cdk-drag-animating{transition:transform .3s cubic-bezier(0,0,.2,1)}.done-setting{width:50%!important;display:inline-flex;text-align:center;height:42px}.done-setting mat-icon{line-height:38px!important;opacity:.6;transition:opacity .5s;color:#616161;width:100%;text-align:center;margin:0}.done-setting mat-icon:hover{opacity:1}.column-setting{font-family:Roboto,\"Helvetica Neue\",sans-serif;padding:10px}.column-setting .radio{width:100%;display:flex;font-size:12px;margin-top:-2px}.column-setting .radio mat-radio-button{padding:5px;width:50%}.column-setting .radio mat-radio-button:last-child{margin-right:10px}.column-setting .column-setting-header{line-height:30px;padding:5px 5px 0;font-size:14px;border-top:1px solid #f3f3f3;margin-top:5px}.column-setting .column-setting-header mat-icon{opacity:.7;font-size:22px;line-height:30px;float:right;color:#616161}.column-setting-header:first-child{border-top:none!important;padding:0 5px!important;margin-top:-5px!important}.first-menu-item{width:100px;display:inline-block;text-align:left}::ng-deep [dir=rtl] .mat-checkbox-inner-container{margin-left:auto!important;margin-right:5px!important}.mat-menu-item{display:inline-flex}.mat-menu-item span{width:100%}.mat-menu-item mat-icon{line-height:48px!important}"]
                }] }
    ];
    /** @nocollapse */
    TableMenuComponent.ctorParameters = function () { return [
        { type: TableIntl },
        { type: TableService }
    ]; };
    TableMenuComponent.propDecorators = {
        menuActionChange: [{ type: Output }],
        tableSetting: [{ type: Input }]
    };
    return TableMenuComponent;
}());
export { TableMenuComponent };
if (false) {
    /** @type {?} */
    TableMenuComponent.prototype.menuActionChange;
    /** @type {?} */
    TableMenuComponent.prototype.currentColumn;
    /** @type {?} */
    TableMenuComponent.prototype.reverseDirection;
    /** @type {?} */
    TableMenuComponent.prototype.originalTableSetting;
    /** @type {?} */
    TableMenuComponent.prototype.currentTableSetting;
    /** @type {?} */
    TableMenuComponent.prototype.languagePack;
    /** @type {?} */
    TableMenuComponent.prototype.tableService;
}
/**
 * @record
 */
export function TableMenuActionChange() { }
if (false) {
    /** @type {?} */
    TableMenuActionChange.prototype.type;
    /** @type {?|undefined} */
    TableMenuActionChange.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtbWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9keW5hbWljLW1hdC10YWJsZS8iLCJzb3VyY2VzIjpbImxpYi9keW5hbWljLW1hdC10YWJsZS9leHRlbnNpb25zL3RhYmxlLW1lbnUvdGFibGUtbWVudS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hHLE9BQU8sRUFBRSxlQUFlLEVBQWUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFFL0QsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1DQUFtQyxDQUFDO0FBQzlELE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFMUU7SUF3QkUsNEJBQW1CLFlBQXVCLEVBQVMsWUFBMEI7UUFBMUQsaUJBQVksR0FBWixZQUFZLENBQVc7UUFBUyxpQkFBWSxHQUFaLFlBQVksQ0FBYztRQWhCbkUscUJBQWdCLEdBQXdDLElBQUksWUFBWSxFQUF5QixDQUFDO1FBVzVHLGtCQUFhLEdBQVcsSUFBSSxDQUFDO1FBQzdCLHFCQUFnQixHQUFXLElBQUksQ0FBQztJQUtoQyxDQUFDO0lBaEJELHNCQUNJLDRDQUFZOzs7O1FBRGhCO1lBRUUsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUM7UUFDbEMsQ0FBQzs7Ozs7UUFDRCxVQUFpQixLQUFtQjtZQUNsQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsS0FBSyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsU0FBUyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDbEUs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Qy9ELENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7Ozs7SUFFRCwwQ0FBYTs7OztJQUFiLFVBQWMsSUFBSTtRQUFsQixpQkFLQztRQUpDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM3QyxVQUFVOzs7UUFBQztZQUNULEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQzVELENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7Z0JBcEdGLFNBQVMsU0FBQzs7b0JBRVQsUUFBUSxFQUFFLFlBQVk7b0JBQ3RCLHl0UUFBMEM7b0JBRTFDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOztpQkFDaEQ7Ozs7Z0JBVFEsU0FBUztnQkFGVCxZQUFZOzs7bUNBYWxCLE1BQU07K0JBQ04sS0FBSzs7SUE0RlIseUJBQUM7Q0FBQSxBQXJHRCxJQXFHQztTQTlGWSxrQkFBa0I7OztJQUM3Qiw4Q0FBNEc7O0lBVzVHLDJDQUE2Qjs7SUFDN0IsOENBQWdDOztJQUNoQyxrREFBbUM7O0lBQ25DLGlEQUFrQzs7SUFFdEIsMENBQThCOztJQUFFLDBDQUFpQzs7Ozs7QUErRS9FLDJDQUdDOzs7SUFGQyxxQ0FBK0Y7O0lBQy9GLHFDQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgT3V0cHV0LCBJbnB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IG1vdmVJdGVtSW5BcnJheSwgQ2RrRHJhZ0Ryb3AgfSBmcm9tICdAYW5ndWxhci9jZGsvZHJhZy1kcm9wJztcclxuaW1wb3J0IHsgVGFibGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vZHluYW1pYy1tYXQtdGFibGUuc2VydmljZSc7XHJcbmltcG9ydCB7IFRhYmxlU2V0dGluZyB9IGZyb20gJy4uLy4uLy4uL21vZGVscy90YWJsZS1zZXR0aW5nLm1vZGVsJztcclxuaW1wb3J0IHsgVGFibGVJbnRsIH0gZnJvbSAnLi4vLi4vLi4vaW50ZXJuYXRpb25hbC90YWJsZS1JbnRsJztcclxuaW1wb3J0IHsgY2xvbmUsIGRlZXBDbG9uZSwgaXNOdWxsb3JVbmRlZmluZWQgfSBmcm9tICcuLi8uLi8uLi9jb3Jlcy90eXBlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY29tcG9uZW50LXNlbGVjdG9yXHJcbiAgc2VsZWN0b3I6ICd0YWJsZS1tZW51JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vdGFibGUtbWVudS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vdGFibGUtbWVudS5jb21wb25lbnQuc2NzcyddLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgVGFibGVNZW51Q29tcG9uZW50IHtcclxuICBAT3V0cHV0KCkgbWVudUFjdGlvbkNoYW5nZTogRXZlbnRFbWl0dGVyPFRhYmxlTWVudUFjdGlvbkNoYW5nZT4gPSBuZXcgRXZlbnRFbWl0dGVyPFRhYmxlTWVudUFjdGlvbkNoYW5nZT4oKTtcclxuICBASW5wdXQoKVxyXG4gIGdldCB0YWJsZVNldHRpbmcoKTogVGFibGVTZXR0aW5nIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRUYWJsZVNldHRpbmc7XHJcbiAgfVxyXG4gIHNldCB0YWJsZVNldHRpbmcodmFsdWU6IFRhYmxlU2V0dGluZykge1xyXG4gICAgdGhpcy5vcmlnaW5hbFRhYmxlU2V0dGluZyA9IHZhbHVlO1xyXG4gICAgdGhpcy5yZXZlcnNlRGlyZWN0aW9uID0gdmFsdWUuZGlyZWN0aW9uID09PSAncnRsJyA/ICdsdHInIDogJ3J0bCc7XHJcbiAgICB0aGlzLmN1cnJlbnRUYWJsZVNldHRpbmcgPSBjbG9uZTxUYWJsZVNldHRpbmc+KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIGN1cnJlbnRDb2x1bW46IG51bWJlciA9IG51bGw7XHJcbiAgcmV2ZXJzZURpcmVjdGlvbjogc3RyaW5nID0gbnVsbDtcclxuICBvcmlnaW5hbFRhYmxlU2V0dGluZzogVGFibGVTZXR0aW5nO1xyXG4gIGN1cnJlbnRUYWJsZVNldHRpbmc6IFRhYmxlU2V0dGluZztcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIGxhbmd1YWdlUGFjazogVGFibGVJbnRsLCBwdWJsaWMgdGFibGVTZXJ2aWNlOiBUYWJsZVNlcnZpY2UpIHtcclxuICB9XHJcblxyXG4gIHNjcmVlbk1vZGVfT25DbGljaygpIHtcclxuICAgIHRoaXMubWVudUFjdGlvbkNoYW5nZS5lbWl0KHtcclxuICAgICAgdHlwZTogJ0Z1bGxTY3JlZW5Nb2RlJyxcclxuICAgICAgZGF0YTogdGhpcy5jdXJyZW50VGFibGVTZXR0aW5nLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKioqKiogQ29sdW1uIFNldHRpbmcgKioqKioqL1xyXG4gIGNvbHVtbk1lbnVEcm9wcGVkKGV2ZW50OiBDZGtEcmFnRHJvcDxhbnk+KTogdm9pZCB7XHJcbiAgICBtb3ZlSXRlbUluQXJyYXkoXHJcbiAgICAgIHRoaXMuY3VycmVudFRhYmxlU2V0dGluZy5jb2x1bW5TZXR0aW5nLFxyXG4gICAgICBldmVudC5pdGVtLmRhdGEuY29sdW1uSW5kZXgsXHJcbiAgICAgIGV2ZW50LmN1cnJlbnRJbmRleFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNlbGVjdGVkQ29sdW1uKGNvbHVtbkluZGV4OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGNvbEZvdW5kID0gdGhpcy5jdXJyZW50VGFibGVTZXR0aW5nLmNvbHVtblNldHRpbmcuZmluZChcclxuICAgICAgKGNvbCkgPT4gY29sLmluZGV4ID09PSBjb2x1bW5JbmRleFxyXG4gICAgKTtcclxuICAgIGNvbEZvdW5kLmRpc3BsYXkgPSBjb2xGb3VuZC5kaXNwbGF5ID09PSAndmlzaWJsZScgPyAnaGlkZW4nIDogJ3Zpc2libGUnO1xyXG4gIH1cclxuXHJcbiAgYXBwbHlfT25DbGljayhlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMubWVudUFjdGlvbkNoYW5nZS5lbWl0KHtcclxuICAgICAgICB0eXBlOiAnVGFibGVTZXR0aW5nJyxcclxuICAgICAgICBkYXRhOiB0aGlzLmN1cnJlbnRUYWJsZVNldHRpbmcsXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnRhYmxlU2VydmljZS5zYXZlQ29sdW1uSW5mbyh0aGlzLmN1cnJlbnRUYWJsZVNldHRpbmcuY29sdW1uU2V0dGluZyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldHRpbmdfb25DbGljayhpKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRDb2x1bW4gPSBpO1xyXG4gIH1cclxuXHJcbiAgY2FuY2VsX09uQ2xpY2soKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRUYWJsZVNldHRpbmcgPSBkZWVwQ2xvbmUodGhpcy5vcmlnaW5hbFRhYmxlU2V0dGluZyk7XHJcbiAgfVxyXG5cclxuICBpc1Zpc2libGUodmlzaWJsZTogYm9vbGVhbikge1xyXG4gICAgcmV0dXJuIGlzTnVsbG9yVW5kZWZpbmVkKHZpc2libGUpID8gdHJ1ZSA6IHZpc2libGU7XHJcbiAgfVxyXG5cclxuICAvKioqKiogIFNhdmUgKioqKioqKiovXHJcbiAgc2F2ZVNldHRpbmdfT25DbGljaygpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLm1lbnVBY3Rpb25DaGFuZ2UuZW1pdCh7IHR5cGU6ICdTYXZlU2V0dGluZycgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKioqKiAgRmlsdGVyICoqKioqKioqL1xyXG4gIGNsZWFyRmlsdGVyX09uQ2xpY2soKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5tZW51QWN0aW9uQ2hhbmdlLmVtaXQoeyB0eXBlOiAnRmlsdGVyQ2xlYXInIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKioqKioqKiBTYXZlIEZpbGUgKioqKioqKioqKiovXHJcbiAgZG93bmxvYWRfT25DbGljayh0eXBlOiBzdHJpbmcpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLm1lbnVBY3Rpb25DaGFuZ2UuZW1pdCh7IHR5cGU6ICdEb3dubG9hZCcsIGRhdGE6IHR5cGUgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaW50X09uQ2xpY2sobWVudSkge1xyXG4gICAgbWVudS5fb3ZlcmxheVJlZi5faG9zdC5wYXJlbnRFbGVtZW50LmNsaWNrKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5tZW51QWN0aW9uQ2hhbmdlLmVtaXQoeyB0eXBlOiAnUHJpbnQnLCBkYXRhOiBudWxsIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlTWVudUFjdGlvbkNoYW5nZSB7XHJcbiAgdHlwZTogJ0ZpbHRlckNsZWFyJyB8ICdUYWJsZVNldHRpbmcnIHwgJ0Rvd25sb2FkJyB8ICdTYXZlU2V0dGluZycgfCAnUHJpbnQnIHwgJ0Z1bGxTY3JlZW5Nb2RlJztcclxuICBkYXRhPzogYW55O1xyXG59XHJcbiJdfQ==