{"ast":null,"code":"import _asyncToGenerator from \"C:/Hierarchy/Hierarchy PL/hierarchy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { EventEmitter } from '@angular/core';\nimport { Students } from 'models/students.model';\nimport { SubjectsResult } from 'models/subjects-result.model';\nimport { FadeInOut } from 'src/app/animations';\nimport { StudentSubject } from 'models/student-subject.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction ShowSubjectComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelementStart(6, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function ShowSubjectComponent_tr_12_Template_input_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const i_r3 = restoredCtx.index;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.AssessmentList[i_r3].grade = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ShowSubjectComponent_tr_12_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const i_r3 = restoredCtx.index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.UpdateGrade(ctx_r6.AssessmentList[i_r3]);\n    });\n    i0.ɵɵtext(8, \"Upload\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelementStart(10, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ShowSubjectComponent_tr_12_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const subjects_r2 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.deleteSubjectOfStudent(ctx_r7.studentSubject.student_id, subjects_r2.subject_id);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(11, \"svg\", 11);\n    i0.ɵɵelement(12, \"path\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@flyInOut\", \"in\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.StudentSubjectList.result_set[i_r3].subject_id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@flyInOut\", \"in\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.StudentSubjectList.result_set[i_r3].subject_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.AssessmentList[i_r3].grade);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"@flyInOut\", \"in\");\n  }\n}\n\nfunction ShowSubjectComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const subjects_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", subjects_r8.subject_id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", subjects_r8.subject_name, \" \");\n  }\n}\n\nexport class ShowSubjectComponent {\n  constructor(service) {\n    this.service = service;\n    this.onCreate = new EventEmitter();\n    this.studentSubject = new Students();\n    this.StudentSubjectList = new SubjectsResult();\n    this.SubjectListToAdd = new SubjectsResult();\n    this.SubjectToAdd = new StudentSubject();\n    this.AssessmentList = [];\n  }\n\n  ngOnInit() {\n    this.onCreate.emit(null);\n    this.RefreshSubjects();\n    this.RefreshSubjectListByStudent();\n    this.RefreshAssessmentList();\n  }\n\n  UpdateGrade(grade) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (grade != null) {\n        yield _this.service.UpdateGrade(grade).then(data => {\n          if (data.result_set) {\n            alert('The grade has been changed');\n          } else {\n            alert('Something went wrong');\n          }\n        });\n      } else {\n        alert(\"You didn't provide data\");\n      }\n    })();\n  }\n\n  RefreshAssessmentList() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.service.GetGradeByStudent(_this2.studentSubject.student_id).then(data => {\n        if (data.success) {\n          _this2.AssessmentList = data.result_set;\n        }\n      }).catch(error => {\n        alert(error.error.userMessage + 'Student does not have assessments');\n      });\n    })();\n  }\n\n  RefreshSubjectListByStudent() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.service.GetSubjectByStudent(_this3.studentSubject.student_id).then(data => {\n        if (data.success) {\n          _this3.StudentSubjectList = data;\n\n          if (data.result_set.length == 0) {}\n        } else {\n          alert(data.userMessage);\n        }\n      });\n    })();\n  }\n\n  deleteSubjectOfStudent(student_id, subject_id) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (confirm('Are you sure?')) {\n        let result = new SubjectsResult();\n        yield _this4.service.DeleteSubjectOfStudent(student_id, subject_id).then(data => {\n          result.success = data.success;\n          result.userMessage = data.userMessage;\n\n          if (result.success) {\n            alert('You have successfully deleted subject');\n\n            _this4.RefreshSubjectListByStudent();\n          }\n        }).catch(error => {\n          alert(error.error.userMessage + 'Student does not have this subject');\n        });\n      }\n    })();\n  }\n\n  createGrade(grade) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this5.service.CreateGrade(grade).then(data => {\n        if (data.success) {\n          alert('grade has been created as ');\n\n          _this5.RefreshAssessmentList();\n        }\n\n        alert('grade had been created before ');\n      }).catch(error => {\n        alert(error.error.userMessage + 'There is no such subject or grade');\n      });\n    })();\n  }\n\n  RefreshSubjects() {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this6.service.GetSubjects().then(data => {\n        if (data.success) {\n          _this6.SubjectListToAdd = data;\n        }\n      }).catch(error => {\n        alert(error.error.userMessage + 'There is no such subject or grade');\n      });\n    })();\n  }\n\n  ngAfterViewInit() {\n    this.RefreshSubjectListByStudent();\n  }\n\n  AddSubjectTOStudent(add) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      add.student_id = _this7.studentSubject.student_id;\n      yield _this7.service.AddSubjectToStudent(add).then(data => {\n        if (data.success && data.result_set != null) {\n          alert('The subject has been added');\n\n          _this7.RefreshAssessmentList();\n\n          _this7.RefreshSubjectListByStudent();\n        } else {\n          alert('grade had been created before ');\n        }\n      }).catch(error => {\n        alert(error.error.userMessage);\n      });\n    })();\n  }\n\n}\n\nShowSubjectComponent.ɵfac = function ShowSubjectComponent_Factory(t) {\n  return new (t || ShowSubjectComponent)(i0.ɵɵdirectiveInject(i1.SharedService));\n};\n\nShowSubjectComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShowSubjectComponent,\n  selectors: [[\"app-show-subject\"]],\n  inputs: {\n    studentSubject: \"studentSubject\",\n    ActivateShowSubjectComp: \"ActivateShowSubjectComp\"\n  },\n  outputs: {\n    onCreate: \"onCreate\"\n  },\n  decls: 21,\n  vars: 4,\n  consts: [[1, \"styled-table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", 2, \"text-align\", \"center\"], [1, \"col-md-2\"], [\"for\", \"Subject\"], [\"id\", \"subject\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-block\", 3, \"click\"], [\"id\", \"subjectInput\", \"type\", \"number\", \"max\", \"100\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-light\", 3, \"click\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#exampleModal\", 1, \"btn\", \"btn-light\", \"mr-1\", 3, \"click\"], [\"width\", \"1em\", \"height\", \"1em\", \"viewBox\", \"0 0 16 16\", \"fill\", \"currentColor\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"bi\", \"bi-trash-fill\"], [\"fill-rule\", \"evenodd\", \"d\", \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\"], [3, \"value\"]],\n  template: function ShowSubjectComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\", 0);\n      i0.ɵɵelementStart(1, \"thead\");\n      i0.ɵɵelementStart(2, \"tr\");\n      i0.ɵɵelementStart(3, \"th\");\n      i0.ɵɵtext(4, \"ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"th\");\n      i0.ɵɵtext(6, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"th\");\n      i0.ɵɵtext(8, \"Grade\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"th\");\n      i0.ɵɵtext(10, \"Options\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"tbody\");\n      i0.ɵɵtemplate(12, ShowSubjectComponent_tr_12_Template, 13, 6, \"tr\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 2);\n      i0.ɵɵelementStart(14, \"div\", 3);\n      i0.ɵɵelementStart(15, \"label\", 4);\n      i0.ɵɵtext(16, \"Add another subject\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"select\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function ShowSubjectComponent_Template_select_ngModelChange_17_listener($event) {\n        return ctx.SubjectToAdd.subject_id = $event;\n      });\n      i0.ɵɵtemplate(18, ShowSubjectComponent_option_18_Template, 2, 2, \"option\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function ShowSubjectComponent_Template_button_click_19_listener() {\n        return ctx.AddSubjectTOStudent(ctx.SubjectToAdd);\n      });\n      i0.ɵɵtext(20, \"Submit \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"@flyInOut\", \"in\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.StudentSubjectList.result_set);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.SubjectToAdd.subject_id);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.SubjectListToAdd.result_set);\n    }\n  },\n  directives: [i2.NgForOf, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel, i3.MaxValidator, i3.MinValidator, i3.NumberValueAccessor, i3.DefaultValueAccessor, i3.NgSelectOption, i3.ɵNgSelectMultipleOption],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzaG93LXN1YmplY3QuY29tcG9uZW50LmNzcyJ9 */\"],\n  data: {\n    animation: [FadeInOut]\n  }\n});","map":{"version":3,"sources":["C:\\Hierarchy\\Hierarchy PL\\hierarchy\\src\\app\\subject\\show-subject\\show-subject.component.ts","C:\\Hierarchy\\Hierarchy PL\\hierarchy\\src\\app\\subject\\show-subject\\show-subject.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Directive, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Students } from 'models/students.model';\nimport { SubjectsResult } from 'models/subjects-result.model';\nimport { SharedService } from 'src/app/shared.service';\nimport { FadeInOut } from 'src/app/animations';\nimport { Assessment } from 'models/assessment.model';\nimport { THIS_EXPR } from '@angular/compiler/src/output/output_ast';\nimport { Subject } from 'models/subject.model';\nimport { StudentSubject } from 'models/student-subject.model';\nimport { ThisReceiver } from '@angular/compiler';\n\n@Component({\n  selector: 'app-show-subject',\n  templateUrl: './show-subject.component.html',\n  styleUrls: ['./show-subject.component.css'],\n  animations: [\n    FadeInOut,\n  ]\n})\n\nexport class ShowSubjectComponent implements OnInit {\n  @Output() onCreate: EventEmitter<any> = new EventEmitter<any>();\n  @Input() studentSubject: Students = new Students();\n  @Input() ActivateShowSubjectComp: boolean;\n  StudentSubjectList: SubjectsResult = new SubjectsResult();\n  SubjectListToAdd: SubjectsResult = new SubjectsResult();\n  SubjectToAdd:StudentSubject = new StudentSubject();\n  constructor(private service: SharedService) { }\n\n  ngOnInit(): void {\n    this.onCreate.emit(null); \n    this.RefreshSubjects();\n    this.RefreshSubjectListByStudent();\n    this.RefreshAssessmentList();\n  }\n  AssessmentList: Assessment[]=[];\nasync UpdateGrade(grade:Assessment){\n  if(grade!=null){\n  await this.service.UpdateGrade(grade).then((data)=>{\n  if(data.result_set){\n    alert('The grade has been changed')\n  }else{\n    alert('Something went wrong')\n  }\n})\n  }else{\n    alert(\"You didn't provide data\");\n  }\n\n}\n  async RefreshAssessmentList(){\n    await this.service.GetGradeByStudent(this.studentSubject.student_id).then((data)=>{\n      if(data.success){\n        this.AssessmentList = data.result_set;\n      }\n      \n    })\n    .catch((error) => {\n      alert(\n        error.error.userMessage +\n          'Student does not have assessments'\n      );\n    });\n  }\n  async RefreshSubjectListByStudent(){\n     await this.service.GetSubjectByStudent(this.studentSubject.student_id).then((data)=> {\n      \n        if (data.success) {\n         this.StudentSubjectList = data;\n        if(data.result_set.length == 0){\n\n        }\n    \n        } else {\n          alert(data.userMessage);\n        }\n      })\n  }\n async deleteSubjectOfStudent(student_id: number, subject_id:number){\n    if(confirm('Are you sure?')){\n      let result = new SubjectsResult();\n    await this.service\n      .DeleteSubjectOfStudent(student_id, subject_id)\n      .then((data) => {\n        result.success = data.success;\n        result.userMessage = data.userMessage;\n        if (result.success) {\n          alert('You have successfully deleted subject');\n          this.RefreshSubjectListByStudent();\n        } \n       \n      })\n      .catch((error) => {\n        alert(\n          error.error.userMessage +\n            'Student does not have this subject'\n        );\n      });\n    }\n  }\n  \n  async createGrade(grade:Assessment){\n    await this.service.CreateGrade(grade).then((data)=>{\n      if(data.success){\n        alert('grade has been created as ');\n        this.RefreshAssessmentList();\n\n      }\n      alert('grade had been created before ');\n    })\n    .catch((error) => {\n      alert(\n        error.error.userMessage +\n          'There is no such subject or grade'\n      );\n    })\n  }\n  async RefreshSubjects(){\n    await this.service.GetSubjects().then((data)=> {\n      if(data.success){\n        this.SubjectListToAdd = data;\n      }\n    })\n    .catch((error) => {\n      alert(\n        error.error.userMessage +\n          'There is no such subject or grade'\n      );\n    })\n  \n  }\n  ngAfterViewInit() {\n  this.RefreshSubjectListByStudent() }\n  async AddSubjectTOStudent(add:StudentSubject){\n    add.student_id =this.studentSubject.student_id;\n    await this.service.AddSubjectToStudent(add).then((data)=>{\n      if(data.success && data.result_set != null){\n        alert('The subject has been added');\n        this.RefreshAssessmentList();\n        this.RefreshSubjectListByStudent();\n      }else{\n      alert('grade had been created before ');\n      }\n    })\n    .catch((error) => {\n      alert(\n        error.error.userMessage \n      );\n    })\n  }\n}\n\n","<table  class=\"styled-table\">\n    <thead>\n        <tr [@flyInOut] = \"'in'\">     \n            <th>ID</th>\n            <th>Name</th>\n            <th>Grade</th>\n            <th>Options</th>\n        </tr>\n    </thead>\n    <tbody>\n  \n        <tr *ngFor=\"let subjects of StudentSubjectList.result_set; let i = index\">\n            <td [@flyInOut] = \"'in'\">{{StudentSubjectList.result_set[i].subject_id}}</td>\n            <td [@flyInOut] = \"'in'\">{{StudentSubjectList.result_set[i].subject_name}}</td>\n            <td><input id=\"subjectInput\" type=\"number\" class=\"form-control\" max='100' min='0' [ngModel]=\"AssessmentList[i].grade\" (ngModelChange)=\"AssessmentList[i].grade= $event\" >\n                <button type=\"button\" class=\"btn btn-light\" (click) = \"UpdateGrade(AssessmentList[i])\">Upload</button></td>\n\n            <td [@flyInOut] = \"'in'\">\n                <button type=\"button\" class=\"btn btn-light mr-1\"\n                data-toggle=\"modal\" data-target=\"#exampleModal\"\n                (click) = \"deleteSubjectOfStudent(studentSubject.student_id, subjects.subject_id)\"\n                >\n                  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" class=\"bi bi-trash-fill\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\"/>\n                  </svg>\n                </button>\n\n            </td>\n            \n       \n        </tr>\n        \n        \n    </tbody>\n  </table>\n  <div class=\"row\" style=\"text-align:center\">\n    <div class=\"col-md-2\">\n      <label for=\"Subject\">Add another subject</label>\n      <select  class=\"form-control\" id=\"subject\" \n        [ngModel]=\"SubjectToAdd.subject_id\" (ngModelChange)=\"SubjectToAdd.subject_id= $event\"> \n    <option *ngFor=\"let subjects of SubjectListToAdd.result_set\" [value] = \"subjects.subject_id\">\n        {{subjects.subject_name}}\n    </option></select> \n\n\n    </div>\n    <button class=\"btn btn-primary btn-block\"  type=\"button\" (click)=\"AddSubjectTOStudent(SubjectToAdd)   \">Submit </button>\n\n    </div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}